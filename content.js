var content=function(){"use strict";var Pf=Object.defineProperty;var Df=(Re,oe,xe)=>oe in Re?Pf(Re,oe,{enumerable:!0,configurable:!0,writable:!0,value:xe}):Re[oe]=xe;var pe=(Re,oe,xe)=>Df(Re,typeof oe!="symbol"?oe+"":oe,xe);(function(){try{var Re=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},oe=new Re.Error().stack;oe&&(Re._sentryDebugIds=Re._sentryDebugIds||{},Re._sentryDebugIds[oe]="9f33b5cb-98f4-45d1-afb6-03c2d8fe64e5",Re._sentryDebugIdIdentifier="sentry-dbid-9f33b5cb-98f4-45d1-afb6-03c2d8fe64e5")}catch{}})();var zs,js;function Re(t){return t}const oe=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,xe="8.47.0",ce=globalThis;function Ft(t,e,n){const r=n||ce,i=r.__SENTRY__=r.__SENTRY__||{},s=i[xe]=i[xe]||{};return s[t]||(s[t]=e())}const et=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,qs="Sentry Logger ",Tn=["debug","info","warn","error","log","assert","trace"],Mt={};function At(t){if(!("console"in ce))return t();const e=ce.console,n={},r=Object.keys(Mt);r.forEach(i=>{const s=Mt[i];n[i]=e[i],e[i]=s});try{return t()}finally{r.forEach(i=>{e[i]=n[i]})}}function Hs(){let t=!1;const e={enable:()=>{t=!0},disable:()=>{t=!1},isEnabled:()=>t};return et?Tn.forEach(n=>{e[n]=(...r)=>{t&&At(()=>{ce.console[n](`${qs}[${n}]:`,...r)})}}):Tn.forEach(n=>{e[n]=()=>{}}),e}const ie=Ft("logger",Hs),Nr=50,tt="?",Lr=/\(error: (.*)\)/,Ur=/captureMessage|captureException/;function Gs(...t){const e=t.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0,i=0)=>{const s=[],o=n.split(`
`);for(let a=r;a<o.length;a++){const u=o[a];if(u.length>1024)continue;const c=Lr.test(u)?u.replace(Lr,"$1"):u;if(!c.match(/\S*Error: /)){for(const d of e){const f=d(c);if(f){s.push(f);break}}if(s.length>=Nr+i)break}}return Vs(s.slice(i))}}function Vs(t){if(!t.length)return[];const e=Array.from(t);return/sentryWrapped/.test(Bt(e).function||"")&&e.pop(),e.reverse(),Ur.test(Bt(e).function||"")&&(e.pop(),Ur.test(Bt(e).function||"")&&e.pop()),e.slice(0,Nr).map(n=>({...n,filename:n.filename||Bt(e).filename,function:n.function||tt}))}function Bt(t){return t[t.length-1]||{}}const Cn="<anonymous>";function Ye(t){try{return!t||typeof t!="function"?Cn:t.name||Cn}catch{return Cn}}function Fr(t){const e=t.exception;if(e){const n=[];try{return e.values.forEach(r=>{r.stacktrace.frames&&n.push(...r.stacktrace.frames)}),n}catch{return}}}const zt={},Mr={};function nt(t,e){zt[t]=zt[t]||[],zt[t].push(e)}function rt(t,e){if(!Mr[t]){Mr[t]=!0;try{e()}catch(n){et&&ie.error(`Error while instrumenting ${t}`,n)}}}function Le(t,e){const n=t&&zt[t];if(n)for(const r of n)try{r(e)}catch(i){et&&ie.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${Ye(r)}
Error:`,i)}}let Rn=null;function Zs(t){const e="error";nt(e,t),rt(e,Ks)}function Ks(){Rn=ce.onerror,ce.onerror=function(t,e,n,r,i){return Le("error",{column:r,error:i,line:n,msg:t,url:e}),Rn?Rn.apply(this,arguments):!1},ce.onerror.__SENTRY_INSTRUMENTED__=!0}let On=null;function Ys(t){const e="unhandledrejection";nt(e,t),rt(e,Xs)}function Xs(){On=ce.onunhandledrejection,ce.onunhandledrejection=function(t){return Le("unhandledrejection",t),On?On.apply(this,arguments):!0},ce.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}function jt(){return Pn(ce),ce}function Pn(t){const e=t.__SENTRY__=t.__SENTRY__||{};return e.version=e.version||xe,e[xe]=e[xe]||{}}const Br=Object.prototype.toString;function Dn(t){switch(Br.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return it(t,Error)}}function dt(t,e){return Br.call(t)===`[object ${e}]`}function zr(t){return dt(t,"ErrorEvent")}function jr(t){return dt(t,"DOMError")}function Js(t){return dt(t,"DOMException")}function qe(t){return dt(t,"String")}function Nn(t){return typeof t=="object"&&t!==null&&"__sentry_template_string__"in t&&"__sentry_template_values__"in t}function Ln(t){return t===null||Nn(t)||typeof t!="object"&&typeof t!="function"}function ft(t){return dt(t,"Object")}function $t(t){return typeof Event<"u"&&it(t,Event)}function Qs(t){return typeof Element<"u"&&it(t,Element)}function eo(t){return dt(t,"RegExp")}function Wt(t){return!!(t&&t.then&&typeof t.then=="function")}function to(t){return ft(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t}function it(t,e){try{return t instanceof e}catch{return!1}}function $r(t){return!!(typeof t=="object"&&t!==null&&(t.__isVue||t._isVue))}const Un=ce,no=80;function Wr(t,e={}){if(!t)return"<unknown>";try{let n=t;const r=5,i=[];let s=0,o=0;const a=" > ",u=a.length;let c;const d=Array.isArray(e)?e:e.keyAttrs,f=!Array.isArray(e)&&e.maxStringLength||no;for(;n&&s++<r&&(c=ro(n,d),!(c==="html"||s>1&&o+i.length*u+c.length>=f));)i.push(c),o+=c.length,n=n.parentNode;return i.reverse().join(a)}catch{return"<unknown>"}}function ro(t,e){const n=t,r=[];if(!n||!n.tagName)return"";if(Un.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const i=e&&e.length?e.filter(o=>n.getAttribute(o)).map(o=>[o,n.getAttribute(o)]):null;if(i&&i.length)i.forEach(o=>{r.push(`[${o[0]}="${o[1]}"]`)});else{n.id&&r.push(`#${n.id}`);const o=n.className;if(o&&qe(o)){const a=o.split(/\s+/);for(const u of a)r.push(`.${u}`)}}const s=["aria-label","type","name","title","alt"];for(const o of s){const a=n.getAttribute(o);a&&r.push(`[${o}="${a}"]`)}return r.join("")}function io(){try{return Un.document.location.href}catch{return""}}function so(t){if(!Un.HTMLElement)return null;let e=t;const n=5;for(let r=0;r<n;r++){if(!e)return null;if(e instanceof HTMLElement){if(e.dataset.sentryComponent)return e.dataset.sentryComponent;if(e.dataset.sentryElement)return e.dataset.sentryElement}e=e.parentNode}return null}function ht(t,e=0){return typeof t!="string"||e===0||t.length<=e?t:`${t.slice(0,e)}...`}function qr(t,e){if(!Array.isArray(t))return"";const n=[];for(let r=0;r<t.length;r++){const i=t[r];try{$r(i)?n.push("[VueViewModel]"):n.push(String(i))}catch{n.push("[value cannot be serialized]")}}return n.join(e)}function oo(t,e,n=!1){return qe(t)?eo(e)?e.test(t):qe(e)?n?t===e:t.includes(e):!1:!1}function qt(t,e=[],n=!1){return e.some(r=>oo(t,r,n))}function Ie(t,e,n){if(!(e in t))return;const r=t[e],i=n(r);typeof i=="function"&&Hr(i,r);try{t[e]=i}catch{et&&ie.log(`Failed to replace method "${e}" in object`,t)}}function st(t,e,n){try{Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}catch{et&&ie.log(`Failed to add non-enumerable property "${e}" to object`,t)}}function Hr(t,e){try{const n=e.prototype||{};t.prototype=e.prototype=n,st(t,"__sentry_original__",e)}catch{}}function Fn(t){return t.__sentry_original__}function Gr(t){if(Dn(t))return{message:t.message,name:t.name,stack:t.stack,...Zr(t)};if($t(t)){const e={type:t.type,target:Vr(t.target),currentTarget:Vr(t.currentTarget),...Zr(t)};return typeof CustomEvent<"u"&&it(t,CustomEvent)&&(e.detail=t.detail),e}else return t}function Vr(t){try{return Qs(t)?Wr(t):Object.prototype.toString.call(t)}catch{return"<unknown>"}}function Zr(t){if(typeof t=="object"&&t!==null){const e={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}else return{}}function ao(t,e=40){const n=Object.keys(Gr(t));n.sort();const r=n[0];if(!r)return"[object has no keys]";if(r.length>=e)return ht(r,e);for(let i=n.length;i>0;i--){const s=n.slice(0,i).join(", ");if(!(s.length>e))return i===n.length?s:ht(s,e)}return""}function Oe(t){return Mn(t,new Map)}function Mn(t,e){if(uo(t)){const n=e.get(t);if(n!==void 0)return n;const r={};e.set(t,r);for(const i of Object.getOwnPropertyNames(t))typeof t[i]<"u"&&(r[i]=Mn(t[i],e));return r}if(Array.isArray(t)){const n=e.get(t);if(n!==void 0)return n;const r=[];return e.set(t,r),t.forEach(i=>{r.push(Mn(i,e))}),r}return t}function uo(t){if(!ft(t))return!1;try{const e=Object.getPrototypeOf(t).constructor.name;return!e||e==="Object"}catch{return!0}}const Kr=1e3;function xt(){return Date.now()/Kr}function co(){const{performance:t}=ce;if(!t||!t.now)return xt;const e=Date.now()-t.now(),n=t.timeOrigin==null?e:t.timeOrigin;return()=>(n+t.now())/Kr}const He=co();(()=>{const{performance:t}=ce;if(!t||!t.now)return;const e=3600*1e3,n=t.now(),r=Date.now(),i=t.timeOrigin?Math.abs(t.timeOrigin+n-r):e,s=i<e,o=t.timing&&t.timing.navigationStart,u=typeof o=="number"?Math.abs(o+n-r):e,c=u<e;return s||c?i<=u?t.timeOrigin:o:r})();function Pe(){const t=ce,e=t.crypto||t.msCrypto;let n=()=>Math.random()*16;try{if(e&&e.randomUUID)return e.randomUUID().replace(/-/g,"");e&&e.getRandomValues&&(n=()=>{const r=new Uint8Array(1);return e.getRandomValues(r),r[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,r=>(r^(n()&15)>>r/4).toString(16))}function Yr(t){return t.exception&&t.exception.values?t.exception.values[0]:void 0}function Xe(t){const{message:e,event_id:n}=t;if(e)return e;const r=Yr(t);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function Bn(t,e,n){const r=t.exception=t.exception||{},i=r.values=r.values||[],s=i[0]=i[0]||{};s.value||(s.value=e||""),s.type||(s.type="Error")}function pt(t,e){const n=Yr(t);if(!n)return;const r={type:"generic",handled:!0},i=n.mechanism;if(n.mechanism={...r,...i,...e},e&&"data"in e){const s={...i&&i.data,...e.data};n.mechanism.data=s}}function Xr(t){if(lo(t))return!0;try{st(t,"__sentry_captured__",!0)}catch{}return!1}function lo(t){try{return t.__sentry_captured__}catch{}}var Ge;(function(t){t[t.PENDING=0]="PENDING";const n=1;t[t.RESOLVED=n]="RESOLVED";const r=2;t[t.REJECTED=r]="REJECTED"})(Ge||(Ge={}));function ot(t){return new De(e=>{e(t)})}function Ht(t){return new De((e,n)=>{n(t)})}class De{constructor(e){De.prototype.__init.call(this),De.prototype.__init2.call(this),De.prototype.__init3.call(this),De.prototype.__init4.call(this),this._state=Ge.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(n){this._reject(n)}}then(e,n){return new De((r,i)=>{this._handlers.push([!1,s=>{if(!e)r(s);else try{r(e(s))}catch(o){i(o)}},s=>{if(!n)i(s);else try{r(n(s))}catch(o){i(o)}}]),this._executeHandlers()})}catch(e){return this.then(n=>n,e)}finally(e){return new De((n,r)=>{let i,s;return this.then(o=>{s=!1,i=o,e&&e()},o=>{s=!0,i=o,e&&e()}).then(()=>{if(s){r(i);return}n(i)})})}__init(){this._resolve=e=>{this._setResult(Ge.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(Ge.REJECTED,e)}}__init3(){this._setResult=(e,n)=>{if(this._state===Ge.PENDING){if(Wt(n)){n.then(this._resolve,this._reject);return}this._state=e,this._value=n,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===Ge.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach(n=>{n[0]||(this._state===Ge.RESOLVED&&n[1](this._value),this._state===Ge.REJECTED&&n[2](this._value),n[0]=!0)})}}}function fo(t){const e=He(),n={sid:Pe(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>po(n)};return t&&gt(n,t),n}function gt(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),!t.did&&!e.did&&(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||He(),e.abnormal_mechanism&&(t.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:Pe()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{const n=t.timestamp-t.started;t.duration=n>=0?n:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}function ho(t,e){let n={};t.status==="ok"&&(n={status:"exited"}),gt(t,n)}function po(t){return Oe({sid:`${t.sid}`,init:t.init,started:new Date(t.started*1e3).toISOString(),timestamp:new Date(t.timestamp*1e3).toISOString(),status:t.status,errors:t.errors,did:typeof t.did=="number"||typeof t.did=="string"?`${t.did}`:void 0,duration:t.duration,abnormal_mechanism:t.abnormal_mechanism,attrs:{release:t.release,environment:t.environment,ip_address:t.ipAddress,user_agent:t.userAgent}})}function Jr(){return Pe()}function zn(){return Pe().substring(16)}function Gt(t,e,n=2){if(!e||typeof e!="object"||n<=0)return e;if(t&&e&&Object.keys(e).length===0)return t;const r={...t};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=Gt(r[i],e[i],n-1));return r}const jn="_sentrySpan";function Qr(t,e){e?st(t,jn,e):delete t[jn]}function ei(t){return t[jn]}const go=100;class $n{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:Jr(),spanId:zn()}}clone(){const e=new $n;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,Qr(e,ei(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&gt(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,n){return this._tags={...this._tags,[e]:n},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,n){return this._extra={...this._extra,[e]:n},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,n){return n===null?delete this._contexts[e]:this._contexts[e]=n,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const n=typeof e=="function"?e(this):e,[r,i]=n instanceof Je?[n.getScopeData(),n.getRequestSession()]:ft(n)?[e,e.requestSession]:[],{tags:s,extra:o,user:a,contexts:u,level:c,fingerprint:d=[],propagationContext:f}=r||{};return this._tags={...this._tags,...s},this._extra={...this._extra,...o},this._contexts={...this._contexts,...u},a&&Object.keys(a).length&&(this._user=a),c&&(this._level=c),d.length&&(this._fingerprint=d),f&&(this._propagationContext=f),i&&(this._requestSession=i),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._session=void 0,Qr(this,void 0),this._attachments=[],this.setPropagationContext({traceId:Jr()}),this._notifyScopeListeners(),this}addBreadcrumb(e,n){const r=typeof n=="number"?n:go;if(r<=0)return this;const i={timestamp:xt(),...e},s=this._breadcrumbs;return s.push(i),this._breadcrumbs=s.length>r?s.slice(-r):s,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:ei(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=Gt(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext={spanId:zn(),...e},this}getPropagationContext(){return this._propagationContext}captureException(e,n){const r=n&&n.event_id?n.event_id:Pe();if(!this._client)return ie.warn("No client configured on scope - will not capture exception!"),r;const i=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:i,...n,event_id:r},this),r}captureMessage(e,n,r){const i=r&&r.event_id?r.event_id:Pe();if(!this._client)return ie.warn("No client configured on scope - will not capture message!"),i;const s=new Error(e);return this._client.captureMessage(e,n,{originalException:e,syntheticException:s,...r,event_id:i},this),i}captureEvent(e,n){const r=n&&n.event_id?n.event_id:Pe();return this._client?(this._client.captureEvent(e,{...n,event_id:r},this),r):(ie.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}const Je=$n;function mo(){return Ft("defaultCurrentScope",()=>new Je)}function vo(){return Ft("defaultIsolationScope",()=>new Je)}class _o{constructor(e,n){let r;e?r=e:r=new Je;let i;n?i=n:i=new Je,this._stack=[{scope:r}],this._isolationScope=i}withScope(e){const n=this._pushScope();let r;try{r=e(n)}catch(i){throw this._popScope(),i}return Wt(r)?r.then(i=>(this._popScope(),i),i=>{throw this._popScope(),i}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function mt(){const t=jt(),e=Pn(t);return e.stack=e.stack||new _o(mo(),vo())}function yo(t){return mt().withScope(t)}function bo(t,e){const n=mt();return n.withScope(()=>(n.getStackTop().scope=t,e(t)))}function ti(t){return mt().withScope(()=>t(mt().getIsolationScope()))}function wo(){return{withIsolationScope:ti,withScope:yo,withSetScope:bo,withSetIsolationScope:(t,e)=>ti(e),getCurrentScope:()=>mt().getScope(),getIsolationScope:()=>mt().getIsolationScope()}}function Wn(t){const e=Pn(t);return e.acs?e.acs:wo()}function at(){const t=jt();return Wn(t).getCurrentScope()}function It(){const t=jt();return Wn(t).getIsolationScope()}function Eo(){return Ft("globalScope",()=>new Je)}function So(...t){const e=jt(),n=Wn(e);if(t.length===2){const[r,i]=t;return r?n.withSetScope(r,i):n.withScope(i)}return n.withScope(t[0])}function Se(){return at().getClient()}function ko(t){const e=t.getPropagationContext(),{traceId:n,spanId:r,parentSpanId:i}=e;return Oe({trace_id:n,span_id:r,parent_span_id:i})}const Ao="_sentryMetrics";function xo(t){const e=t[Ao];if(!e)return;const n={};for(const[,[r,i]]of e)(n[r]||(n[r]=[])).push(Oe(i));return n}const Io="sentry.source",To="sentry.sample_rate",Co="sentry.op",Ro="sentry.origin",Oo=0,Po=1,Do="sentry-",No=/^sentry-/;function Lo(t){const e=Uo(t);if(!e)return;const n=Object.entries(e).reduce((r,[i,s])=>{if(i.match(No)){const o=i.slice(Do.length);r[o]=s}return r},{});if(Object.keys(n).length>0)return n}function Uo(t){if(!(!t||!qe(t)&&!Array.isArray(t)))return Array.isArray(t)?t.reduce((e,n)=>{const r=ni(n);return Object.entries(r).forEach(([i,s])=>{e[i]=s}),e},{}):ni(t)}function ni(t){return t.split(",").map(e=>e.split("=").map(n=>decodeURIComponent(n.trim()))).reduce((e,[n,r])=>(n&&r&&(e[n]=r),e),{})}const Fo=1;let ri=!1;function Mo(t){const{spanId:e,traceId:n,isRemote:r}=t.spanContext(),i=r?e:qn(t).parent_span_id,s=r?zn():e;return Oe({parent_span_id:i,span_id:s,trace_id:n})}function ii(t){return typeof t=="number"?si(t):Array.isArray(t)?t[0]+t[1]/1e9:t instanceof Date?si(t.getTime()):He()}function si(t){return t>9999999999?t/1e3:t}function qn(t){if(zo(t))return t.getSpanJSON();try{const{spanId:e,traceId:n}=t.spanContext();if(Bo(t)){const{attributes:r,startTime:i,name:s,endTime:o,parentSpanId:a,status:u}=t;return Oe({span_id:e,trace_id:n,data:r,description:s,parent_span_id:a,start_timestamp:ii(i),timestamp:ii(o)||void 0,status:$o(u),op:r[Co],origin:r[Ro],_metrics_summary:xo(t)})}return{span_id:e,trace_id:n}}catch{return{}}}function Bo(t){const e=t;return!!e.attributes&&!!e.startTime&&!!e.name&&!!e.endTime&&!!e.status}function zo(t){return typeof t.getSpanJSON=="function"}function jo(t){const{traceFlags:e}=t.spanContext();return e===Fo}function $o(t){if(!(!t||t.code===Oo))return t.code===Po?"ok":t.message||"unknown_error"}const Wo="_sentryRootSpan";function oi(t){return t[Wo]||t}function qo(){ri||(At(()=>{console.warn("[Sentry] Deprecation warning: Returning null from `beforeSendSpan` will be disallowed from SDK version 9.0.0 onwards. The callback will only support mutating spans. To drop certain spans, configure the respective integrations directly.")}),ri=!0)}function Ho(t){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const e=Se(),n=e&&e.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}const Hn="production",Go="_frozenDsc";function ai(t,e){const n=e.getOptions(),{publicKey:r}=e.getDsn()||{},i=Oe({environment:n.environment||Hn,release:n.release,public_key:r,trace_id:t});return e.emit("createDsc",i),i}function Vo(t,e){const n=e.getPropagationContext();return n.dsc||ai(n.traceId,t)}function Zo(t){const e=Se();if(!e)return{};const n=oi(t),r=n[Go];if(r)return r;const i=n.spanContext().traceState,s=i&&i.get("sentry.dsc"),o=s&&Lo(s);if(o)return o;const a=ai(t.spanContext().traceId,e),u=qn(n),c=u.data||{},d=c[To];d!=null&&(a.sample_rate=`${d}`);const f=c[Io],v=u.description;return f!=="url"&&v&&(a.transaction=v),Ho()&&(a.sampled=String(jo(n))),e.emit("createDsc",a,n),a}function Ko(t){if(typeof t=="boolean")return Number(t);const e=typeof t=="string"?parseFloat(t):t;if(typeof e!="number"||isNaN(e)||e<0||e>1){oe&&ie.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(t)} of type ${JSON.stringify(typeof t)}.`);return}return e}const Yo=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Xo(t){return t==="http"||t==="https"}function Vt(t,e=!1){const{host:n,path:r,pass:i,port:s,projectId:o,protocol:a,publicKey:u}=t;return`${a}://${u}${e&&i?`:${i}`:""}@${n}${s?`:${s}`:""}/${r&&`${r}/`}${o}`}function Jo(t){const e=Yo.exec(t);if(!e){At(()=>{console.error(`Invalid Sentry Dsn: ${t}`)});return}const[n,r,i="",s="",o="",a=""]=e.slice(1);let u="",c=a;const d=c.split("/");if(d.length>1&&(u=d.slice(0,-1).join("/"),c=d.pop()),c){const f=c.match(/^\d+/);f&&(c=f[0])}return ui({host:s,pass:i,path:u,projectId:c,port:o,protocol:n,publicKey:r})}function ui(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function Qo(t){if(!et)return!0;const{port:e,projectId:n,protocol:r}=t;return["protocol","publicKey","host","projectId"].find(o=>t[o]?!1:(ie.error(`Invalid Sentry Dsn: ${o} missing`),!0))?!1:n.match(/^\d+$/)?Xo(r)?e&&isNaN(parseInt(e,10))?(ie.error(`Invalid Sentry Dsn: Invalid port ${e}`),!1):!0:(ie.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(ie.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function ea(t){const e=typeof t=="string"?Jo(t):ui(t);if(!(!e||!Qo(e)))return e}function ta(){const t=typeof WeakSet=="function",e=t?new WeakSet:[];function n(i){if(t)return e.has(i)?!0:(e.add(i),!1);for(let s=0;s<e.length;s++)if(e[s]===i)return!0;return e.push(i),!1}function r(i){if(t)e.delete(i);else for(let s=0;s<e.length;s++)if(e[s]===i){e.splice(s,1);break}}return[n,r]}function Ve(t,e=100,n=1/0){try{return Gn("",t,e,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function ci(t,e=3,n=100*1024){const r=Ve(t,e);return sa(r)>n?ci(t,e-1,n):r}function Gn(t,e,n=1/0,r=1/0,i=ta()){const[s,o]=i;if(e==null||["boolean","string"].includes(typeof e)||typeof e=="number"&&Number.isFinite(e))return e;const a=na(t,e);if(!a.startsWith("[object "))return a;if(e.__sentry_skip_normalization__)return e;const u=typeof e.__sentry_override_normalization_depth__=="number"?e.__sentry_override_normalization_depth__:n;if(u===0)return a.replace("object ","");if(s(e))return"[Circular ~]";const c=e;if(c&&typeof c.toJSON=="function")try{const h=c.toJSON();return Gn("",h,u-1,r,i)}catch{}const d=Array.isArray(e)?[]:{};let f=0;const v=Gr(e);for(const h in v){if(!Object.prototype.hasOwnProperty.call(v,h))continue;if(f>=r){d[h]="[MaxProperties ~]";break}const y=v[h];d[h]=Gn(h,y,u-1,r,i),f++}return o(e),d}function na(t,e){try{if(t==="domain"&&e&&typeof e=="object"&&e._events)return"[Domain]";if(t==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&e===global)return"[Global]";if(typeof window<"u"&&e===window)return"[Window]";if(typeof document<"u"&&e===document)return"[Document]";if($r(e))return"[VueViewModel]";if(to(e))return"[SyntheticEvent]";if(typeof e=="number"&&!Number.isFinite(e))return`[${e}]`;if(typeof e=="function")return`[Function: ${Ye(e)}]`;if(typeof e=="symbol")return`[${String(e)}]`;if(typeof e=="bigint")return`[BigInt: ${String(e)}]`;const n=ra(e);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function ra(t){const e=Object.getPrototypeOf(t);return e?e.constructor.name:"null prototype"}function ia(t){return~-encodeURI(t).split(/%..|./).length}function sa(t){return ia(JSON.stringify(t))}function Tt(t,e=[]){return[t,e]}function oa(t,e){const[n,r]=t;return[n,[...r,e]]}function li(t,e){const n=t[1];for(const r of n){const i=r[0].type;if(e(r,i))return!0}return!1}function Vn(t){return ce.__SENTRY__&&ce.__SENTRY__.encodePolyfill?ce.__SENTRY__.encodePolyfill(t):new TextEncoder().encode(t)}function aa(t){const[e,n]=t;let r=JSON.stringify(e);function i(s){typeof r=="string"?r=typeof s=="string"?r+s:[Vn(r),s]:r.push(typeof s=="string"?Vn(s):s)}for(const s of n){const[o,a]=s;if(i(`
${JSON.stringify(o)}
`),typeof a=="string"||a instanceof Uint8Array)i(a);else{let u;try{u=JSON.stringify(a)}catch{u=JSON.stringify(Ve(a))}i(u)}}return typeof r=="string"?r:ua(r)}function ua(t){const e=t.reduce((i,s)=>i+s.length,0),n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}function ca(t){const e=typeof t.data=="string"?Vn(t.data):t.data;return[Oe({type:"attachment",length:e.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType}),e]}const la={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket",raw_security:"security"};function di(t){return la[t]}function fi(t){if(!t||!t.sdk)return;const{name:e,version:n}=t.sdk;return{name:e,version:n}}function da(t,e,n,r){const i=t.sdkProcessingMetadata&&t.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:t.event_id,sent_at:new Date().toISOString(),...e&&{sdk:e},...!!n&&r&&{dsn:Vt(r)},...i&&{trace:Oe({...i})}}}function fa(t,e){return e&&(t.sdk=t.sdk||{},t.sdk.name=t.sdk.name||e.name,t.sdk.version=t.sdk.version||e.version,t.sdk.integrations=[...t.sdk.integrations||[],...e.integrations||[]],t.sdk.packages=[...t.sdk.packages||[],...e.packages||[]]),t}function ha(t,e,n,r){const i=fi(n),s={sent_at:new Date().toISOString(),...i&&{sdk:i},...!!r&&e&&{dsn:Vt(e)}},o="aggregates"in t?[{type:"sessions"},t]:[{type:"session"},t.toJSON()];return Tt(s,[o])}function pa(t,e,n,r){const i=fi(n),s=t.type&&t.type!=="replay_event"?t.type:"event";fa(t,n&&n.sdk);const o=da(t,i,r,e);return delete t.sdkProcessingMetadata,Tt(o,[[{type:s},t]])}function Zn(t,e,n,r=0){return new De((i,s)=>{const o=t[r];if(e===null||typeof o!="function")i(e);else{const a=o({...e},n);oe&&o.id&&a===null&&ie.log(`Event processor "${o.id}" dropped event`),Wt(a)?a.then(u=>Zn(t,u,n,r+1).then(i)).then(null,s):Zn(t,a,n,r+1).then(i).then(null,s)}})}let Zt,hi,Kt;function ga(t){const e=ce._sentryDebugIds;if(!e)return{};const n=Object.keys(e);return Kt&&n.length===hi||(hi=n.length,Kt=n.reduce((r,i)=>{Zt||(Zt={});const s=Zt[i];if(s)r[s[0]]=s[1];else{const o=t(i);for(let a=o.length-1;a>=0;a--){const u=o[a],c=u&&u.filename,d=e[i];if(c&&d){r[c]=d,Zt[i]=[c,d];break}}}return r},{})),Kt}function ma(t,e){const{fingerprint:n,span:r,breadcrumbs:i,sdkProcessingMetadata:s}=e;va(t,e),r&&ba(t,r),wa(t,n),_a(t,i),ya(t,s)}function pi(t,e){const{extra:n,tags:r,user:i,contexts:s,level:o,sdkProcessingMetadata:a,breadcrumbs:u,fingerprint:c,eventProcessors:d,attachments:f,propagationContext:v,transactionName:h,span:y}=e;Yt(t,"extra",n),Yt(t,"tags",r),Yt(t,"user",i),Yt(t,"contexts",s),t.sdkProcessingMetadata=Gt(t.sdkProcessingMetadata,a,2),o&&(t.level=o),h&&(t.transactionName=h),y&&(t.span=y),u.length&&(t.breadcrumbs=[...t.breadcrumbs,...u]),c.length&&(t.fingerprint=[...t.fingerprint,...c]),d.length&&(t.eventProcessors=[...t.eventProcessors,...d]),f.length&&(t.attachments=[...t.attachments,...f]),t.propagationContext={...t.propagationContext,...v}}function Yt(t,e,n){t[e]=Gt(t[e],n,1)}function va(t,e){const{extra:n,tags:r,user:i,contexts:s,level:o,transactionName:a}=e,u=Oe(n);u&&Object.keys(u).length&&(t.extra={...u,...t.extra});const c=Oe(r);c&&Object.keys(c).length&&(t.tags={...c,...t.tags});const d=Oe(i);d&&Object.keys(d).length&&(t.user={...d,...t.user});const f=Oe(s);f&&Object.keys(f).length&&(t.contexts={...f,...t.contexts}),o&&(t.level=o),a&&t.type!=="transaction"&&(t.transaction=a)}function _a(t,e){const n=[...t.breadcrumbs||[],...e];t.breadcrumbs=n.length?n:void 0}function ya(t,e){t.sdkProcessingMetadata={...t.sdkProcessingMetadata,...e}}function ba(t,e){t.contexts={trace:Mo(e),...t.contexts},t.sdkProcessingMetadata={dynamicSamplingContext:Zo(e),...t.sdkProcessingMetadata};const n=oi(e),r=qn(n).description;r&&!t.transaction&&t.type==="transaction"&&(t.transaction=r)}function wa(t,e){t.fingerprint=t.fingerprint?Array.isArray(t.fingerprint)?t.fingerprint:[t.fingerprint]:[],e&&(t.fingerprint=t.fingerprint.concat(e)),t.fingerprint&&!t.fingerprint.length&&delete t.fingerprint}function Ea(t,e,n,r,i,s){const{normalizeDepth:o=3,normalizeMaxBreadth:a=1e3}=t,u={...e,event_id:e.event_id||n.event_id||Pe(),timestamp:e.timestamp||xt()},c=n.integrations||t.integrations.map(_=>_.name);Sa(u,t),xa(u,c),i&&i.emit("applyFrameMetadata",e),e.type===void 0&&ka(u,t.stackParser);const d=Ta(r,n.captureContext);n.mechanism&&pt(u,n.mechanism);const f=i?i.getEventProcessors():[],v=Eo().getScopeData();if(s){const _=s.getScopeData();pi(v,_)}if(d){const _=d.getScopeData();pi(v,_)}const h=[...n.attachments||[],...v.attachments];h.length&&(n.attachments=h),ma(u,v);const y=[...f,...v.eventProcessors];return Zn(y,u,n).then(_=>(_&&Aa(_),typeof o=="number"&&o>0?Ia(_,o,a):_))}function Sa(t,e){const{environment:n,release:r,dist:i,maxValueLength:s=250}=e;t.environment=t.environment||n||Hn,!t.release&&r&&(t.release=r),!t.dist&&i&&(t.dist=i),t.message&&(t.message=ht(t.message,s));const o=t.exception&&t.exception.values&&t.exception.values[0];o&&o.value&&(o.value=ht(o.value,s));const a=t.request;a&&a.url&&(a.url=ht(a.url,s))}function ka(t,e){const n=ga(e);try{t.exception.values.forEach(r=>{r.stacktrace.frames.forEach(i=>{n&&i.filename&&(i.debug_id=n[i.filename])})})}catch{}}function Aa(t){const e={};try{t.exception.values.forEach(r=>{r.stacktrace.frames.forEach(i=>{i.debug_id&&(i.abs_path?e[i.abs_path]=i.debug_id:i.filename&&(e[i.filename]=i.debug_id),delete i.debug_id)})})}catch{}if(Object.keys(e).length===0)return;t.debug_meta=t.debug_meta||{},t.debug_meta.images=t.debug_meta.images||[];const n=t.debug_meta.images;Object.entries(e).forEach(([r,i])=>{n.push({type:"sourcemap",code_file:r,debug_id:i})})}function xa(t,e){e.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=[...t.sdk.integrations||[],...e])}function Ia(t,e,n){if(!t)return null;const r={...t,...t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map(i=>({...i,...i.data&&{data:Ve(i.data,e,n)}}))},...t.user&&{user:Ve(t.user,e,n)},...t.contexts&&{contexts:Ve(t.contexts,e,n)},...t.extra&&{extra:Ve(t.extra,e,n)}};return t.contexts&&t.contexts.trace&&r.contexts&&(r.contexts.trace=t.contexts.trace,t.contexts.trace.data&&(r.contexts.trace.data=Ve(t.contexts.trace.data,e,n))),t.spans&&(r.spans=t.spans.map(i=>({...i,...i.data&&{data:Ve(i.data,e,n)}}))),t.contexts&&t.contexts.flags&&r.contexts&&(r.contexts.flags=Ve(t.contexts.flags,3,n)),r}function Ta(t,e){if(!e)return t;const n=t?t.clone():new Je;return n.update(e),n}function Nf(t){}function Ca(t,e){return at().captureException(t,void 0)}function gi(t,e){return at().captureEvent(t,e)}function mi(t){const e=Se(),n=It(),r=at(),{release:i,environment:s=Hn}=e&&e.getOptions()||{},{userAgent:o}=ce.navigator||{},a=fo({release:i,environment:s,user:r.getUser()||n.getUser(),...o&&{userAgent:o},...t}),u=n.getSession();return u&&u.status==="ok"&&gt(u,{status:"exited"}),vi(),n.setSession(a),r.setSession(a),a}function vi(){const t=It(),e=at(),n=e.getSession()||t.getSession();n&&ho(n),_i(),t.setSession(),e.setSession()}function _i(){const t=It(),e=at(),n=Se(),r=e.getSession()||t.getSession();r&&n&&n.captureSession(r)}function yi(t=!1){if(t){vi();return}_i()}const Ra="7";function Oa(t){const e=t.protocol?`${t.protocol}:`:"",n=t.port?`:${t.port}`:"";return`${e}//${t.host}${n}${t.path?`/${t.path}`:""}/api/`}function Pa(t){return`${Oa(t)}${t.projectId}/envelope/`}function Da(t,e){const n={sentry_version:Ra};return t.publicKey&&(n.sentry_key=t.publicKey),e&&(n.sentry_client=`${e.name}/${e.version}`),new URLSearchParams(n).toString()}function Na(t,e,n){return e||`${Pa(t)}?${Da(t,n)}`}const bi=[];function La(t,e){const n={};return e.forEach(r=>{r&&Ei(t,r,n)}),n}function wi(t,e){for(const n of e)n&&n.afterAllSetup&&n.afterAllSetup(t)}function Ei(t,e,n){if(n[e.name]){oe&&ie.log(`Integration skipped because it was already installed: ${e.name}`);return}if(n[e.name]=e,bi.indexOf(e.name)===-1&&typeof e.setupOnce=="function"&&(e.setupOnce(),bi.push(e.name)),e.setup&&typeof e.setup=="function"&&e.setup(t),typeof e.preprocessEvent=="function"){const r=e.preprocessEvent.bind(e);t.on("preprocessEvent",(i,s)=>r(i,s,t))}if(typeof e.processEvent=="function"){const r=e.processEvent.bind(e),i=Object.assign((s,o)=>r(s,o,t),{id:e.name});t.addEventProcessor(i)}oe&&ie.log(`Integration installed: ${e.name}`)}function Lf(t){return t}function Ua(t,e,n){const r=[{type:"client_report"},{timestamp:xt(),discarded_events:t}];return Tt(e?{dsn:e}:{},[r])}class ze extends Error{constructor(e,n="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=n}}const Si="Not capturing exception because it's already been captured.";class Fa{constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=ea(e.dsn):oe&&ie.warn("No DSN provided, client will not send events."),this._dsn){const i=Na(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:i})}const r=["enableTracing","tracesSampleRate","tracesSampler"].find(i=>i in e&&e[i]==null);r&&At(()=>{console.warn(`[Sentry] Deprecation warning: \`${r}\` is set to undefined, which leads to tracing being enabled. In v9, a value of \`undefined\` will result in tracing being disabled.`)})}captureException(e,n,r){const i=Pe();if(Xr(e))return oe&&ie.log(Si),i;const s={event_id:i,...n};return this._process(this.eventFromException(e,s).then(o=>this._captureEvent(o,s,r))),s.event_id}captureMessage(e,n,r,i){const s={event_id:Pe(),...r},o=Nn(e)?e:String(e),a=Ln(e)?this.eventFromMessage(o,n,s):this.eventFromException(e,s);return this._process(a.then(u=>this._captureEvent(u,s,i))),s.event_id}captureEvent(e,n,r){const i=Pe();if(n&&n.originalException&&Xr(n.originalException))return oe&&ie.log(Si),i;const s={event_id:i,...n},a=(e.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(e,s,a||r)),s.event_id}captureSession(e){typeof e.release!="string"?oe&&ie.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),gt(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const n=this._transport;return n?(this.emit("flush"),this._isClientDoneProcessing(e).then(r=>n.flush(e).then(i=>r&&i))):ot(!0)}close(e){return this.flush(e).then(n=>(this.getOptions().enabled=!1,this.emit("close"),n))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some(({name:e})=>e.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){const n=this._integrations[e.name];Ei(this,e,this._integrations),n||wi(this,[e])}sendEvent(e,n={}){this.emit("beforeSendEvent",e,n);let r=pa(e,this._dsn,this._options._metadata,this._options.tunnel);for(const s of n.attachments||[])r=oa(r,ca(s));const i=this.sendEnvelope(r);i&&i.then(s=>this.emit("afterSendEvent",e,s),null)}sendSession(e){const n=ha(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(n)}recordDroppedEvent(e,n,r){if(this._options.sendClientReports){const i=typeof r=="number"?r:1,s=`${e}:${n}`;oe&&ie.log(`Recording outcome: "${s}"${i>1?` (${i} times)`:""}`),this._outcomes[s]=(this._outcomes[s]||0)+i}}on(e,n){const r=this._hooks[e]=this._hooks[e]||[];return r.push(n),()=>{const i=r.indexOf(n);i>-1&&r.splice(i,1)}}emit(e,...n){const r=this._hooks[e];r&&r.forEach(i=>i(...n))}sendEnvelope(e){return this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport?this._transport.send(e).then(null,n=>(oe&&ie.error("Error while sending envelope:",n),n)):(oe&&ie.error("Transport disabled"),ot({}))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=La(this,e),wi(this,e)}_updateSessionFromEvent(e,n){let r=!1,i=!1;const s=n.exception&&n.exception.values;if(s){i=!0;for(const u of s){const c=u.mechanism;if(c&&c.handled===!1){r=!0;break}}}const o=e.status==="ok";(o&&e.errors===0||o&&r)&&(gt(e,{...r&&{status:"crashed"},errors:e.errors||Number(i||r)}),this.captureSession(e))}_isClientDoneProcessing(e){return new De(n=>{let r=0;const i=1,s=setInterval(()=>{this._numProcessing==0?(clearInterval(s),n(!0)):(r+=i,e&&r>=e&&(clearInterval(s),n(!1)))},i)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(e,n,r=at(),i=It()){const s=this.getOptions(),o=Object.keys(this._integrations);return!n.integrations&&o.length>0&&(n.integrations=o),this.emit("preprocessEvent",e,n),e.type||i.setLastEventId(e.event_id||n.event_id),Ea(s,e,n,r,this,i).then(a=>{if(a===null)return a;a.contexts={trace:ko(r),...a.contexts};const u=Vo(this,r);return a.sdkProcessingMetadata={dynamicSamplingContext:u,...a.sdkProcessingMetadata},a})}_captureEvent(e,n={},r){return this._processEvent(e,n,r).then(i=>i.event_id,i=>{if(oe){const s=i;s.logLevel==="log"?ie.log(s.message):ie.warn(s)}})}_processEvent(e,n,r){const i=this.getOptions(),{sampleRate:s}=i,o=Ai(e),a=ki(e),u=e.type||"error",c=`before send for type \`${u}\``,d=typeof s>"u"?void 0:Ko(s);if(a&&typeof d=="number"&&Math.random()>d)return this.recordDroppedEvent("sample_rate","error",e),Ht(new ze(`Discarding event because it's not included in the random sample (sampling rate = ${s})`,"log"));const f=u==="replay_event"?"replay":u,h=(e.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(e,n,r,h).then(y=>{if(y===null)throw this.recordDroppedEvent("event_processor",f,e),new ze("An event processor returned `null`, will not send event.","log");if(n.data&&n.data.__sentry__===!0)return y;const _=Ba(this,i,y,n);return Ma(_,c)}).then(y=>{if(y===null){if(this.recordDroppedEvent("before_send",f,e),o){const b=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",b)}throw new ze(`${c} returned \`null\`, will not send event.`,"log")}const m=r&&r.getSession();if(!o&&m&&this._updateSessionFromEvent(m,y),o){const g=y.sdkProcessingMetadata&&y.sdkProcessingMetadata.spanCountBeforeProcessing||0,b=y.spans?y.spans.length:0,E=g-b;E>0&&this.recordDroppedEvent("before_send","span",E)}const _=y.transaction_info;if(o&&_&&y.transaction!==e.transaction){const g="custom";y.transaction_info={..._,source:g}}return this.sendEvent(y,n),y}).then(null,y=>{throw y instanceof ze?y:(this.captureException(y,{data:{__sentry__:!0},originalException:y}),new ze(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${y}`))})}_process(e){this._numProcessing++,e.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.entries(e).map(([n,r])=>{const[i,s]=n.split(":");return{reason:i,category:s,quantity:r}})}_flushOutcomes(){oe&&ie.log("Flushing outcomes...");const e=this._clearOutcomes();if(e.length===0){oe&&ie.log("No outcomes to send");return}if(!this._dsn){oe&&ie.log("No dsn provided, will not send outcomes");return}oe&&ie.log("Sending outcomes:",e);const n=Ua(e,this._options.tunnel&&Vt(this._dsn));this.sendEnvelope(n)}}function Ma(t,e){const n=`${e} must return \`null\` or a valid event.`;if(Wt(t))return t.then(r=>{if(!ft(r)&&r!==null)throw new ze(n);return r},r=>{throw new ze(`${e} rejected with ${r}`)});if(!ft(t)&&t!==null)throw new ze(n);return t}function Ba(t,e,n,r){const{beforeSend:i,beforeSendTransaction:s,beforeSendSpan:o}=e;if(ki(n)&&i)return i(n,r);if(Ai(n)){if(n.spans&&o){const a=[];for(const u of n.spans){const c=o(u);c?a.push(c):(qo(),t.recordDroppedEvent("before_send","span"))}n.spans=a}if(s){if(n.spans){const a=n.spans.length;n.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:a}}return s(n,r)}}return n}function ki(t){return t.type===void 0}function Ai(t){return t.type==="transaction"}function za(t){const e=[];function n(){return t===void 0||e.length<t}function r(o){return e.splice(e.indexOf(o),1)[0]||Promise.resolve(void 0)}function i(o){if(!n())return Ht(new ze("Not adding Promise because buffer limit was reached."));const a=o();return e.indexOf(a)===-1&&e.push(a),a.then(()=>r(a)).then(null,()=>r(a).then(null,()=>{})),a}function s(o){return new De((a,u)=>{let c=e.length;if(!c)return a(!0);const d=setTimeout(()=>{o&&o>0&&a(!1)},o);e.forEach(f=>{ot(f).then(()=>{--c||(clearTimeout(d),a(!0))},u)})})}return{$:e,add:i,drain:s}}const ja=60*1e3;function $a(t,e=Date.now()){const n=parseInt(`${t}`,10);if(!isNaN(n))return n*1e3;const r=Date.parse(`${t}`);return isNaN(r)?ja:r-e}function Wa(t,e){return t[e]||t.all||0}function qa(t,e,n=Date.now()){return Wa(t,e)>n}function Ha(t,{statusCode:e,headers:n},r=Date.now()){const i={...t},s=n&&n["x-sentry-rate-limits"],o=n&&n["retry-after"];if(s)for(const a of s.trim().split(",")){const[u,c,,,d]=a.split(":",5),f=parseInt(u,10),v=(isNaN(f)?60:f)*1e3;if(!c)i.all=r+v;else for(const h of c.split(";"))h==="metric_bucket"?(!d||d.split(";").includes("custom"))&&(i[h]=r+v):i[h]=r+v}else o?i.all=r+$a(o,r):e===429&&(i.all=r+60*1e3);return i}const Ga=64;function Va(t,e,n=za(t.bufferSize||Ga)){let r={};const i=o=>n.drain(o);function s(o){const a=[];if(li(o,(f,v)=>{const h=di(v);if(qa(r,h)){const y=xi(f,v);t.recordDroppedEvent("ratelimit_backoff",h,y)}else a.push(f)}),a.length===0)return ot({});const u=Tt(o[0],a),c=f=>{li(u,(v,h)=>{const y=xi(v,h);t.recordDroppedEvent(f,di(h),y)})},d=()=>e({body:aa(u)}).then(f=>(f.statusCode!==void 0&&(f.statusCode<200||f.statusCode>=300)&&oe&&ie.warn(`Sentry responded with status code ${f.statusCode} to sent event.`),r=Ha(r,f),f),f=>{throw c("network_error"),f});return n.add(d).then(f=>f,f=>{if(f instanceof ze)return oe&&ie.error("Skipped sending event because buffer is full."),c("queue_overflow"),ot({});throw f})}return{send:s,flush:i}}function xi(t,e){if(!(e!=="event"&&e!=="transaction"))return Array.isArray(t)?t[1]:void 0}function Za(t,e,n=[e],r="npm"){const i=t._metadata||{};i.sdk||(i.sdk={name:`sentry.javascript.${e}`,packages:n.map(s=>({name:`${r}:@sentry/${s}`,version:xe})),version:xe}),t._metadata=i}const Ka=100;function ut(t,e){const n=Se(),r=It();if(!n)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:s=Ka}=n.getOptions();if(s<=0)return;const a={timestamp:xt(),...t},u=i?At(()=>i(a,e)):a;u!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",u,e),r.addBreadcrumb(u,s))}let Ii;const Ya="FunctionToString",Ti=new WeakMap,Xa=()=>({name:Ya,setupOnce(){Ii=Function.prototype.toString;try{Function.prototype.toString=function(...t){const e=Fn(this),n=Ti.has(Se())&&e!==void 0?e:this;return Ii.apply(n,t)}}catch{}},setup(t){Ti.set(t,!0)}}),Ja=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,"undefined is not an object (evaluating 'a.L')",`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/],Qa="InboundFilters",eu=(t={})=>({name:Qa,processEvent(e,n,r){const i=r.getOptions(),s=tu(t,i);return nu(e,s)?null:e}});function tu(t={},e={}){return{allowUrls:[...t.allowUrls||[],...e.allowUrls||[]],denyUrls:[...t.denyUrls||[],...e.denyUrls||[]],ignoreErrors:[...t.ignoreErrors||[],...e.ignoreErrors||[],...t.disableErrorDefaults?[]:Ja],ignoreTransactions:[...t.ignoreTransactions||[],...e.ignoreTransactions||[]],ignoreInternal:t.ignoreInternal!==void 0?t.ignoreInternal:!0}}function nu(t,e){return e.ignoreInternal&&uu(t)?(oe&&ie.warn(`Event dropped due to being internal Sentry Error.
Event: ${Xe(t)}`),!0):ru(t,e.ignoreErrors)?(oe&&ie.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Xe(t)}`),!0):lu(t)?(oe&&ie.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${Xe(t)}`),!0):iu(t,e.ignoreTransactions)?(oe&&ie.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${Xe(t)}`),!0):su(t,e.denyUrls)?(oe&&ie.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${Xe(t)}.
Url: ${Xt(t)}`),!0):ou(t,e.allowUrls)?!1:(oe&&ie.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Xe(t)}.
Url: ${Xt(t)}`),!0)}function ru(t,e){return t.type||!e||!e.length?!1:au(t).some(n=>qt(n,e))}function iu(t,e){if(t.type!=="transaction"||!e||!e.length)return!1;const n=t.transaction;return n?qt(n,e):!1}function su(t,e){if(!e||!e.length)return!1;const n=Xt(t);return n?qt(n,e):!1}function ou(t,e){if(!e||!e.length)return!0;const n=Xt(t);return n?qt(n,e):!0}function au(t){const e=[];t.message&&e.push(t.message);let n;try{n=t.exception.values[t.exception.values.length-1]}catch{}return n&&n.value&&(e.push(n.value),n.type&&e.push(`${n.type}: ${n.value}`)),e}function uu(t){try{return t.exception.values[0].type==="SentryError"}catch{}return!1}function cu(t=[]){for(let e=t.length-1;e>=0;e--){const n=t[e];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function Xt(t){try{let e;try{e=t.exception.values[0].stacktrace.frames}catch{}return e?cu(e):null}catch{return oe&&ie.error(`Cannot extract url for event ${Xe(t)}`),null}}function lu(t){return t.type||!t.exception||!t.exception.values||t.exception.values.length===0?!1:!t.message&&!t.exception.values.some(e=>e.stacktrace||e.type&&e.type!=="Error"||e.value)}function du(t,e,n=250,r,i,s,o){if(!s.exception||!s.exception.values||!o||!it(o.originalException,Error))return;const a=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;a&&(s.exception.values=fu(Kn(t,e,i,o.originalException,r,s.exception.values,a,0),n))}function Kn(t,e,n,r,i,s,o,a){if(s.length>=n+1)return s;let u=[...s];if(it(r[i],Error)){Ci(o,a);const c=t(e,r[i]),d=u.length;Ri(c,i,d,a),u=Kn(t,e,n,r[i],i,[c,...u],c,d)}return Array.isArray(r.errors)&&r.errors.forEach((c,d)=>{if(it(c,Error)){Ci(o,a);const f=t(e,c),v=u.length;Ri(f,`errors[${d}]`,v,a),u=Kn(t,e,n,c,i,[f,...u],f,v)}}),u}function Ci(t,e){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,...t.type==="AggregateError"&&{is_exception_group:!0},exception_id:e}}function Ri(t,e,n,r){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,type:"chained",source:e,exception_id:n,parent_id:r}}function fu(t,e){return t.map(n=>(n.value&&(n.value=ht(n.value,e)),n))}function Yn(t){if(!t)return{};const e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const n=e[6]||"",r=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],search:n,hash:r,relative:e[5]+n+r}}function hu(t){const e="console";nt(e,t),rt(e,pu)}function pu(){"console"in ce&&Tn.forEach(function(t){t in ce.console&&Ie(ce.console,t,function(e){return Mt[t]=e,function(...n){Le("console",{args:n,level:t});const i=Mt[t];i&&i.apply(ce.console,n)}})})}function gu(t){return t==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(t)?t:"log"}const mu="Dedupe",vu=()=>{let t;return{name:mu,processEvent(e){if(e.type)return e;try{if(_u(e,t))return oe&&ie.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return t=e}}};function _u(t,e){return e?!!(yu(t,e)||bu(t,e)):!1}function yu(t,e){const n=t.message,r=e.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!Pi(t,e)||!Oi(t,e))}function bu(t,e){const n=Di(e),r=Di(t);return!(!n||!r||n.type!==r.type||n.value!==r.value||!Pi(t,e)||!Oi(t,e))}function Oi(t,e){let n=Fr(t),r=Fr(e);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let i=0;i<r.length;i++){const s=r[i],o=n[i];if(s.filename!==o.filename||s.lineno!==o.lineno||s.colno!==o.colno||s.function!==o.function)return!1}return!0}function Pi(t,e){let n=t.fingerprint,r=e.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function Di(t){return t.exception&&t.exception.values&&t.exception.values[0]}function Ni(t){if(t!==void 0)return t>=400&&t<500?"warning":t>=500?"error":void 0}const Xn=ce;function wu(){if(!("fetch"in Xn))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function Jn(t){return t&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function Eu(){if(typeof EdgeRuntime=="string")return!0;if(!wu())return!1;if(Jn(Xn.fetch))return!0;let t=!1;const e=Xn.document;if(e&&typeof e.createElement=="function")try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(t=Jn(n.contentWindow.fetch)),e.head.removeChild(n)}catch(n){et&&ie.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return t}function Su(t,e){const n="fetch";nt(n,t),rt(n,()=>ku(void 0,e))}function ku(t,e=!1){e&&!Eu()||Ie(ce,"fetch",function(n){return function(...r){const i=new Error,{method:s,url:o}=Au(r),a={args:r,fetchData:{method:s,url:o},startTimestamp:He()*1e3,virtualError:i};return Le("fetch",{...a}),n.apply(ce,r).then(async u=>(Le("fetch",{...a,endTimestamp:He()*1e3,response:u}),u),u=>{throw Le("fetch",{...a,endTimestamp:He()*1e3,error:u}),Dn(u)&&u.stack===void 0&&(u.stack=i.stack,st(u,"framesToPop",1)),u})}})}function Qn(t,e){return!!t&&typeof t=="object"&&!!t[e]}function Li(t){return typeof t=="string"?t:t?Qn(t,"url")?t.url:t.toString?t.toString():"":""}function Au(t){if(t.length===0)return{method:"GET",url:""};if(t.length===2){const[n,r]=t;return{url:Li(n),method:Qn(r,"method")?String(r.method).toUpperCase():"GET"}}const e=t[0];return{url:Li(e),method:Qn(e,"method")?String(e.method).toUpperCase():"GET"}}function xu(){return"npm"}const Jt=ce;function Iu(){const t=Jt.chrome,e=t&&t.app&&t.app.runtime,n="history"in Jt&&!!Jt.history.pushState&&!!Jt.history.replaceState;return!e&&n}const be=ce;let er=0;function Ui(){return er>0}function Tu(){er++,setTimeout(()=>{er--})}function vt(t,e={}){function n(i){return typeof i=="function"}if(!n(t))return t;try{const i=t.__sentry_wrapped__;if(i)return typeof i=="function"?i:t;if(Fn(t))return t}catch{return t}const r=function(...i){try{const s=i.map(o=>vt(o,e));return t.apply(this,s)}catch(s){throw Tu(),So(o=>{o.addEventProcessor(a=>(e.mechanism&&(Bn(a,void 0),pt(a,e.mechanism)),a.extra={...a.extra,arguments:i},a)),Ca(s)}),s}};try{for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}catch{}Hr(r,t),st(t,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return t.name}})}catch{}return r}const Qt=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function tr(t,e){const n=rr(t,e),r={type:Du(e),value:Nu(e)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function Cu(t,e,n,r){const i=Se(),s=i&&i.getOptions().normalizeDepth,o=Bu(e),a={__serialized__:ci(e,s)};if(o)return{exception:{values:[tr(t,o)]},extra:a};const u={exception:{values:[{type:$t(e)?e.constructor.name:r?"UnhandledRejection":"Error",value:Fu(e,{isUnhandledRejection:r})}]},extra:a};if(n){const c=rr(t,n);c.length&&(u.exception.values[0].stacktrace={frames:c})}return u}function nr(t,e){return{exception:{values:[tr(t,e)]}}}function rr(t,e){const n=e.stacktrace||e.stack||"",r=Ou(e),i=Pu(e);try{return t(n,r,i)}catch{}return[]}const Ru=/Minified React error #\d+;/i;function Ou(t){return t&&Ru.test(t.message)?1:0}function Pu(t){return typeof t.framesToPop=="number"?t.framesToPop:0}function Fi(t){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?t instanceof WebAssembly.Exception:!1}function Du(t){const e=t&&t.name;return!e&&Fi(t)?t.message&&Array.isArray(t.message)&&t.message.length==2?t.message[0]:"WebAssembly.Exception":e}function Nu(t){const e=t&&t.message;return e?e.error&&typeof e.error.message=="string"?e.error.message:Fi(t)&&Array.isArray(t.message)&&t.message.length==2?t.message[1]:e:"No error message"}function Lu(t,e,n,r){const i=n&&n.syntheticException||void 0,s=ir(t,e,i,r);return pt(s),s.level="error",n&&n.event_id&&(s.event_id=n.event_id),ot(s)}function Uu(t,e,n="info",r,i){const s=r&&r.syntheticException||void 0,o=sr(t,e,s,i);return o.level=n,r&&r.event_id&&(o.event_id=r.event_id),ot(o)}function ir(t,e,n,r,i){let s;if(zr(e)&&e.error)return nr(t,e.error);if(jr(e)||Js(e)){const o=e;if("stack"in e)s=nr(t,e);else{const a=o.name||(jr(o)?"DOMError":"DOMException"),u=o.message?`${a}: ${o.message}`:a;s=sr(t,u,n,r),Bn(s,u)}return"code"in o&&(s.tags={...s.tags,"DOMException.code":`${o.code}`}),s}return Dn(e)?nr(t,e):ft(e)||$t(e)?(s=Cu(t,e,n,i),pt(s,{synthetic:!0}),s):(s=sr(t,e,n,r),Bn(s,`${e}`),pt(s,{synthetic:!0}),s)}function sr(t,e,n,r){const i={};if(r&&n){const s=rr(t,n);s.length&&(i.exception={values:[{value:e,stacktrace:{frames:s}}]}),pt(i,{synthetic:!0})}if(Nn(e)){const{__sentry_template_string__:s,__sentry_template_values__:o}=e;return i.logentry={message:s,params:o},i}return i.message=e,i}function Fu(t,{isUnhandledRejection:e}){const n=ao(t),r=e?"promise rejection":"exception";return zr(t)?`Event \`ErrorEvent\` captured as ${r} with message \`${t.message}\``:$t(t)?`Event \`${Mu(t)}\` (type=${t.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}function Mu(t){try{const e=Object.getPrototypeOf(t);return e?e.constructor.name:void 0}catch{}}function Bu(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const n=t[e];if(n instanceof Error)return n}}function zu(t,{metadata:e,tunnel:n,dsn:r}){const i={event_id:t.event_id,sent_at:new Date().toISOString(),...e&&e.sdk&&{sdk:{name:e.sdk.name,version:e.sdk.version}},...!!n&&!!r&&{dsn:Vt(r)}},s=ju(t);return Tt(i,[s])}function ju(t){return[{type:"user_report"},t]}class $u extends Fa{constructor(e){const n={parentSpanIsAlwaysRootSpan:!0,...e},r=be.SENTRY_SDK_SOURCE||xu();Za(n,"browser",["browser"],r),super(n),n.sendClientReports&&be.document&&be.document.addEventListener("visibilitychange",()=>{be.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(e,n){return Lu(this._options.stackParser,e,n,this._options.attachStacktrace)}eventFromMessage(e,n="info",r){return Uu(this._options.stackParser,e,n,r,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled()){Qt&&ie.warn("SDK not enabled, will not capture user feedback.");return}const n=zu(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this.sendEnvelope(n)}_prepareEvent(e,n,r){return e.platform=e.platform||"javascript",super._prepareEvent(e,n,r)}}const Wu=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,ke=ce,qu=1e3;let Mi,or,ar;function Hu(t){const e="dom";nt(e,t),rt(e,Gu)}function Gu(){if(!ke.document)return;const t=Le.bind(null,"dom"),e=Bi(t,!0);ke.document.addEventListener("click",e,!1),ke.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach(n=>{const i=ke[n],s=i&&i.prototype;!s||!s.hasOwnProperty||!s.hasOwnProperty("addEventListener")||(Ie(s,"addEventListener",function(o){return function(a,u,c){if(a==="click"||a=="keypress")try{const d=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},f=d[a]=d[a]||{refCount:0};if(!f.handler){const v=Bi(t);f.handler=v,o.call(this,a,v,c)}f.refCount++}catch{}return o.call(this,a,u,c)}}),Ie(s,"removeEventListener",function(o){return function(a,u,c){if(a==="click"||a=="keypress")try{const d=this.__sentry_instrumentation_handlers__||{},f=d[a];f&&(f.refCount--,f.refCount<=0&&(o.call(this,a,f.handler,c),f.handler=void 0,delete d[a]),Object.keys(d).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return o.call(this,a,u,c)}}))})}function Vu(t){if(t.type!==or)return!1;try{if(!t.target||t.target._sentryId!==ar)return!1}catch{}return!0}function Zu(t,e){return t!=="keypress"?!1:!e||!e.tagName?!0:!(e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable)}function Bi(t,e=!1){return n=>{if(!n||n._sentryCaptured)return;const r=Ku(n);if(Zu(n.type,r))return;st(n,"_sentryCaptured",!0),r&&!r._sentryId&&st(r,"_sentryId",Pe());const i=n.type==="keypress"?"input":n.type;Vu(n)||(t({event:n,name:i,global:e}),or=n.type,ar=r?r._sentryId:void 0),clearTimeout(Mi),Mi=ke.setTimeout(()=>{ar=void 0,or=void 0},qu)}}function Ku(t){try{return t.target}catch{return null}}let en;function zi(t){const e="history";nt(e,t),rt(e,Yu)}function Yu(){if(!Iu())return;const t=ke.onpopstate;ke.onpopstate=function(...n){const r=ke.location.href,i=en;if(en=r,Le("history",{from:i,to:r}),t)try{return t.apply(this,n)}catch{}};function e(n){return function(...r){const i=r.length>2?r[2]:void 0;if(i){const s=en,o=String(i);en=o,Le("history",{from:s,to:o})}return n.apply(this,r)}}Ie(ke.history,"pushState",e),Ie(ke.history,"replaceState",e)}const tn={};function Xu(t){const e=tn[t];if(e)return e;let n=ke[t];if(Jn(n))return tn[t]=n.bind(ke);const r=ke.document;if(r&&typeof r.createElement=="function")try{const i=r.createElement("iframe");i.hidden=!0,r.head.appendChild(i);const s=i.contentWindow;s&&s[t]&&(n=s[t]),r.head.removeChild(i)}catch(i){Wu&&ie.warn(`Could not create sandbox iframe for ${t} check, bailing to window.${t}: `,i)}return n&&(tn[t]=n.bind(ke))}function ji(t){tn[t]=void 0}const Ct="__sentry_xhr_v3__";function Ju(t){const e="xhr";nt(e,t),rt(e,Qu)}function Qu(){if(!ke.XMLHttpRequest)return;const t=XMLHttpRequest.prototype;t.open=new Proxy(t.open,{apply(e,n,r){const i=new Error,s=He()*1e3,o=qe(r[0])?r[0].toUpperCase():void 0,a=ec(r[1]);if(!o||!a)return e.apply(n,r);n[Ct]={method:o,url:a,request_headers:{}},o==="POST"&&a.match(/sentry_key/)&&(n.__sentry_own_request__=!0);const u=()=>{const c=n[Ct];if(c&&n.readyState===4){try{c.status_code=n.status}catch{}const d={endTimestamp:He()*1e3,startTimestamp:s,xhr:n,virtualError:i};Le("xhr",d)}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?n.onreadystatechange=new Proxy(n.onreadystatechange,{apply(c,d,f){return u(),c.apply(d,f)}}):n.addEventListener("readystatechange",u),n.setRequestHeader=new Proxy(n.setRequestHeader,{apply(c,d,f){const[v,h]=f,y=d[Ct];return y&&qe(v)&&qe(h)&&(y.request_headers[v.toLowerCase()]=h),c.apply(d,f)}}),e.apply(n,r)}}),t.send=new Proxy(t.send,{apply(e,n,r){const i=n[Ct];if(!i)return e.apply(n,r);r[0]!==void 0&&(i.body=r[0]);const s={startTimestamp:He()*1e3,xhr:n};return Le("xhr",s),e.apply(n,r)}})}function ec(t){if(qe(t))return t;try{return t.toString()}catch{}}function tc(t,e=Xu("fetch")){let n=0,r=0;function i(s){const o=s.body.length;n+=o,r++;const a={body:s.body,method:"POST",referrerPolicy:"origin",headers:t.headers,keepalive:n<=6e4&&r<15,...t.fetchOptions};if(!e)return ji("fetch"),Ht("No fetch implementation available");try{return e(t.url,a).then(u=>(n-=o,r--,{statusCode:u.status,headers:{"x-sentry-rate-limits":u.headers.get("X-Sentry-Rate-Limits"),"retry-after":u.headers.get("Retry-After")}}))}catch(u){return ji("fetch"),n-=o,r--,Ht(u)}}return Va(t,i)}const nc=30,rc=50;function ur(t,e,n,r){const i={filename:t,function:e==="<anonymous>"?tt:e,in_app:!0};return n!==void 0&&(i.lineno=n),r!==void 0&&(i.colno=r),i}const ic=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,sc=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,oc=/\((\S*)(?::(\d+))(?::(\d+))\)/,ac=[nc,t=>{const e=ic.exec(t);if(e){const[,r,i,s]=e;return ur(r,tt,+i,+s)}const n=sc.exec(t);if(n){if(n[2]&&n[2].indexOf("eval")===0){const o=oc.exec(n[2]);o&&(n[2]=o[1],n[3]=o[2],n[4]=o[3])}const[i,s]=$i(n[1]||tt,n[2]);return ur(s,i,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}}],uc=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,cc=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,lc=Gs(...[ac,[rc,t=>{const e=uc.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){const s=cc.exec(e[3]);s&&(e[1]=e[1]||"eval",e[3]=s[1],e[4]=s[2],e[5]="")}let r=e[3],i=e[1]||tt;return[i,r]=$i(i,r),ur(r,i,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}}]]),$i=(t,e)=>{const n=t.indexOf("safari-extension")!==-1,r=t.indexOf("safari-web-extension")!==-1;return n||r?[t.indexOf("@")!==-1?t.split("@")[0]:tt,n?`safari-extension:${e}`:`safari-web-extension:${e}`]:[t,e]},nn=1024,dc="Breadcrumbs",fc=(t={})=>{const e={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...t};return{name:dc,setup(n){e.console&&hu(gc(n)),e.dom&&Hu(pc(n,e.dom)),e.xhr&&Ju(mc(n)),e.fetch&&Su(vc(n)),e.history&&zi(_c(n)),e.sentry&&n.on("beforeSendEvent",hc(n))}}};function hc(t){return function(n){Se()===t&&ut({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:Xe(n)},{event:n})}}function pc(t,e){return function(r){if(Se()!==t)return;let i,s,o=typeof e=="object"?e.serializeAttribute:void 0,a=typeof e=="object"&&typeof e.maxStringLength=="number"?e.maxStringLength:void 0;a&&a>nn&&(Qt&&ie.warn(`\`dom.maxStringLength\` cannot exceed ${nn}, but a value of ${a} was configured. Sentry will use ${nn} instead.`),a=nn),typeof o=="string"&&(o=[o]);try{const c=r.event,d=yc(c)?c.target:c;i=Wr(d,{keyAttrs:o,maxStringLength:a}),s=so(d)}catch{i="<unknown>"}if(i.length===0)return;const u={category:`ui.${r.name}`,message:i};s&&(u.data={"ui.component_name":s}),ut(u,{event:r.event,name:r.name,global:r.global})}}function gc(t){return function(n){if(Se()!==t)return;const r={category:"console",data:{arguments:n.args,logger:"console"},level:gu(n.level),message:qr(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)r.message=`Assertion failed: ${qr(n.args.slice(1)," ")||"console.assert"}`,r.data.arguments=n.args.slice(1);else return;ut(r,{input:n.args,level:n.level})}}function mc(t){return function(n){if(Se()!==t)return;const{startTimestamp:r,endTimestamp:i}=n,s=n.xhr[Ct];if(!r||!i||!s)return;const{method:o,url:a,status_code:u,body:c}=s,d={method:o,url:a,status_code:u},f={xhr:n.xhr,input:c,startTimestamp:r,endTimestamp:i},v=Ni(u);ut({category:"xhr",data:d,type:"http",level:v},f)}}function vc(t){return function(n){if(Se()!==t)return;const{startTimestamp:r,endTimestamp:i}=n;if(i&&!(n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST"))if(n.error){const s=n.fetchData,o={data:n.error,input:n.args,startTimestamp:r,endTimestamp:i};ut({category:"fetch",data:s,level:"error",type:"http"},o)}else{const s=n.response,o={...n.fetchData,status_code:s&&s.status},a={input:n.args,response:s,startTimestamp:r,endTimestamp:i},u=Ni(o.status_code);ut({category:"fetch",data:o,type:"http",level:u},a)}}}function _c(t){return function(n){if(Se()!==t)return;let r=n.from,i=n.to;const s=Yn(be.location.href);let o=r?Yn(r):void 0;const a=Yn(i);(!o||!o.path)&&(o=s),s.protocol===a.protocol&&s.host===a.host&&(i=a.relative),s.protocol===o.protocol&&s.host===o.host&&(r=o.relative),ut({category:"navigation",data:{from:r,to:i}})}}function yc(t){return!!t&&!!t.target}const bc=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],wc="BrowserApiErrors",Ec=(t={})=>{const e={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...t};return{name:wc,setupOnce(){e.setTimeout&&Ie(be,"setTimeout",Wi),e.setInterval&&Ie(be,"setInterval",Wi),e.requestAnimationFrame&&Ie(be,"requestAnimationFrame",Sc),e.XMLHttpRequest&&"XMLHttpRequest"in be&&Ie(XMLHttpRequest.prototype,"send",kc);const n=e.eventTarget;n&&(Array.isArray(n)?n:bc).forEach(Ac)}}};function Wi(t){return function(...e){const n=e[0];return e[0]=vt(n,{mechanism:{data:{function:Ye(t)},handled:!1,type:"instrument"}}),t.apply(this,e)}}function Sc(t){return function(e){return t.apply(this,[vt(e,{mechanism:{data:{function:"requestAnimationFrame",handler:Ye(t)},handled:!1,type:"instrument"}})])}}function kc(t){return function(...e){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(i=>{i in n&&typeof n[i]=="function"&&Ie(n,i,function(s){const o={mechanism:{data:{function:i,handler:Ye(s)},handled:!1,type:"instrument"}},a=Fn(s);return a&&(o.mechanism.data.handler=Ye(a)),vt(s,o)})}),t.apply(this,e)}}function Ac(t){const n=be[t],r=n&&n.prototype;!r||!r.hasOwnProperty||!r.hasOwnProperty("addEventListener")||(Ie(r,"addEventListener",function(i){return function(s,o,a){try{xc(o)&&(o.handleEvent=vt(o.handleEvent,{mechanism:{data:{function:"handleEvent",handler:Ye(o),target:t},handled:!1,type:"instrument"}}))}catch{}return i.apply(this,[s,vt(o,{mechanism:{data:{function:"addEventListener",handler:Ye(o),target:t},handled:!1,type:"instrument"}}),a])}}),Ie(r,"removeEventListener",function(i){return function(s,o,a){try{const u=o.__sentry_wrapped__;u&&i.call(this,s,u,a)}catch{}return i.call(this,s,o,a)}}))}function xc(t){return typeof t.handleEvent=="function"}const Ic=()=>({name:"BrowserSession",setupOnce(){if(typeof be.document>"u"){Qt&&ie.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}mi({ignoreDuration:!0}),yi(),zi(({from:t,to:e})=>{t!==void 0&&t!==e&&(mi({ignoreDuration:!0}),yi())})}}),Tc="GlobalHandlers",Cc=(t={})=>{const e={onerror:!0,onunhandledrejection:!0,...t};return{name:Tc,setupOnce(){Error.stackTraceLimit=50},setup(n){e.onerror&&(Rc(n),qi("onerror")),e.onunhandledrejection&&(Oc(n),qi("onunhandledrejection"))}}};function Rc(t){Zs(e=>{const{stackParser:n,attachStacktrace:r}=Hi();if(Se()!==t||Ui())return;const{msg:i,url:s,line:o,column:a,error:u}=e,c=Nc(ir(n,u||i,void 0,r,!1),s,o,a);c.level="error",gi(c,{originalException:u,mechanism:{handled:!1,type:"onerror"}})})}function Oc(t){Ys(e=>{const{stackParser:n,attachStacktrace:r}=Hi();if(Se()!==t||Ui())return;const i=Pc(e),s=Ln(i)?Dc(i):ir(n,i,void 0,r,!0);s.level="error",gi(s,{originalException:i,mechanism:{handled:!1,type:"onunhandledrejection"}})})}function Pc(t){if(Ln(t))return t;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch{}return t}function Dc(t){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(t)}`}]}}}function Nc(t,e,n,r){const i=t.exception=t.exception||{},s=i.values=i.values||[],o=s[0]=s[0]||{},a=o.stacktrace=o.stacktrace||{},u=a.frames=a.frames||[],c=r,d=n,f=qe(e)&&e.length>0?e:io();return u.length===0&&u.push({colno:c,filename:f,function:tt,in_app:!0,lineno:d}),t}function qi(t){Qt&&ie.log(`Global Handler attached: ${t}`)}function Hi(){const t=Se();return t&&t.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const Lc=()=>({name:"HttpContext",preprocessEvent(t){if(!be.navigator&&!be.location&&!be.document)return;const e=t.request&&t.request.url||be.location&&be.location.href,{referrer:n}=be.document||{},{userAgent:r}=be.navigator||{},i={...t.request&&t.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},s={...t.request,...e&&{url:e},headers:i};t.request=s}}),Uc="cause",Fc=5,Mc="LinkedErrors",Bc=(t={})=>{const e=t.limit||Fc,n=t.key||Uc;return{name:Mc,preprocessEvent(r,i,s){const o=s.getOptions();du(tr,o.stackParser,o.maxValueLength,n,e,r,i)}}};function zc(t){const e=[eu(),Xa(),Ec(),fc(),Cc(),Bc(),vu(),Lc()];return t.autoSessionTracking!==!1&&e.push(Ic()),e}var jc=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};jc.SENTRY_RELEASE={id:"b0253e166d678c911a1501686c5d8df48e8263fd"};function Gi(){const t=zc({}).filter(r=>!["BrowserApiErrors","Breadcrumbs","GlobalHandlers"].includes(r.name));let e=new $u({dsn:"https://c8ca62d354c7cc59706b05ad112030aa@o4508493399916544.ingest.de.sentry.io/4508493406732368",transport:tc,stackParser:lc,integrations:t,beforeSend:(r,i)=>(i.data&&(console.log("hint.data",i.data),r.tags={...r.tags,...i.data},r.extra={...r.extra,hintData:i.data}),r)});const n=new Je;return n.setClient(e),e.init(),n}async function $c(t,e,n,r){try{await n()}catch(i){console.error(i),e=e||await Wc();const s=qc();t.captureException(i,{data:{urlx:e,versionx:s}}),r&&await r()}}async function Wc(){if(chrome)if(chrome.tabs){const t=await chrome.tabs.query({active:!0,currentWindow:!0});if(t.length>0){let e=t[0].url;return e||"NO_URL_URL"}else return"NO_URL_LENGTH"}else return"NO_URL_TABS";else return"NO_URL_CHROME"}function qc(){return chrome?chrome.runtime?chrome.runtime.getManifest().version:"NO_VER_RUNTIME":"NO_VER_CHROME"}const Hc={TriggerAction:"triggerAction"},Gc=[EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError,globalThis.DOMException,globalThis.AssertionError,globalThis.SystemError].filter(Boolean).map(t=>[t.name,t]),Vc=new Map(Gc);class cr extends Error{constructor(n){super(cr._prepareSuperMessage(n));pe(this,"name","NonError")}static _prepareSuperMessage(n){try{return JSON.stringify(n)}catch{return String(n)}}}const Zc=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0},{property:"cause",enumerable:!1}],lr=new WeakSet,Kc=t=>{lr.add(t);const e=t.toJSON();return lr.delete(t),e},Vi=t=>Vc.get(t)??Error,dr=({from:t,seen:e,to:n,forceEnumerable:r,maxDepth:i,depth:s,useToJSON:o,serialize:a})=>{if(!n)if(Array.isArray(t))n=[];else if(!a&&Zi(t)){const c=Vi(t.name);n=new c}else n={};if(e.push(t),s>=i)return n;if(o&&typeof t.toJSON=="function"&&!lr.has(t))return Kc(t);const u=c=>dr({from:c,seen:[...e],forceEnumerable:r,maxDepth:i,depth:s,useToJSON:o,serialize:a});for(const[c,d]of Object.entries(t)){if(d&&d instanceof Uint8Array&&d.constructor.name==="Buffer"){n[c]="[object Buffer]";continue}if(d!==null&&typeof d=="object"&&typeof d.pipe=="function"){n[c]="[object Stream]";continue}if(typeof d!="function"){if(!d||typeof d!="object"){try{n[c]=d}catch{}continue}if(!e.includes(t[c])){s++,n[c]=u(t[c]);continue}n[c]="[Circular]"}}for(const{property:c,enumerable:d}of Zc)typeof t[c]<"u"&&t[c]!==null&&Object.defineProperty(n,c,{value:Zi(t[c])?u(t[c]):t[c],enumerable:r?!0:d,configurable:!0,writable:!0});return n};function Yc(t,e={}){const{maxDepth:n=Number.POSITIVE_INFINITY,useToJSON:r=!0}=e;return typeof t=="object"&&t!==null?dr({from:t,seen:[],forceEnumerable:!0,maxDepth:n,depth:0,useToJSON:r,serialize:!0}):typeof t=="function"?`[Function: ${t.name||"anonymous"}]`:t}function Xc(t,e={}){const{maxDepth:n=Number.POSITIVE_INFINITY}=e;if(t instanceof Error)return t;if(Jc(t)){const r=Vi(t.name);return dr({from:t,seen:[],to:new r,maxDepth:n,depth:0,serialize:!1})}return new cr(t)}function Zi(t){return!!t&&typeof t=="object"&&"name"in t&&"message"in t&&"stack"in t}function Jc(t){return!!t&&typeof t=="object"&&"message"in t&&!Array.isArray(t)}var Qc=Object.defineProperty,el=Object.defineProperties,tl=Object.getOwnPropertyDescriptors,Ki=Object.getOwnPropertySymbols,nl=Object.prototype.hasOwnProperty,rl=Object.prototype.propertyIsEnumerable,Yi=(t,e,n)=>e in t?Qc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Xi=(t,e)=>{for(var n in e||(e={}))nl.call(e,n)&&Yi(t,n,e[n]);if(Ki)for(var n of Ki(e))rl.call(e,n)&&Yi(t,n,e[n]);return t},Ji=(t,e)=>el(t,tl(e)),il=(t,e,n)=>new Promise((r,i)=>{var s=u=>{try{a(n.next(u))}catch(c){i(c)}},o=u=>{try{a(n.throw(u))}catch(c){i(c)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o);a((n=n.apply(t,e)).next())});function sl(t){let e,n={};function r(){Object.entries(n).length===0&&(e==null||e(),e=void 0)}let i=Math.floor(Math.random()*1e4);function s(){return i++}return{sendMessage(o,a,...u){return il(this,null,function*(){var c,d,f,v;const h={id:s(),type:o,data:a,timestamp:Date.now()},y=(d=yield(c=t.verifyMessageData)==null?void 0:c.call(t,h))!=null?d:h;(f=t.logger)==null||f.debug(`[messaging] sendMessage {id=${y.id}} ─ᐅ`,y,...u);const m=yield t.sendMessage(y,...u),{res:_,err:g}=m??{err:new Error("No response")};if((v=t.logger)==null||v.debug(`[messaging] sendMessage {id=${y.id}} ᐊ─`,{res:_,err:g}),g!=null)throw Xc(g);return _})},onMessage(o,a){var u,c,d;if(e==null&&((u=t.logger)==null||u.debug(`[messaging] "${o}" initialized the message listener for this context`),e=t.addRootListener(f=>{var v,h;if(typeof f.type!="string"||typeof f.timestamp!="number"){if(t.breakError)return;const _=Error(`[messaging] Unknown message format, must include the 'type' & 'timestamp' fields, received: ${JSON.stringify(f)}`);throw(v=t.logger)==null||v.error(_),_}(h=t==null?void 0:t.logger)==null||h.debug("[messaging] Received message",f);const y=n[f.type];if(y==null)return;const m=y(f);return Promise.resolve(m).then(_=>{var g,b;return(b=(g=t.verifyMessageData)==null?void 0:g.call(t,_))!=null?b:_}).then(_=>{var g;return(g=t==null?void 0:t.logger)==null||g.debug(`[messaging] onMessage {id=${f.id}} ─ᐅ`,{res:_}),{res:_}}).catch(_=>{var g;return(g=t==null?void 0:t.logger)==null||g.debug(`[messaging] onMessage {id=${f.id}} ─ᐅ`,{err:_}),{err:Yc(_)}})})),n[o]!=null){const f=Error(`[messaging] In this JS context, only one listener can be setup for ${o}`);throw(c=t.logger)==null||c.error(f),f}return n[o]=a,(d=t.logger)==null||d.log(`[messaging] Added listener for ${o}`),()=>{delete n[o],r()}},removeAllListeners(){Object.keys(n).forEach(o=>{delete n[o]}),r()}}}var rn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qi(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var sn={exports:{}},ol=sn.exports,es;function al(){return es||(es=1,function(t,e){(function(n,r){r(t)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:ol,function(n){var r,i;if(!((i=(r=globalThis.chrome)==null?void 0:r.runtime)!=null&&i.id))throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const s="The message port closed before a response was received.",o=a=>{const u={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(u).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class c extends WeakMap{constructor(x,M=void 0){super(M),this.createItem=x}get(x){return this.has(x)||this.set(x,this.createItem(x)),super.get(x)}}const d=T=>T&&typeof T=="object"&&typeof T.then=="function",f=(T,x)=>(...M)=>{a.runtime.lastError?T.reject(new Error(a.runtime.lastError.message)):x.singleCallbackArg||M.length<=1&&x.singleCallbackArg!==!1?T.resolve(M[0]):T.resolve(M)},v=T=>T==1?"argument":"arguments",h=(T,x)=>function(q,...k){if(k.length<x.minArgs)throw new Error(`Expected at least ${x.minArgs} ${v(x.minArgs)} for ${T}(), got ${k.length}`);if(k.length>x.maxArgs)throw new Error(`Expected at most ${x.maxArgs} ${v(x.maxArgs)} for ${T}(), got ${k.length}`);return new Promise((U,p)=>{if(x.fallbackToNoCallback)try{q[T](...k,f({resolve:U,reject:p},x))}catch(P){console.warn(`${T} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,P),q[T](...k),x.fallbackToNoCallback=!1,x.noCallback=!0,U()}else x.noCallback?(q[T](...k),U()):q[T](...k,f({resolve:U,reject:p},x))})},y=(T,x,M)=>new Proxy(x,{apply(q,k,U){return M.call(k,T,...U)}});let m=Function.call.bind(Object.prototype.hasOwnProperty);const _=(T,x={},M={})=>{let q=Object.create(null),k={has(p,P){return P in T||P in q},get(p,P,X){if(P in q)return q[P];if(!(P in T))return;let B=T[P];if(typeof B=="function")if(typeof x[P]=="function")B=y(T,T[P],x[P]);else if(m(M,P)){let H=h(P,M[P]);B=y(T,T[P],H)}else B=B.bind(T);else if(typeof B=="object"&&B!==null&&(m(x,P)||m(M,P)))B=_(B,x[P],M[P]);else if(m(M,"*"))B=_(B,x[P],M["*"]);else return Object.defineProperty(q,P,{configurable:!0,enumerable:!0,get(){return T[P]},set(H){T[P]=H}}),B;return q[P]=B,B},set(p,P,X,B){return P in q?q[P]=X:T[P]=X,!0},defineProperty(p,P,X){return Reflect.defineProperty(q,P,X)},deleteProperty(p,P){return Reflect.deleteProperty(q,P)}},U=Object.create(T);return new Proxy(U,k)},g=T=>({addListener(x,M,...q){x.addListener(T.get(M),...q)},hasListener(x,M){return x.hasListener(T.get(M))},removeListener(x,M){x.removeListener(T.get(M))}}),b=new c(T=>typeof T!="function"?T:function(M){const q=_(M,{},{getContent:{minArgs:0,maxArgs:0}});T(q)}),E=new c(T=>typeof T!="function"?T:function(M,q,k){let U=!1,p,P=new Promise(W=>{p=function(J){U=!0,W(J)}}),X;try{X=T(M,q,p)}catch(W){X=Promise.reject(W)}const B=X!==!0&&d(X);if(X!==!0&&!B&&!U)return!1;const H=W=>{W.then(J=>{k(J)},J=>{let N;J&&(J instanceof Error||typeof J.message=="string")?N=J.message:N="An unexpected error occurred",k({__mozWebExtensionPolyfillReject__:!0,message:N})}).catch(J=>{console.error("Failed to send onMessage rejected reply",J)})};return H(B?X:P),!0}),A=({reject:T,resolve:x},M)=>{a.runtime.lastError?a.runtime.lastError.message===s?x():T(new Error(a.runtime.lastError.message)):M&&M.__mozWebExtensionPolyfillReject__?T(new Error(M.message)):x(M)},I=(T,x,M,...q)=>{if(q.length<x.minArgs)throw new Error(`Expected at least ${x.minArgs} ${v(x.minArgs)} for ${T}(), got ${q.length}`);if(q.length>x.maxArgs)throw new Error(`Expected at most ${x.maxArgs} ${v(x.maxArgs)} for ${T}(), got ${q.length}`);return new Promise((k,U)=>{const p=A.bind(null,{resolve:k,reject:U});q.push(p),M.sendMessage(...q)})},L={devtools:{network:{onRequestFinished:g(b)}},runtime:{onMessage:g(E),onMessageExternal:g(E),sendMessage:I.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:I.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},R={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return u.privacy={network:{"*":R},services:{"*":R},websites:{"*":R}},_(a,L,u)};n.exports=o(chrome)}else n.exports=globalThis.browser})}(sn)),sn.exports}var ul=al();const on=Qi(ul);function cl(t){return sl(Ji(Xi({},t),{sendMessage(e,n){return n==null?on.runtime.sendMessage(e):on.tabs.sendMessage(n,e)},addRootListener(e){const n=(r,i)=>e(typeof r=="object"?Ji(Xi({},r),{sender:i}):r);return on.runtime.onMessage.addListener(n),()=>on.runtime.onMessage.removeListener(n)}}))}const{sendMessage:fr,onMessage:ts}=cl();var hr=function(t,e){return hr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},hr(t,e)};function ct(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");hr(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var re=function(){return re=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},re.apply(this,arguments)};function pr(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Q(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{c(r.next(d))}catch(f){o(f)}}function u(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):i(d.value).then(a,u)}c((r=r.apply(t,e||[])).next())})}function ee(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return u([c,d])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(n=0)),n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function _t(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Te(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function yt(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}typeof SuppressedError=="function"&&SuppressedError;var ll="Event tracked successfully",dl="Unexpected error occurred",fl="Event rejected due to exceeded retry count",hl="Event skipped due to optOut config",pl="Event rejected due to missing API key",gl="Invalid API key",ml="Client not initialized",we;(function(t){t.SET="$set",t.SET_ONCE="$setOnce",t.ADD="$add",t.APPEND="$append",t.PREPEND="$prepend",t.REMOVE="$remove",t.PREINSERT="$preInsert",t.POSTINSERT="$postInsert",t.UNSET="$unset",t.CLEAR_ALL="$clearAll"})(we||(we={}));var lt;(function(t){t.REVENUE_PRODUCT_ID="$productId",t.REVENUE_QUANTITY="$quantity",t.REVENUE_PRICE="$price",t.REVENUE_TYPE="$revenueType",t.REVENUE="$revenue"})(lt||(lt={}));var bt;(function(t){t.IDENTIFY="$identify",t.GROUP_IDENTIFY="$groupidentify",t.REVENUE="revenue_amount"})(bt||(bt={}));var Ce;(function(t){t[t.None=0]="None",t[t.Error=1]="Error",t[t.Warn=2]="Warn",t[t.Verbose=3]="Verbose",t[t.Debug=4]="Debug"})(Ce||(Ce={}));var ge;(function(t){t.Unknown="unknown",t.Skipped="skipped",t.Success="success",t.RateLimit="rate_limit",t.PayloadTooLarge="payload_too_large",t.Invalid="invalid",t.Failed="failed",t.Timeout="Timeout",t.SystemError="SystemError"})(ge||(ge={}));var vl=null,wt=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=ge.Unknown),{event:t,code:e,message:n}},Et=function(t){return t?(t^Math.random()*16>>t/4).toString(16):(String(1e7)+String(-1e3)+String(-4e3)+String(-8e3)+String(-1e11)).replace(/[018]/g,Et)},_l=function(){function t(e){this.client=e,this.queue=[],this.applying=!1,this.plugins=[]}return t.prototype.register=function(e,n){var r,i;return Q(this,void 0,void 0,function(){return ee(this,function(s){switch(s.label){case 0:return this.plugins.some(function(o){return o.name===e.name})?(n.loggerProvider.warn("Plugin with name ".concat(e.name," already exists, skipping registration")),[2]):(e.name===void 0&&(e.name=Et(),n.loggerProvider.warn(`Plugin name is undefined. 
      Generating a random UUID for plugin name: `.concat(e.name,`. 
      Set a name for the plugin to prevent it from being added multiple times.`))),e.type=(r=e.type)!==null&&r!==void 0?r:"enrichment",[4,(i=e.setup)===null||i===void 0?void 0:i.call(e,n,this.client)]);case 1:return s.sent(),this.plugins.push(e),[2]}})})},t.prototype.deregister=function(e,n){var r;return Q(this,void 0,void 0,function(){var i,s;return ee(this,function(o){switch(o.label){case 0:return i=this.plugins.findIndex(function(a){return a.name===e}),i===-1?(n.loggerProvider.warn("Plugin with name ".concat(e," does not exist, skipping deregistration")),[2]):(s=this.plugins[i],this.plugins.splice(i,1),[4,(r=s.teardown)===null||r===void 0?void 0:r.call(s)]);case 1:return o.sent(),[2]}})})},t.prototype.reset=function(e){this.applying=!1;var n=this.plugins;n.map(function(r){var i;return(i=r.teardown)===null||i===void 0?void 0:i.call(r)}),this.plugins=[],this.client=e},t.prototype.push=function(e){var n=this;return new Promise(function(r){n.queue.push([e,r]),n.scheduleApply(0)})},t.prototype.scheduleApply=function(e){var n=this;this.applying||(this.applying=!0,setTimeout(function(){n.apply(n.queue.shift()).then(function(){n.applying=!1,n.queue.length>0&&n.scheduleApply(0)})},e))},t.prototype.apply=function(e){return Q(this,void 0,void 0,function(){var n,r,i,s,o,a,u,h,y,c,d,f,v,h,y,m,_,g,b,E,A,I;return ee(this,function(L){switch(L.label){case 0:if(!e)return[2];n=Te(e,1),r=n[0],i=Te(e,2),s=i[1],o=this.plugins.filter(function(R){return R.type==="before"}),L.label=1;case 1:L.trys.push([1,6,7,8]),a=_t(o),u=a.next(),L.label=2;case 2:return u.done?[3,5]:(h=u.value,h.execute?[4,h.execute(re({},r))]:[3,4]);case 3:if(y=L.sent(),y===null)return s({event:r,code:0,message:""}),[2];r=y,L.label=4;case 4:return u=a.next(),[3,2];case 5:return[3,8];case 6:return c=L.sent(),b={error:c},[3,8];case 7:try{u&&!u.done&&(E=a.return)&&E.call(a)}finally{if(b)throw b.error}return[7];case 8:d=this.plugins.filter(function(R){return R.type==="enrichment"||R.type===void 0}),L.label=9;case 9:L.trys.push([9,14,15,16]),f=_t(d),v=f.next(),L.label=10;case 10:return v.done?[3,13]:(h=v.value,h.execute?[4,h.execute(re({},r))]:[3,12]);case 11:if(y=L.sent(),y===null)return s({event:r,code:0,message:""}),[2];r=y,L.label=12;case 12:return v=f.next(),[3,10];case 13:return[3,16];case 14:return m=L.sent(),A={error:m},[3,16];case 15:try{v&&!v.done&&(I=f.return)&&I.call(f)}finally{if(A)throw A.error}return[7];case 16:return _=this.plugins.filter(function(R){return R.type==="destination"}),g=_.map(function(R){var T=re({},r);return R.execute(T).catch(function(x){return wt(T,0,String(x))})}),Promise.all(g).then(function(R){var T=Te(R,1),x=T[0],M=x||wt(r,100,"Event not tracked, no destination plugins on the instance");s(M)}),[2]}})})},t.prototype.flush=function(){return Q(this,void 0,void 0,function(){var e,n,r,i=this;return ee(this,function(s){switch(s.label){case 0:return e=this.queue,this.queue=[],[4,Promise.all(e.map(function(o){return i.apply(o)}))];case 1:return s.sent(),n=this.plugins.filter(function(o){return o.type==="destination"}),r=n.map(function(o){return o.flush&&o.flush()}),[4,Promise.all(r)];case 2:return s.sent(),[2]}})})},t}(),ns="-",an="AMP",yl="".concat(an,"_unsent"),rs="https://api2.amplitude.com/2/httpapi",bl="https://api.eu.amplitude.com/2/httpapi",wl="https://api2.amplitude.com/batch",El="https://api.eu.amplitude.com/batch",Sl=1e3,gr=function(t){if(Object.keys(t).length>Sl)return!1;for(var e in t){var n=t[e];if(!is(e,n))return!1}return!0},is=function(t,e){var n,r;if(typeof t!="string")return!1;if(Array.isArray(e)){var i=!0;try{for(var s=_t(e),o=s.next();!o.done;o=s.next()){var a=o.value;if(Array.isArray(a))return!1;if(typeof a=="object")i=i&&gr(a);else if(!["number","string"].includes(typeof a))return!1;if(!i)return!1}}catch(u){n={error:u}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}else{if(e==null)return!1;if(typeof e=="object")return gr(e);if(!["number","string","boolean"].includes(typeof e))return!1}return!0},un=function(){function t(){this._propertySet=new Set,this._properties={}}return t.prototype.getUserProperties=function(){return re({},this._properties)},t.prototype.set=function(e,n){return this._safeSet(we.SET,e,n),this},t.prototype.setOnce=function(e,n){return this._safeSet(we.SET_ONCE,e,n),this},t.prototype.append=function(e,n){return this._safeSet(we.APPEND,e,n),this},t.prototype.prepend=function(e,n){return this._safeSet(we.PREPEND,e,n),this},t.prototype.postInsert=function(e,n){return this._safeSet(we.POSTINSERT,e,n),this},t.prototype.preInsert=function(e,n){return this._safeSet(we.PREINSERT,e,n),this},t.prototype.remove=function(e,n){return this._safeSet(we.REMOVE,e,n),this},t.prototype.add=function(e,n){return this._safeSet(we.ADD,e,n),this},t.prototype.unset=function(e){return this._safeSet(we.UNSET,e,ns),this},t.prototype.clearAll=function(){return this._properties={},this._properties[we.CLEAR_ALL]=ns,this},t.prototype._safeSet=function(e,n,r){if(this._validate(e,n,r)){var i=this._properties[e];return i===void 0&&(i={},this._properties[e]=i),i[n]=r,this._propertySet.add(n),!0}return!1},t.prototype._validate=function(e,n,r){return this._properties[we.CLEAR_ALL]!==void 0||this._propertySet.has(n)?!1:e===we.ADD?typeof r=="number":e!==we.UNSET&&e!==we.REMOVE?is(n,r):!0},t}(),kl=function(t,e,n){var r=typeof t=="string"?{event_type:t}:t;return re(re(re({},r),n),e&&{event_properties:e})},ss=function(t,e){var n=re(re({},e),{event_type:bt.IDENTIFY,user_properties:t.getUserProperties()});return n},Al=function(t,e,n,r){var i,s=re(re({},r),{event_type:bt.GROUP_IDENTIFY,group_properties:n.getUserProperties(),groups:(i={},i[t]=e,i)});return s},xl=function(t,e,n){var r,i=new un;i.set(t,e);var s=re(re({},n),{event_type:bt.IDENTIFY,user_properties:i.getUserProperties(),groups:(r={},r[t]=e,r)});return s},Il=function(t,e){return re(re({},e),{event_type:bt.REVENUE,event_properties:t.getEventProperties()})},Ae=function(t){return{promise:t||Promise.resolve()}},Tl=function(){function t(e){e===void 0&&(e="$default"),this.initializing=!1,this.isReady=!1,this.q=[],this.dispatchQ=[],this.logEvent=this.track.bind(this),this.timeline=new _l(this),this.name=e}return t.prototype._init=function(e){return Q(this,void 0,void 0,function(){return ee(this,function(n){switch(n.label){case 0:return this.config=e,this.timeline.reset(this),[4,this.runQueuedFunctions("q")];case 1:return n.sent(),this.isReady=!0,[2]}})})},t.prototype.runQueuedFunctions=function(e){return Q(this,void 0,void 0,function(){var n,r,i,s,o,a,u,c;return ee(this,function(d){switch(d.label){case 0:n=this[e],this[e]=[],d.label=1;case 1:d.trys.push([1,8,9,10]),r=_t(n),i=r.next(),d.label=2;case 2:return i.done?[3,7]:(s=i.value,o=s(),o&&"promise"in o?[4,o.promise]:[3,4]);case 3:return d.sent(),[3,6];case 4:return[4,o];case 5:d.sent(),d.label=6;case 6:return i=r.next(),[3,2];case 7:return[3,10];case 8:return a=d.sent(),u={error:a},[3,10];case 9:try{i&&!i.done&&(c=r.return)&&c.call(r)}finally{if(u)throw u.error}return[7];case 10:return this[e].length?[4,this.runQueuedFunctions(e)]:[3,12];case 11:d.sent(),d.label=12;case 12:return[2]}})})},t.prototype.track=function(e,n,r){var i=kl(e,n,r);return Ae(this.dispatch(i))},t.prototype.identify=function(e,n){var r=ss(e,n);return Ae(this.dispatch(r))},t.prototype.groupIdentify=function(e,n,r,i){var s=Al(e,n,r,i);return Ae(this.dispatch(s))},t.prototype.setGroup=function(e,n,r){var i=xl(e,n,r);return Ae(this.dispatch(i))},t.prototype.revenue=function(e,n){var r=Il(e,n);return Ae(this.dispatch(r))},t.prototype.add=function(e){return this.isReady?this._addPlugin(e):(this.q.push(this._addPlugin.bind(this,e)),Ae())},t.prototype._addPlugin=function(e){return Ae(this.timeline.register(e,this.config))},t.prototype.remove=function(e){return this.isReady?this._removePlugin(e):(this.q.push(this._removePlugin.bind(this,e)),Ae())},t.prototype._removePlugin=function(e){return Ae(this.timeline.deregister(e,this.config))},t.prototype.dispatchWithCallback=function(e,n){if(!this.isReady)return n(wt(e,0,ml));this.process(e).then(n)},t.prototype.dispatch=function(e){return Q(this,void 0,void 0,function(){var n=this;return ee(this,function(r){return this.isReady?[2,this.process(e)]:[2,new Promise(function(i){n.dispatchQ.push(n.dispatchWithCallback.bind(n,e,i))})]})})},t.prototype.process=function(e){return Q(this,void 0,void 0,function(){var i,n,r,i;return ee(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),this.config.optOut?[2,wt(e,0,hl)]:[4,this.timeline.push(e)];case 1:return i=s.sent(),i.code===200?this.config.loggerProvider.log(i.message):i.code===100?this.config.loggerProvider.warn(i.message):this.config.loggerProvider.error(i.message),[2,i];case 2:return n=s.sent(),r=String(n),this.config.loggerProvider.error(r),i=wt(e,0,r),[2,i];case 3:return[2]}})})},t.prototype.setOptOut=function(e){if(!this.isReady){this.q.push(this._setOptOut.bind(this,!!e));return}this._setOptOut(e)},t.prototype._setOptOut=function(e){this.config.optOut=!!e},t.prototype.flush=function(){return Ae(this.timeline.flush())},t}(),Cl=function(){function t(){this.productId="",this.quantity=1,this.price=0}return t.prototype.setProductId=function(e){return this.productId=e,this},t.prototype.setQuantity=function(e){return e>0&&(this.quantity=e),this},t.prototype.setPrice=function(e){return this.price=e,this},t.prototype.setRevenueType=function(e){return this.revenueType=e,this},t.prototype.setRevenue=function(e){return this.revenue=e,this},t.prototype.setEventProperties=function(e){return gr(e)&&(this.properties=e),this},t.prototype.getEventProperties=function(){var e=this.properties?re({},this.properties):{};return e[lt.REVENUE_PRODUCT_ID]=this.productId,e[lt.REVENUE_QUANTITY]=this.quantity,e[lt.REVENUE_PRICE]=this.price,e[lt.REVENUE_TYPE]=this.revenueType,e[lt.REVENUE]=this.revenue,e},t}(),Rl=function(t,e){var n=Math.max(e,1);return t.reduce(function(r,i,s){var o=Math.floor(s/n);return r[o]||(r[o]=[]),r[o].push(i),r},[])},cn="Amplitude Logger ",os=function(){function t(){this.logLevel=Ce.None}return t.prototype.disable=function(){this.logLevel=Ce.None},t.prototype.enable=function(e){e===void 0&&(e=Ce.Warn),this.logLevel=e},t.prototype.log=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.logLevel<Ce.Verbose||console.log("".concat(cn,"[Log]: ").concat(e.join(" ")))},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.logLevel<Ce.Warn||console.warn("".concat(cn,"[Warn]: ").concat(e.join(" ")))},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.logLevel<Ce.Error||console.error("".concat(cn,"[Error]: ").concat(e.join(" ")))},t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.logLevel<Ce.Debug||console.log("".concat(cn,"[Debug]: ").concat(e.join(" ")))},t}(),ln=function(){return{flushMaxRetries:12,flushQueueSize:200,flushIntervalMillis:1e4,instanceName:"$default_instance",logLevel:Ce.Warn,loggerProvider:new os,offline:!1,optOut:!1,serverUrl:rs,serverZone:"US",useBatch:!1}},Ol=function(){function t(e){var n,r,i,s;this._optOut=!1;var o=ln();this.apiKey=e.apiKey,this.flushIntervalMillis=(n=e.flushIntervalMillis)!==null&&n!==void 0?n:o.flushIntervalMillis,this.flushMaxRetries=e.flushMaxRetries||o.flushMaxRetries,this.flushQueueSize=e.flushQueueSize||o.flushQueueSize,this.instanceName=e.instanceName||o.instanceName,this.loggerProvider=e.loggerProvider||o.loggerProvider,this.logLevel=(r=e.logLevel)!==null&&r!==void 0?r:o.logLevel,this.minIdLength=e.minIdLength,this.plan=e.plan,this.ingestionMetadata=e.ingestionMetadata,this.offline=e.offline!==void 0?e.offline:o.offline,this.optOut=(i=e.optOut)!==null&&i!==void 0?i:o.optOut,this.serverUrl=e.serverUrl,this.serverZone=e.serverZone||o.serverZone,this.storageProvider=e.storageProvider,this.transportProvider=e.transportProvider,this.useBatch=(s=e.useBatch)!==null&&s!==void 0?s:o.useBatch,this.loggerProvider.enable(this.logLevel);var a=as(e.serverUrl,e.serverZone,e.useBatch);this.serverZone=a.serverZone,this.serverUrl=a.serverUrl}return Object.defineProperty(t.prototype,"optOut",{get:function(){return this._optOut},set:function(e){this._optOut=e},enumerable:!1,configurable:!0}),t}(),Pl=function(t,e){return t==="EU"?e?El:bl:e?wl:rs},as=function(t,e,n){if(t===void 0&&(t=""),e===void 0&&(e=ln().serverZone),n===void 0&&(n=ln().useBatch),t)return{serverUrl:t,serverZone:void 0};var r=["US","EU"].includes(e)?e:ln().serverZone;return{serverZone:r,serverUrl:Pl(r,n)}},Dl=function(){function t(){this.sdk={metrics:{histogram:{}}}}return t.prototype.recordHistogram=function(e,n){this.sdk.metrics.histogram[e]=n},t}();function Nl(t){return t instanceof Error?t.message:String(t)}function dn(t){var e="";try{"body"in t&&(e=JSON.stringify(t.body,null,2))}catch{}return e}var Ll=function(){function t(){this.name="amplitude",this.type="destination",this.retryTimeout=1e3,this.throttleTimeout=3e4,this.storageKey="",this.scheduled=null,this.queue=[]}return t.prototype.setup=function(e){var n;return Q(this,void 0,void 0,function(){var r,i=this;return ee(this,function(s){switch(s.label){case 0:return this.config=e,this.storageKey="".concat(yl,"_").concat(this.config.apiKey.substring(0,10)),[4,(n=this.config.storageProvider)===null||n===void 0?void 0:n.get(this.storageKey)];case 1:return r=s.sent(),r&&r.length>0&&Promise.all(r.map(function(o){return i.execute(o)})).catch(),[2,Promise.resolve(void 0)]}})})},t.prototype.execute=function(e){var n=this;return e.insert_id||(e.insert_id=Et()),new Promise(function(r){var i={event:e,attempts:0,callback:function(s){return r(s)},timeout:0};n.addToQueue(i)})},t.prototype.getTryableList=function(e){var n=this;return e.filter(function(r){return r.attempts<n.config.flushMaxRetries?(r.attempts+=1,!0):(n.fulfillRequest([r],500,fl),!1)})},t.prototype.scheduleTryable=function(e,n){var r=this;n===void 0&&(n=!1),e.forEach(function(i){if(n&&(r.queue=r.queue.concat(i)),i.timeout===0){r.schedule(r.config.flushIntervalMillis);return}setTimeout(function(){i.timeout=0,r.schedule(0)},i.timeout)})},t.prototype.addToQueue=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=this.getTryableList(e);this.scheduleTryable(r,!0),this.saveEvents()},t.prototype.schedule=function(e){var n=this;this.scheduled||this.config.offline||(this.scheduled=setTimeout(function(){n.flush(!0).then(function(){n.queue.length>0&&n.schedule(e)})},e))},t.prototype.flush=function(e){return e===void 0&&(e=!1),Q(this,void 0,void 0,function(){var n,r,i,s=this;return ee(this,function(o){switch(o.label){case 0:return this.config.offline?(this.config.loggerProvider.debug("Skipping flush while offline."),[2]):(n=[],r=[],this.queue.forEach(function(a){return a.timeout===0?n.push(a):r.push(a)}),this.scheduled&&(clearTimeout(this.scheduled),this.scheduled=null),i=Rl(n,this.config.flushQueueSize),[4,i.reduce(function(a,u){return Q(s,void 0,void 0,function(){return ee(this,function(c){switch(c.label){case 0:return[4,a];case 1:return c.sent(),[4,this.send(u,e)];case 2:return[2,c.sent()]}})})},Promise.resolve())]);case 1:return o.sent(),this.scheduleTryable(r),[2]}})})},t.prototype.send=function(e,n){return n===void 0&&(n=!0),Q(this,void 0,void 0,function(){var r,i,s,o,a;return ee(this,function(u){switch(u.label){case 0:if(!this.config.apiKey)return[2,this.fulfillRequest(e,400,pl)];r={api_key:this.config.apiKey,events:e.map(function(c){var d=c.event;d.extra;var f=pr(d,["extra"]);return f}),options:{min_id_length:this.config.minIdLength},client_upload_time:new Date().toISOString(),request_metadata:this.config.requestMetadata},this.config.requestMetadata=new Dl,u.label=1;case 1:return u.trys.push([1,3,,4]),i=as(this.config.serverUrl,this.config.serverZone,this.config.useBatch).serverUrl,[4,this.config.transportProvider.send(i,r)];case 2:return s=u.sent(),s===null?(this.fulfillRequest(e,0,dl),[2]):n?(this.handleResponse(s,e),[3,4]):("body"in s?this.fulfillRequest(e,s.statusCode,"".concat(s.status,": ").concat(dn(s))):this.fulfillRequest(e,s.statusCode,s.status),[2]);case 3:return o=u.sent(),a=Nl(o),this.config.loggerProvider.error(a),this.handleResponse({status:ge.Failed,statusCode:0},e),[3,4];case 4:return[2]}})})},t.prototype.handleResponse=function(e,n){var r=e.status;switch(r){case ge.Success:{this.handleSuccessResponse(e,n);break}case ge.Invalid:{this.handleInvalidResponse(e,n);break}case ge.PayloadTooLarge:{this.handlePayloadTooLargeResponse(e,n);break}case ge.RateLimit:{this.handleRateLimitResponse(e,n);break}default:{this.config.loggerProvider.warn(`{code: 0, error: "Status '`.concat(r,"' provided for ").concat(n.length,' events"}')),this.handleOtherResponse(n);break}}},t.prototype.handleSuccessResponse=function(e,n){this.fulfillRequest(n,e.statusCode,ll)},t.prototype.handleInvalidResponse=function(e,n){var r=this;if(e.body.missingField||e.body.error.startsWith(gl)){this.fulfillRequest(n,e.statusCode,e.body.error);return}var i=yt(yt(yt(yt([],Te(Object.values(e.body.eventsWithInvalidFields)),!1),Te(Object.values(e.body.eventsWithMissingFields)),!1),Te(Object.values(e.body.eventsWithInvalidIdLengths)),!1),Te(e.body.silencedEvents),!1).flat(),s=new Set(i),o=n.filter(function(u,c){if(s.has(c)){r.fulfillRequest([u],e.statusCode,e.body.error);return}return!0});o.length>0&&this.config.loggerProvider.warn(dn(e));var a=this.getTryableList(o);this.scheduleTryable(a)},t.prototype.handlePayloadTooLargeResponse=function(e,n){if(n.length===1){this.fulfillRequest(n,e.statusCode,e.body.error);return}this.config.loggerProvider.warn(dn(e)),this.config.flushQueueSize/=2;var r=this.getTryableList(n);this.scheduleTryable(r)},t.prototype.handleRateLimitResponse=function(e,n){var r=this,i=Object.keys(e.body.exceededDailyQuotaUsers),s=Object.keys(e.body.exceededDailyQuotaDevices),o=e.body.throttledEvents,a=new Set(i),u=new Set(s),c=new Set(o),d=n.filter(function(v,h){if(v.event.user_id&&a.has(v.event.user_id)||v.event.device_id&&u.has(v.event.device_id)){r.fulfillRequest([v],e.statusCode,e.body.error);return}return c.has(h)&&(v.timeout=r.throttleTimeout),!0});d.length>0&&this.config.loggerProvider.warn(dn(e));var f=this.getTryableList(d);this.scheduleTryable(f)},t.prototype.handleOtherResponse=function(e){var n=this,r=e.map(function(s){return s.timeout=s.attempts*n.retryTimeout,s}),i=this.getTryableList(r);this.scheduleTryable(i)},t.prototype.fulfillRequest=function(e,n,r){this.removeEvents(e),e.forEach(function(i){return i.callback(wt(i.event,n,r))})},t.prototype.saveEvents=function(){if(this.config.storageProvider){var e=this.queue.map(function(n){return n.event});this.config.storageProvider.set(this.storageKey,e)}},t.prototype.removeEvents=function(e){this.queue=this.queue.filter(function(n){return!e.some(function(r){return r.event.insert_id===n.event.insert_id})}),this.saveEvents()},t}(),Ul=function(t){var e=new Error().stack||"";return e.split(`
`).slice(2+t).map(function(n){return n.trim()})},me=function(t){return function(){var e=re({},t.config),n=e.loggerProvider,r=e.logLevel;return{logger:n,logLevel:r}}},Fl=function(t,e){var n,r;e=e.replace(/\[(\w+)\]/g,".$1"),e=e.replace(/^\./,"");try{for(var i=_t(e.split(".")),s=i.next();!s.done;s=i.next()){var o=s.value;if(o in t)t=t[o];else return}}catch(a){n={error:a}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return t},ve=function(t,e){return function(){var n,r,i={};try{for(var s=_t(e),o=s.next();!o.done;o=s.next()){var a=o.value;i[a]=Fl(t,a)}}catch(u){n={error:u}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i}},_e=function(t,e,n,r,i){return i===void 0&&(i=null),function(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];var a=n(),u=a.logger,c=a.logLevel;if(c&&c<Ce.Debug||!c||!u)return t.apply(i,s);var d={type:"invoke public method",name:e,args:s,stacktrace:Ul(1),time:{start:new Date().toISOString()},states:{}};r&&d.states&&(d.states.before=r());var f=t.apply(i,s);return f&&f.promise?f.promise.then(function(){r&&d.states&&(d.states.after=r()),d.time&&(d.time.end=new Date().toISOString()),u.debug(JSON.stringify(d,null,2))}):(r&&d.states&&(d.states.after=r()),d.time&&(d.time.end=new Date().toISOString()),u.debug(JSON.stringify(d,null,2))),f}},us=function(){function t(){this.memoryStorage=new Map}return t.prototype.isEnabled=function(){return Q(this,void 0,void 0,function(){return ee(this,function(e){return[2,!0]})})},t.prototype.get=function(e){return Q(this,void 0,void 0,function(){return ee(this,function(n){return[2,this.memoryStorage.get(e)]})})},t.prototype.getRaw=function(e){return Q(this,void 0,void 0,function(){var n;return ee(this,function(r){switch(r.label){case 0:return[4,this.get(e)];case 1:return n=r.sent(),[2,n?JSON.stringify(n):void 0]}})})},t.prototype.set=function(e,n){return Q(this,void 0,void 0,function(){return ee(this,function(r){return this.memoryStorage.set(e,n),[2]})})},t.prototype.remove=function(e){return Q(this,void 0,void 0,function(){return ee(this,function(n){return this.memoryStorage.delete(e),[2]})})},t.prototype.reset=function(){return Q(this,void 0,void 0,function(){return ee(this,function(e){return this.memoryStorage.clear(),[2]})})},t}(),mr=function(){function t(){}return t.prototype.send=function(e,n){return Promise.resolve(null)},t.prototype.buildResponse=function(e){var n,r,i,s,o,a,u,c,d,f,v,h,y,m,_,g,b,E,A,I,L,R;if(typeof e!="object")return null;var T=e.code||0,x=this.buildStatus(T);switch(x){case ge.Success:return{status:x,statusCode:T,body:{eventsIngested:(n=e.events_ingested)!==null&&n!==void 0?n:0,payloadSizeBytes:(r=e.payload_size_bytes)!==null&&r!==void 0?r:0,serverUploadTime:(i=e.server_upload_time)!==null&&i!==void 0?i:0}};case ge.Invalid:return{status:x,statusCode:T,body:{error:(s=e.error)!==null&&s!==void 0?s:"",missingField:(o=e.missing_field)!==null&&o!==void 0?o:"",eventsWithInvalidFields:(a=e.events_with_invalid_fields)!==null&&a!==void 0?a:{},eventsWithMissingFields:(u=e.events_with_missing_fields)!==null&&u!==void 0?u:{},eventsWithInvalidIdLengths:(c=e.events_with_invalid_id_lengths)!==null&&c!==void 0?c:{},epsThreshold:(d=e.eps_threshold)!==null&&d!==void 0?d:0,exceededDailyQuotaDevices:(f=e.exceeded_daily_quota_devices)!==null&&f!==void 0?f:{},silencedDevices:(v=e.silenced_devices)!==null&&v!==void 0?v:[],silencedEvents:(h=e.silenced_events)!==null&&h!==void 0?h:[],throttledDevices:(y=e.throttled_devices)!==null&&y!==void 0?y:{},throttledEvents:(m=e.throttled_events)!==null&&m!==void 0?m:[]}};case ge.PayloadTooLarge:return{status:x,statusCode:T,body:{error:(_=e.error)!==null&&_!==void 0?_:""}};case ge.RateLimit:return{status:x,statusCode:T,body:{error:(g=e.error)!==null&&g!==void 0?g:"",epsThreshold:(b=e.eps_threshold)!==null&&b!==void 0?b:0,throttledDevices:(E=e.throttled_devices)!==null&&E!==void 0?E:{},throttledUsers:(A=e.throttled_users)!==null&&A!==void 0?A:{},exceededDailyQuotaDevices:(I=e.exceeded_daily_quota_devices)!==null&&I!==void 0?I:{},exceededDailyQuotaUsers:(L=e.exceeded_daily_quota_users)!==null&&L!==void 0?L:{},throttledEvents:(R=e.throttled_events)!==null&&R!==void 0?R:[]}};case ge.Timeout:default:return{status:x,statusCode:T}}},t.prototype.buildStatus=function(e){return e>=200&&e<300?ge.Success:e===429?ge.RateLimit:e===413?ge.PayloadTooLarge:e===408?ge.Timeout:e>=400&&e<500?ge.Invalid:e>=500?ge.Failed:ge.Unknown},t}(),Ue=function(){var t="ampIntegrationContext";if(typeof globalThis<"u"&&typeof globalThis[t]<"u")return globalThis[t];if(typeof globalThis<"u")return globalThis;if(typeof window<"u")return window;if(typeof self<"u")return self;if(typeof global<"u")return global},fn=function(){var t,e=Ue();if(!(!((t=e==null?void 0:e.location)===null||t===void 0)&&t.search))return{};var n=e.location.search.substring(1).split("&").filter(Boolean),r=n.reduce(function(i,s){var o=s.split("=",2),a=cs(o[0]),u=cs(o[1]);return u&&(i[a]=u),i},{});return r},cs=function(t){t===void 0&&(t="");try{return decodeURIComponent(t)}catch{return""}},Ml="utm_campaign",Bl="utm_content",zl="utm_id",jl="utm_medium",$l="utm_source",Wl="utm_term",ls="dclid",ds="fbclid",fs="gbraid",hs="gclid",ps="ko_click_id",gs="li_fat_id",ms="msclkid",vs="rtd_cid",_s="ttclid",ys="twclid",bs="wbraid",hn={utm_campaign:void 0,utm_content:void 0,utm_id:void 0,utm_medium:void 0,utm_source:void 0,utm_term:void 0,referrer:void 0,referring_domain:void 0,dclid:void 0,gbraid:void 0,gclid:void 0,fbclid:void 0,ko_click_id:void 0,li_fat_id:void 0,msclkid:void 0,rtd_cid:void 0,ttclid:void 0,twclid:void 0,wbraid:void 0},ws=function(){function t(){}return t.prototype.parse=function(){return Q(this,void 0,void 0,function(){return ee(this,function(e){return[2,re(re(re(re({},hn),this.getUtmParam()),this.getReferrer()),this.getClickIds())]})})},t.prototype.getUtmParam=function(){var e=fn(),n=e[Ml],r=e[Bl],i=e[zl],s=e[jl],o=e[$l],a=e[Wl];return{utm_campaign:n,utm_content:r,utm_id:i,utm_medium:s,utm_source:o,utm_term:a}},t.prototype.getReferrer=function(){var e,n,r={referrer:void 0,referring_domain:void 0};try{r.referrer=document.referrer||void 0,r.referring_domain=(n=(e=r.referrer)===null||e===void 0?void 0:e.split("/")[2])!==null&&n!==void 0?n:void 0}catch{}return r},t.prototype.getClickIds=function(){var e,n=fn();return e={},e[ls]=n[ls],e[ds]=n[ds],e[fs]=n[fs],e[hs]=n[hs],e[ps]=n[ps],e[gs]=n[gs],e[ms]=n[ms],e[vs]=n[vs],e[_s]=n[_s],e[ys]=n[ys],e[bs]=n[bs],e},t}(),Es=function(t,e,n){return e===void 0&&(e=""),n===void 0&&(n=10),[an,e,t.substring(0,n)].filter(Boolean).join("_")},ql=function(t){return"".concat(an.toLowerCase(),"_").concat(t.substring(0,6))},Ss=function(t){var e=t.split(".");return e.length<=2?t:e.slice(e.length-2,e.length).join(".")},Hl=function(t){return Object.values(t).every(function(e){return!e})},Gl=function(t,e,n,r){r===void 0&&(r=!0),t.referrer;var i=t.referring_domain,s=pr(t,["referrer","referring_domain"]),o=e||{};o.referrer;var a=o.referring_domain,u=pr(o,["referrer","referring_domain"]);if(Vl(n.excludeReferrers,t.referring_domain)||!r&&Hl(t)&&e)return!1;var c=JSON.stringify(s)!==JSON.stringify(u),d=Ss(i||"")!==Ss(a||"");return!e||c||d},Vl=function(t,e){return t===void 0&&(t=[]),e===void 0&&(e=""),t.some(function(n){return n instanceof RegExp?n.test(e):n===e})},Zl=function(t,e){var n=re(re({},hn),t),r=Object.entries(n).reduce(function(i,s){var o,a=Te(s,2),u=a[0],c=a[1];return i.setOnce("initial_".concat(u),(o=c??e.initialEmptyValue)!==null&&o!==void 0?o:"EMPTY"),c?i.set(u,c):i.unset(u)},new un);return ss(r)},Kl=function(t){var e=t;return e?(e.startsWith(".")&&(e=e.substring(1)),[new RegExp("".concat(e.replace(".","\\."),"$"))]):[]},Yl=function(t,e,n){return n===void 0&&(n=10),[an,e,t.substring(0,n)].filter(Boolean).join("_")},ks=function(t,e){e===void 0&&(e=Date.now());var n=Date.now(),r=n-e;return r>t},Xl=function(){function t(e,n){var r;this.shouldTrackNewCampaign=!1,this.options=re({initialEmptyValue:"EMPTY",resetSessionOnNewCampaign:!1,excludeReferrers:Kl((r=n.cookieOptions)===null||r===void 0?void 0:r.domain)},e),this.storage=n.cookieStorage,this.storageKey=Yl(n.apiKey,"MKTG"),this.currentCampaign=hn,this.sessionTimeout=n.sessionTimeout,this.lastEventTime=n.lastEventTime,n.loggerProvider.log("Installing web attribution tracking.")}return t.prototype.init=function(){return Q(this,void 0,void 0,function(){var e,n;return ee(this,function(r){switch(r.label){case 0:return[4,this.fetchCampaign()];case 1:return n=Te.apply(void 0,[r.sent(),2]),this.currentCampaign=n[0],this.previousCampaign=n[1],e=this.lastEventTime?ks(this.sessionTimeout,this.lastEventTime):!0,Gl(this.currentCampaign,this.previousCampaign,this.options,e)?(this.shouldTrackNewCampaign=!0,[4,this.storage.set(this.storageKey,this.currentCampaign)]):[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}})})},t.prototype.fetchCampaign=function(){return Q(this,void 0,void 0,function(){return ee(this,function(e){switch(e.label){case 0:return[4,Promise.all([new ws().parse(),this.storage.get(this.storageKey)])];case 1:return[2,e.sent()]}})})},t.prototype.generateCampaignEvent=function(e){this.shouldTrackNewCampaign=!1;var n=Zl(this.currentCampaign,this.options);return e&&(n.event_id=e),n},t.prototype.shouldSetSessionIdOnNewCampaign=function(){return this.shouldTrackNewCampaign&&!!this.options.resetSessionOnNewCampaign},t}(),vr=function(){function t(e){this.options=re({},e)}return t.prototype.isEnabled=function(){return Q(this,void 0,void 0,function(){var e,n,r;return ee(this,function(i){switch(i.label){case 0:if(!Ue())return[2,!1];t.testValue=String(Date.now()),e=new t(this.options),n="AMP_TEST",i.label=1;case 1:return i.trys.push([1,4,5,7]),[4,e.set(n,t.testValue)];case 2:return i.sent(),[4,e.get(n)];case 3:return r=i.sent(),[2,r===t.testValue];case 4:return i.sent(),[2,!1];case 5:return[4,e.remove(n)];case 6:return i.sent(),[7];case 7:return[2]}})})},t.prototype.get=function(e){var n;return Q(this,void 0,void 0,function(){var r,i;return ee(this,function(s){switch(s.label){case 0:return[4,this.getRaw(e)];case 1:if(r=s.sent(),!r)return[2,void 0];try{return i=(n=Jl(r))!==null&&n!==void 0?n:Ql(r),i===void 0?(console.error("Amplitude Logger [Error]: Failed to decode cookie value for key: ".concat(e,", value: ").concat(r)),[2,void 0]):[2,JSON.parse(i)]}catch{return console.error("Amplitude Logger [Error]: Failed to parse cookie value for key: ".concat(e,", value: ").concat(r)),[2,void 0]}return[2]}})})},t.prototype.getRaw=function(e){var n,r;return Q(this,void 0,void 0,function(){var i,s,o;return ee(this,function(a){return i=Ue(),s=(r=(n=i==null?void 0:i.document)===null||n===void 0?void 0:n.cookie.split("; "))!==null&&r!==void 0?r:[],o=s.find(function(u){return u.indexOf(e+"=")===0}),o?[2,o.substring(e.length+1)]:[2,void 0]})})},t.prototype.set=function(e,n){var r;return Q(this,void 0,void 0,function(){var i,s,o,a,u,c,d;return ee(this,function(f){try{i=(r=this.options.expirationDays)!==null&&r!==void 0?r:0,s=n!==null?i:-1,o=void 0,s&&(a=new Date,a.setTime(a.getTime()+s*24*60*60*1e3),o=a),u="".concat(e,"=").concat(btoa(encodeURIComponent(JSON.stringify(n)))),o&&(u+="; expires=".concat(o.toUTCString())),u+="; path=/",this.options.domain&&(u+="; domain=".concat(this.options.domain)),this.options.secure&&(u+="; Secure"),this.options.sameSite&&(u+="; SameSite=".concat(this.options.sameSite)),c=Ue(),c&&(c.document.cookie=u)}catch(v){d=v instanceof Error?v.message:String(v),console.error("Amplitude Logger [Error]: Failed to set cookie for key: ".concat(e,". Error: ").concat(d))}return[2]})})},t.prototype.remove=function(e){return Q(this,void 0,void 0,function(){return ee(this,function(n){switch(n.label){case 0:return[4,this.set(e,null)];case 1:return n.sent(),[2]}})})},t.prototype.reset=function(){return Q(this,void 0,void 0,function(){return ee(this,function(e){return[2]})})},t}(),Jl=function(t){try{return decodeURIComponent(atob(t))}catch{return}},Ql=function(t){try{return decodeURIComponent(atob(decodeURIComponent(t)))}catch{return}},ed=function(t){ct(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.send=function(n,r){return Q(this,void 0,void 0,function(){var i,s,o;return ee(this,function(a){switch(a.label){case 0:if(typeof fetch>"u")throw new Error("FetchTransport is not supported");return i={headers:{"Content-Type":"application/json",Accept:"*/*"},body:JSON.stringify(r),method:"POST"},[4,fetch(n,i)];case 1:return s=a.sent(),[4,s.text()];case 2:o=a.sent();try{return[2,this.buildResponse(JSON.parse(o))]}catch{return[2,this.buildResponse({code:s.status})]}return[2]}})})},e}(mr),td=function(){function t(){}return t.prototype.getApplicationContext=function(){return{versionName:this.versionName,language:nd(),platform:"Web",os:void 0,deviceModel:void 0}},t}(),nd=function(){return typeof navigator<"u"&&(navigator.languages&&navigator.languages[0]||navigator.language)||""},rd=function(){function t(){this.queue=[]}return t.prototype.logEvent=function(e){this.receiver?this.receiver(e):this.queue.length<512&&this.queue.push(e)},t.prototype.setEventReceiver=function(e){this.receiver=e,this.queue.length>0&&(this.queue.forEach(function(n){e(n)}),this.queue=[])},t}(),Qe=function(){return Qe=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Qe.apply(this,arguments)};function pn(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function As(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}typeof SuppressedError=="function"&&SuppressedError;var gn=function(t,e){var n,r,i=["string","number","boolean","undefined"],s=typeof t,o=typeof e;if(s!==o)return!1;try{for(var a=pn(i),u=a.next();!u.done;u=a.next()){var c=u.value;if(c===s)return t===e}}catch(_){n={error:_}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}if(t==null&&e==null)return!0;if(t==null||e==null||t.length!==e.length)return!1;var d=Array.isArray(t),f=Array.isArray(e);if(d!==f)return!1;if(d&&f){for(var v=0;v<t.length;v++)if(!gn(t[v],e[v]))return!1}else{var h=Object.keys(t).sort(),y=Object.keys(e).sort();if(!gn(h,y))return!1;var m=!0;return Object.keys(t).forEach(function(_){gn(t[_],e[_])||(m=!1)}),m}return!0},id="$set",sd="$unset",od="$clearAll";Object.entries||(Object.entries=function(t){for(var e=Object.keys(t),n=e.length,r=new Array(n);n--;)r[n]=[e[n],t[e[n]]];return r});var ad=function(){function t(){this.identity={userProperties:{}},this.listeners=new Set}return t.prototype.editIdentity=function(){var e=this,n=Qe({},this.identity.userProperties),r=Qe(Qe({},this.identity),{userProperties:n});return{setUserId:function(i){return r.userId=i,this},setDeviceId:function(i){return r.deviceId=i,this},setUserProperties:function(i){return r.userProperties=i,this},setOptOut:function(i){return r.optOut=i,this},updateUserProperties:function(i){var s,o,a,u,c,d,f=r.userProperties||{};try{for(var v=pn(Object.entries(i)),h=v.next();!h.done;h=v.next()){var y=As(h.value,2),m=y[0],_=y[1];switch(m){case id:try{for(var g=(a=void 0,pn(Object.entries(_))),b=g.next();!b.done;b=g.next()){var E=As(b.value,2),A=E[0],I=E[1];f[A]=I}}catch(T){a={error:T}}finally{try{b&&!b.done&&(u=g.return)&&u.call(g)}finally{if(a)throw a.error}}break;case sd:try{for(var L=(c=void 0,pn(Object.keys(_))),R=L.next();!R.done;R=L.next()){var A=R.value;delete f[A]}}catch(T){c={error:T}}finally{try{R&&!R.done&&(d=L.return)&&d.call(L)}finally{if(c)throw c.error}}break;case od:f={};break}}}catch(T){s={error:T}}finally{try{h&&!h.done&&(o=v.return)&&o.call(v)}finally{if(s)throw s.error}}return r.userProperties=f,this},commit:function(){return e.setIdentity(r),this}}},t.prototype.getIdentity=function(){return Qe({},this.identity)},t.prototype.setIdentity=function(e){var n=Qe({},this.identity);this.identity=Qe({},e),gn(n,this.identity)||this.listeners.forEach(function(r){r(e)})},t.prototype.addIdentityListener=function(e){this.listeners.add(e)},t.prototype.removeIdentityListener=function(e){this.listeners.delete(e)},t}(),Rt=typeof globalThis<"u"?globalThis:typeof global<"u"?global:self,ud=function(){function t(){this.identityStore=new ad,this.eventBridge=new rd,this.applicationContextProvider=new td}return t.getInstance=function(e){return Rt.analyticsConnectorInstances||(Rt.analyticsConnectorInstances={}),Rt.analyticsConnectorInstances[e]||(Rt.analyticsConnectorInstances[e]=new t),Rt.analyticsConnectorInstances[e]},t}(),Ot=function(t){return t===void 0&&(t="$default_instance"),ud.getInstance(t)},cd=function(t,e){Ot(e).identityStore.editIdentity().setUserId(t).commit()},ld=function(t,e){Ot(e).identityStore.editIdentity().setDeviceId(t).commit()},dd=function(){function t(){this.name="identity",this.type="before",this.identityStore=Ot().identityStore}return t.prototype.execute=function(e){return Q(this,void 0,void 0,function(){var n;return ee(this,function(r){return n=e.user_properties,n&&this.identityStore.editIdentity().updateUserProperties(n).commit(),[2,e]})})},t.prototype.setup=function(e){return Q(this,void 0,void 0,function(){return ee(this,function(n){return e.instanceName&&(this.identityStore=Ot(e.instanceName).identityStore),[2]})})},t}(),fd=function(){var t,e,n,r;if(typeof navigator>"u")return"";var i=navigator.userLanguage;return(r=(n=(e=(t=navigator.languages)===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:navigator.language)!==null&&n!==void 0?n:i)!==null&&r!==void 0?r:""},Pt=function(t,e){return typeof t=="boolean"?t:(t==null?void 0:t[e])!==!1},xs=function(t){return Pt(t,"attribution")},hd=function(t){return Pt(t,"fileDownloads")},pd=function(t){return Pt(t,"formInteractions")},Is=function(t){return Pt(t,"pageViews")},Ts=function(t){return Pt(t,"sessions")},gd=function(t){var e=function(){return!1},n=void 0,r,i=t.pageCounter,s=Is(t.defaultTracking);return s&&(e=void 0,r=void 0,t.defaultTracking&&typeof t.defaultTracking=="object"&&t.defaultTracking.pageViews&&typeof t.defaultTracking.pageViews=="object"&&("trackOn"in t.defaultTracking.pageViews&&(e=t.defaultTracking.pageViews.trackOn),"trackHistoryChanges"in t.defaultTracking.pageViews&&(n=t.defaultTracking.pageViews.trackHistoryChanges),"eventType"in t.defaultTracking.pageViews&&t.defaultTracking.pageViews.eventType&&(r=t.defaultTracking.pageViews.eventType))),{trackOn:e,trackHistoryChanges:n,eventType:r,pageCounter:i}},md=function(t){return xs(t.defaultTracking)&&t.defaultTracking&&typeof t.defaultTracking=="object"&&t.defaultTracking.attribution&&typeof t.defaultTracking.attribution=="object"?re({},t.defaultTracking.attribution):{}},_r=function(t,e){for(var n=0;n<e.length;n++){var r=e[n],i=r.name,s=r.args,o=r.resolve,a=t&&t[i];if(typeof a=="function"){var u=a.apply(t,s);typeof o=="function"&&o(u==null?void 0:u.promise)}}return t},yr=function(t){var e=t;return e&&e._q!==void 0},vd="2.9.2",_d="Web",yd="$remote",bd=function(){function t(){this.name="@amplitude/plugin-context-browser",this.type="before",this.library="amplitude-ts/".concat(vd),typeof navigator<"u"&&(this.userAgent=navigator.userAgent)}return t.prototype.setup=function(e){return this.config=e,Promise.resolve(void 0)},t.prototype.execute=function(e){var n,r;return Q(this,void 0,void 0,function(){var i,s,o,a;return ee(this,function(u){return i=new Date().getTime(),s=(n=this.config.lastEventId)!==null&&n!==void 0?n:-1,o=(r=e.event_id)!==null&&r!==void 0?r:s+1,this.config.lastEventId=o,e.time||(this.config.lastEventTime=i),a=re(re(re(re(re(re(re(re({user_id:this.config.userId,device_id:this.config.deviceId,session_id:this.config.sessionId,time:i},this.config.appVersion&&{app_version:this.config.appVersion}),this.config.trackingOptions.platform&&{platform:_d}),this.config.trackingOptions.language&&{language:fd()}),this.config.trackingOptions.ipAddress&&{ip:yd}),{insert_id:Et(),partner_id:this.config.partnerId,plan:this.config.plan}),this.config.ingestionMetadata&&{ingestion_metadata:{source_name:this.config.ingestionMetadata.sourceName,source_version:this.config.ingestionMetadata.sourceVersion}}),e),{event_id:o,library:this.library,user_agent:this.userAgent}),[2,a]})})},t}(),Cs=function(){function t(e){this.storage=e}return t.prototype.isEnabled=function(){return Q(this,void 0,void 0,function(){var e,n,r,i;return ee(this,function(s){switch(s.label){case 0:if(!this.storage)return[2,!1];e=String(Date.now()),n=new t(this.storage),r="AMP_TEST",s.label=1;case 1:return s.trys.push([1,4,5,7]),[4,n.set(r,e)];case 2:return s.sent(),[4,n.get(r)];case 3:return i=s.sent(),[2,i===e];case 4:return s.sent(),[2,!1];case 5:return[4,n.remove(r)];case 6:return s.sent(),[7];case 7:return[2]}})})},t.prototype.get=function(e){return Q(this,void 0,void 0,function(){var n;return ee(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.getRaw(e)];case 1:return n=r.sent(),n?[2,JSON.parse(n)]:[2,void 0];case 2:return r.sent(),console.error("[Amplitude] Error: Could not get value from storage"),[2,void 0];case 3:return[2]}})})},t.prototype.getRaw=function(e){var n;return Q(this,void 0,void 0,function(){return ee(this,function(r){return[2,((n=this.storage)===null||n===void 0?void 0:n.getItem(e))||void 0]})})},t.prototype.set=function(e,n){var r;return Q(this,void 0,void 0,function(){return ee(this,function(i){try{(r=this.storage)===null||r===void 0||r.setItem(e,JSON.stringify(n))}catch{}return[2]})})},t.prototype.remove=function(e){var n;return Q(this,void 0,void 0,function(){return ee(this,function(r){try{(n=this.storage)===null||n===void 0||n.removeItem(e)}catch{}return[2]})})},t.prototype.reset=function(){var e;return Q(this,void 0,void 0,function(){return ee(this,function(n){try{(e=this.storage)===null||e===void 0||e.clear()}catch{}return[2]})})},t}(),mn=1e3,Rs=function(t){ct(e,t);function e(n){var r=this,i;return r=t.call(this,(i=Ue())===null||i===void 0?void 0:i.localStorage)||this,r.loggerProvider=n==null?void 0:n.loggerProvider,r}return e.prototype.set=function(n,r){var i;return Q(this,void 0,void 0,function(){var s;return ee(this,function(o){switch(o.label){case 0:return Array.isArray(r)&&r.length>mn?(s=r.length-mn,[4,t.prototype.set.call(this,n,r.slice(0,mn))]):[3,2];case 1:return o.sent(),(i=this.loggerProvider)===null||i===void 0||i.error("Failed to save ".concat(s," events because the queue length exceeded ").concat(mn,".")),[3,4];case 2:return[4,t.prototype.set.call(this,n,r)];case 3:o.sent(),o.label=4;case 4:return[2]}})})},e}(Cs),wd=function(t){ct(e,t);function e(){var n;return t.call(this,(n=Ue())===null||n===void 0?void 0:n.sessionStorage)||this}return e}(Cs),Ed=function(t){ct(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={done:4},n}return e.prototype.send=function(n,r){return Q(this,void 0,void 0,function(){var i=this;return ee(this,function(s){return[2,new Promise(function(o,a){typeof XMLHttpRequest>"u"&&a(new Error("XHRTransport is not supported."));var u=new XMLHttpRequest;u.open("POST",n,!0),u.onreadystatechange=function(){if(u.readyState===i.state.done){var c=u.responseText;try{o(i.buildResponse(JSON.parse(c)))}catch{o(i.buildResponse({code:u.status}))}}},u.setRequestHeader("Content-Type","application/json"),u.setRequestHeader("Accept","*/*"),u.send(JSON.stringify(r))})]})})},e}(mr),Sd=function(t){ct(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.send=function(n,r){return Q(this,void 0,void 0,function(){var i=this;return ee(this,function(s){return[2,new Promise(function(o,a){var u=Ue();if(!(u!=null&&u.navigator.sendBeacon))throw new Error("SendBeaconTransport is not supported");try{var c=JSON.stringify(r),d=u.navigator.sendBeacon(n,JSON.stringify(r));return o(d?i.buildResponse({code:200,events_ingested:r.events.length,payload_size_bytes:c.length,server_upload_time:Date.now()}):i.buildResponse({code:500}))}catch(f){a(f)}})]})})},e}(mr),kd=function(t,e,n){return n===void 0&&(n=!0),Q(void 0,void 0,void 0,function(){var r,i,s,o,a,u,c,d,f;return ee(this,function(v){switch(v.label){case 0:return r=ql(t),[4,e.getRaw(r)];case 1:return i=v.sent(),i?n?[4,e.remove(r)]:[3,3]:[2,{optOut:!1}];case 2:v.sent(),v.label=3;case 3:return s=Te(i.split("."),6),o=s[0],a=s[1],u=s[2],c=s[3],d=s[4],f=s[5],[2,{deviceId:o,userId:Ad(a),sessionId:br(c),lastEventId:br(f),lastEventTime:br(d),optOut:!!u}]}})})},br=function(t){var e=parseInt(t,32);if(!isNaN(e))return e},Ad=function(t){if(!(!atob||!escape||!t))try{return decodeURIComponent(escape(atob(t)))}catch{return}},Fe="[Amplitude]",Os="".concat(Fe," Form Started"),xd="".concat(Fe," Form Submitted"),Id="".concat(Fe," File Downloaded"),Ps="session_start",Ds="session_end",Td="".concat(Fe," File Extension"),Cd="".concat(Fe," File Name"),Rd="".concat(Fe," Link ID"),Od="".concat(Fe," Link Text"),Pd="".concat(Fe," Link URL"),wr="".concat(Fe," Form ID"),Er="".concat(Fe," Form Name"),Sr="".concat(Fe," Form Destination"),vn="cookie",Dd="US",Nd=function(t){ct(e,t);function e(n,r,i,s,o,a,u,c,d,f,v,h,y,m,_,g,b,E,A,I,L,R,T,x,M,q,k,U,p,P,X,B){i===void 0&&(i=new us),s===void 0&&(s={domain:"",expiration:365,sameSite:"Lax",secure:!1,upgrade:!0}),u===void 0&&(u=1e3),c===void 0&&(c=5),d===void 0&&(d=30),f===void 0&&(f=vn),_===void 0&&(_=new os),g===void 0&&(g=Ce.Warn),E===void 0&&(E=!1),A===void 0&&(A=!1),R===void 0&&(R=""),T===void 0&&(T=Dd),M===void 0&&(M=30*60*1e3),q===void 0&&(q=new Rs({loggerProvider:_})),k===void 0&&(k={ipAddress:!0,language:!0,platform:!0}),U===void 0&&(U="fetch"),p===void 0&&(p=!1);var H=t.call(this,{apiKey:n,storageProvider:q,transportProvider:Ns(U)})||this;return H.apiKey=n,H.appVersion=r,H.cookieOptions=s,H.defaultTracking=o,H.flushIntervalMillis=u,H.flushMaxRetries=c,H.flushQueueSize=d,H.identityStorage=f,H.ingestionMetadata=v,H.instanceName=h,H.loggerProvider=_,H.logLevel=g,H.minIdLength=b,H.offline=E,H.partnerId=I,H.plan=L,H.serverUrl=R,H.serverZone=T,H.sessionTimeout=M,H.storageProvider=q,H.trackingOptions=k,H.transport=U,H.useBatch=p,H._optOut=!1,H._cookieStorage=i,H.deviceId=a,H.lastEventId=y,H.lastEventTime=m,H.optOut=A,H.sessionId=x,H.pageCounter=X,H.userId=P,H.debugLogsEnabled=B,H.loggerProvider.enable(B?Ce.Debug:H.logLevel),H}return Object.defineProperty(e.prototype,"cookieStorage",{get:function(){return this._cookieStorage},set:function(n){this._cookieStorage!==n&&(this._cookieStorage=n,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"deviceId",{get:function(){return this._deviceId},set:function(n){this._deviceId!==n&&(this._deviceId=n,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userId",{get:function(){return this._userId},set:function(n){this._userId!==n&&(this._userId=n,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sessionId",{get:function(){return this._sessionId},set:function(n){this._sessionId!==n&&(this._sessionId=n,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"optOut",{get:function(){return this._optOut},set:function(n){this._optOut!==n&&(this._optOut=n,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastEventTime",{get:function(){return this._lastEventTime},set:function(n){this._lastEventTime!==n&&(this._lastEventTime=n,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastEventId",{get:function(){return this._lastEventId},set:function(n){this._lastEventId!==n&&(this._lastEventId=n,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageCounter",{get:function(){return this._pageCounter},set:function(n){this._pageCounter!==n&&(this._pageCounter=n,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"debugLogsEnabled",{set:function(n){this._debugLogsEnabled!==n&&(this._debugLogsEnabled=n,this.updateStorage())},enumerable:!1,configurable:!0}),e.prototype.updateStorage=function(){var n={deviceId:this._deviceId,userId:this._userId,sessionId:this._sessionId,optOut:this._optOut,lastEventTime:this._lastEventTime,lastEventId:this._lastEventId,pageCounter:this._pageCounter,debugLogsEnabled:this._debugLogsEnabled};this.cookieStorage.set(Es(this.apiKey),n)},e}(Ol),Ld=function(t,e,n){return e===void 0&&(e={}),Q(void 0,void 0,void 0,function(){var r,i,s,o,a,u,c,d,f,v,h,y,m,_,g,b,E,A,I,L,R,T,x,M,q,k,U,p,P,X,B,H,W,J,N,D,te,K,Z,de,ye,se;return ee(this,function(ae){switch(ae.label){case 0:return r=e.identityStorage||vn,A={},r===vn?[3,1]:(s="",[3,5]);case 1:return(L=(I=e.cookieOptions)===null||I===void 0?void 0:I.domain)!==null&&L!==void 0?(o=L,[3,4]):[3,2];case 2:return[4,Fd()];case 3:o=ae.sent(),ae.label=4;case 4:s=o,ae.label=5;case 5:return i=re.apply(void 0,[(A.domain=s,A.expiration=365,A.sameSite="Lax",A.secure=!1,A.upgrade=!0,A),e.cookieOptions]),a=Ud(e.identityStorage,i),[4,kd(t,a,(T=(R=e.cookieOptions)===null||R===void 0?void 0:R.upgrade)!==null&&T!==void 0?T:!0)];case 6:return u=ae.sent(),[4,a.get(Es(t))];case 7:return c=ae.sent(),d=fn(),f=(U=(k=(q=(M=(x=e.deviceId)!==null&&x!==void 0?x:d.ampDeviceId)!==null&&M!==void 0?M:d.deviceId)!==null&&q!==void 0?q:c==null?void 0:c.deviceId)!==null&&k!==void 0?k:u.deviceId)!==null&&U!==void 0?U:Et(),v=(p=c==null?void 0:c.lastEventId)!==null&&p!==void 0?p:u.lastEventId,h=(P=c==null?void 0:c.lastEventTime)!==null&&P!==void 0?P:u.lastEventTime,y=(B=(X=e.optOut)!==null&&X!==void 0?X:c==null?void 0:c.optOut)!==null&&B!==void 0?B:u.optOut,m=(H=c==null?void 0:c.sessionId)!==null&&H!==void 0?H:u.sessionId,_=(J=(W=e.userId)!==null&&W!==void 0?W:c==null?void 0:c.userId)!==null&&J!==void 0?J:u.userId,n.previousSessionDeviceId=(N=c==null?void 0:c.deviceId)!==null&&N!==void 0?N:u.deviceId,n.previousSessionUserId=(D=c==null?void 0:c.userId)!==null&&D!==void 0?D:u.userId,g={ipAddress:(K=(te=e.trackingOptions)===null||te===void 0?void 0:te.ipAddress)!==null&&K!==void 0?K:!0,language:(de=(Z=e.trackingOptions)===null||Z===void 0?void 0:Z.language)!==null&&de!==void 0?de:!0,platform:(se=(ye=e.trackingOptions)===null||ye===void 0?void 0:ye.platform)!==null&&se!==void 0?se:!0},b=c==null?void 0:c.pageCounter,E=c==null?void 0:c.debugLogsEnabled,[2,new Nd(t,e.appVersion,a,i,e.defaultTracking,f,e.flushIntervalMillis,e.flushMaxRetries,e.flushQueueSize,r,e.ingestionMetadata,e.instanceName,v,h,e.loggerProvider,e.logLevel,e.minIdLength,e.offline,y,e.partnerId,e.plan,e.serverUrl,e.serverZone,m,e.sessionTimeout,e.storageProvider,g,e.transport,e.useBatch,_,b,E)]}})})},Ud=function(t,e){switch(t===void 0&&(t=vn),e===void 0&&(e={}),t){case"localStorage":return new Rs;case"sessionStorage":return new wd;case"none":return new us;case"cookie":default:return new vr(re(re({},e),{expirationDays:e.expiration}))}},Ns=function(t){return t==="xhr"?new Ed:t==="beacon"?new Sd:new ed},Fd=function(t){return Q(void 0,void 0,void 0,function(){var e,n,r,i,s,s,o,a,u,c;return ee(this,function(d){switch(d.label){case 0:return[4,new vr().isEnabled()];case 1:if(!d.sent()||typeof location>"u"||!location.hostname)return[2,""];for(e=location.hostname,n=e.split("."),r=[],i="AMP_TLDTEST",s=n.length-2;s>=0;--s)r.push(n.slice(s).join("."));s=0,d.label=2;case 2:return s<r.length?(o=r[s],a={domain:"."+o},u=new vr(a),[4,u.set(i,1)]):[3,7];case 3:return d.sent(),[4,u.get(i)];case 4:return c=d.sent(),c?[4,u.remove(i)]:[3,6];case 5:return d.sent(),[2,"."+o];case 6:return s++,[3,2];case 7:return[2,""]}})})},Md=function(t){var e={};for(var n in t){var r=t[n];r&&(e[n]=r)}return e},Bd="[Amplitude] Page Viewed",zd=function(t){t===void 0&&(t={});var e,n=Ue(),r=void 0,i,s,o=t.trackOn,a=t.trackHistoryChanges,u=t.eventType,c=u===void 0?Bd:u,d=function(g){var b=g;try{b=decodeURI(g)}catch(E){r==null||r.error("Malformed URI sequence: ",E)}return b},f=function(){return Q(void 0,void 0,void 0,function(){var g,b,E;return ee(this,function(A){switch(A.label){case 0:return g=d(typeof location<"u"&&location.href||""),E={event_type:c},b=[{}],[4,jd()];case 1:return[2,(E.event_properties=re.apply(void 0,[re.apply(void 0,b.concat([A.sent()])),{"[Amplitude] Page Domain":typeof location<"u"&&location.hostname||"","[Amplitude] Page Location":g,"[Amplitude] Page Path":typeof location<"u"&&d(location.pathname)||"","[Amplitude] Page Title":typeof document<"u"&&document.title||"","[Amplitude] Page URL":g.split("?")[0]}]),E)]}})})},v=function(){return typeof o>"u"||typeof o=="function"&&o()},h=typeof location<"u"?location.href:null,y=function(){return Q(void 0,void 0,void 0,function(){var g,b,E,A;return ee(this,function(I){switch(I.label){case 0:return g=location.href,b=Wd(a,g,h||"")&&v(),h=g,b?(r==null||r.log("Tracking page view event"),e!=null?[3,1]:[3,3]):[3,4];case 1:return A=(E=e).track,[4,f()];case 2:A.apply(E,[I.sent()]),I.label=3;case 3:I.label=4;case 4:return[2]}})})},m=function(){y()},_={name:"@amplitude/plugin-page-view-tracking-browser",type:"enrichment",setup:function(g,b){return Q(void 0,void 0,void 0,function(){var E,A;return ee(this,function(I){switch(I.label){case 0:return e=b,s=g,r=g.loggerProvider,r.log("Installing @amplitude/plugin-page-view-tracking-browser"),n&&(n.addEventListener("popstate",m),i=n.history.pushState,n.history.pushState=new Proxy(n.history.pushState,{apply:function(L,R,T){var x=Te(T,3),M=x[0],q=x[1],k=x[2];L.apply(R,[M,q,k]),y()}})),v()?(r.log("Tracking page view event"),A=(E=e).track,[4,f()]):[3,2];case 1:A.apply(E,[I.sent()]),I.label=2;case 2:return[2]}})})},execute:function(g){return Q(void 0,void 0,void 0,function(){var b;return ee(this,function(E){switch(E.label){case 0:return o==="attribution"&&$d(g)?(r==null||r.log("Enriching campaign event to page view event with campaign parameters"),[4,f()]):[3,2];case 1:b=E.sent(),g.event_type=b.event_type,g.event_properties=re(re({},g.event_properties),b.event_properties),E.label=2;case 2:return s&&g.event_type===c&&(s.pageCounter=s.pageCounter?s.pageCounter+1:1,g.event_properties=re(re({},g.event_properties),{"[Amplitude] Page Counter":s.pageCounter})),[2,g]}})})},teardown:function(){return Q(void 0,void 0,void 0,function(){return ee(this,function(g){return n&&(n.removeEventListener("popstate",m),i&&(n.history.pushState=i)),[2]})})}};return _},jd=function(){return Q(void 0,void 0,void 0,function(){var t;return ee(this,function(e){switch(e.label){case 0:return t=Md,[4,new ws().parse()];case 1:return[2,t.apply(void 0,[e.sent()])]}})})},$d=function(t){if(t.event_type==="$identify"&&t.user_properties){var e=t.user_properties,n=e[we.SET]||{},r=e[we.UNSET]||{},i=yt(yt([],Te(Object.keys(n)),!1),Te(Object.keys(r)),!1);return Object.keys(hn).every(function(s){return i.includes(s)})}return!1},Wd=function(t,e,n){switch(t){case"pathOnly":{if(n=="")return!0;var r=new URL(e),i=new URL(n),s=r.origin+r.pathname,o=i.origin+i.pathname;return s!==o}default:return e!==n}},qd=function(){var t,e=[],n=function(c,d,f){c.addEventListener(d,f),e.push({element:c,type:d,handler:f})},r=function(){e.forEach(function(c){var d=c.element,f=c.type,v=c.handler;d==null||d.removeEventListener(f,v)}),e=[]},i="@amplitude/plugin-form-interaction-tracking-browser",s="enrichment",o=function(c,d){return Q(void 0,void 0,void 0,function(){var f;return ee(this,function(v){return(f=Ue())===null||f===void 0||f.addEventListener("load",function(){if(!d){c.loggerProvider.warn("Form interaction tracking requires a later version of @amplitude/analytics-browser. Form interaction events are not tracked.");return}if(!(typeof document>"u")){var h=function(m){var _=!1;n(m,"change",function(){var g;_||d.track(Os,(g={},g[wr]=St(m.id),g[Er]=St(m.name),g[Sr]=m.action,g)),_=!0}),n(m,"submit",function(){var g,b;_||d.track(Os,(g={},g[wr]=St(m.id),g[Er]=St(m.name),g[Sr]=m.action,g)),d.track(xd,(b={},b[wr]=St(m.id),b[Er]=St(m.name),b[Sr]=m.action,b)),_=!1})},y=Array.from(document.getElementsByTagName("form"));y.forEach(h),typeof MutationObserver<"u"&&(t=new MutationObserver(function(m){m.forEach(function(_){_.addedNodes.forEach(function(g){g.nodeName==="FORM"&&h(g),"querySelectorAll"in g&&typeof g.querySelectorAll=="function"&&Array.from(g.querySelectorAll("form")).map(h)})})}),t.observe(document.body,{subtree:!0,childList:!0}))}}),[2]})})},a=function(c){return Q(void 0,void 0,void 0,function(){return ee(this,function(d){return[2,c]})})},u=function(){return Q(void 0,void 0,void 0,function(){return ee(this,function(c){return t==null||t.disconnect(),r(),[2]})})};return{name:i,type:s,setup:o,execute:a,teardown:u}},St=function(t){if(typeof t=="string")return t},Hd=function(){var t,e=[],n=function(c,d,f){c.addEventListener(d,f),e.push({element:c,type:d,handler:f})},r=function(){e.forEach(function(c){var d=c.element,f=c.type,v=c.handler;d==null||d.removeEventListener(f,v)}),e=[]},i="@amplitude/plugin-file-download-tracking-browser",s="enrichment",o=function(c,d){return Q(void 0,void 0,void 0,function(){var f;return ee(this,function(v){return(f=Ue())===null||f===void 0||f.addEventListener("load",function(){if(!d){c.loggerProvider.warn("File download tracking requires a later version of @amplitude/analytics-browser. File download events are not tracked.");return}if(!(typeof document>"u")){var h=function(_){var g;try{g=new URL(_.href,window.location.href)}catch{return}var b=y.exec(g.href),E=b==null?void 0:b[1];E&&n(_,"click",function(){var A;E&&d.track(Id,(A={},A[Td]=E,A[Cd]=g.pathname,A[Rd]=_.id,A[Od]=_.text,A[Pd]=_.href,A))})},y=/\.(pdf|xlsx?|docx?|txt|rtf|csv|exe|key|pp(s|t|tx)|7z|pkg|rar|gz|zip|avi|mov|mp4|mpe?g|wmv|midi?|mp3|wav|wma)$/,m=Array.from(document.getElementsByTagName("a"));m.forEach(h),typeof MutationObserver<"u"&&(t=new MutationObserver(function(_){_.forEach(function(g){g.addedNodes.forEach(function(b){b.nodeName==="A"&&h(b),"querySelectorAll"in b&&typeof b.querySelectorAll=="function"&&Array.from(b.querySelectorAll("a")).map(h)})})}),t.observe(document.body,{subtree:!0,childList:!0}))}}),[2]})})},a=function(c){return Q(void 0,void 0,void 0,function(){return ee(this,function(d){return[2,c]})})},u=function(){return Q(void 0,void 0,void 0,function(){return ee(this,function(c){return t==null||t.disconnect(),r(),[2]})})};return{name:i,type:s,setup:o,execute:a,teardown:u}},Ls=!1,Gd=function(t){if(!(Ls||t.defaultTracking!==void 0)){var e=`\`options.defaultTracking\` is set to undefined. This implicitly configures your Amplitude instance to track Page Views, Sessions, File Downloads, and Form Interactions. You can suppress this warning by explicitly setting a value to \`options.defaultTracking\`. The value must either be a boolean, to enable and disable all default events, or an object, for advanced configuration. For example:

amplitude.init(<YOUR_API_KEY>, {
  defaultTracking: true,
});

Visit https://www.docs.developers.amplitude.com/data/sdks/browser-2/#tracking-default-events for more details.`;t.loggerProvider.warn(e),Ls=!0}},Vd=function(){var t="@amplitude/plugin-network-checker-browser",e="before",n=Ue(),r=[],i=function(u,c){n&&(n.addEventListener(u,c),r.push({type:u,handler:c}))},s=function(){r.forEach(function(u){var c=u.type,d=u.handler;n&&n.removeEventListener(c,d)}),r=[]},o=function(u,c){return Q(void 0,void 0,void 0,function(){return ee(this,function(d){return u.offline=!navigator.onLine,i("online",function(){u.loggerProvider.debug("Network connectivity changed to online."),u.offline=!1,setTimeout(function(){c.flush()},u.flushIntervalMillis)}),i("offline",function(){u.loggerProvider.debug("Network connectivity changed to offline."),u.offline=!0}),[2]})})},a=function(){return Q(void 0,void 0,void 0,function(){return ee(this,function(u){return s(),[2]})})};return{name:t,type:e,setup:o,teardown:a}},Zd=function(t){ct(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.init=function(n,r,i){n===void 0&&(n="");var s,o;return arguments.length>2?(s=r,o=i):typeof r=="string"?(s=r,o=void 0):(s=r==null?void 0:r.userId,o=r),Ae(this._init(re(re({},o),{userId:s,apiKey:n})))},e.prototype._init=function(n){var r,i,s;return Q(this,void 0,void 0,function(){var o,a,u,c,d,f=this;return ee(this,function(v){switch(v.label){case 0:return this.initializing?[2]:(this.initializing=!0,[4,Ld(n.apiKey,n,this)]);case 1:return o=v.sent(),[4,t.prototype._init.call(this,o)];case 2:return v.sent(),this.logBrowserOptions(n),xs(this.config.defaultTracking)?(a=md(this.config),this.webAttribution=new Xl(a,this.config),[4,this.webAttribution.init()]):[3,4];case 3:v.sent(),v.label=4;case 4:return u=fn(),c=Number.isNaN(Number(u.ampSessionId))?void 0:Number(u.ampSessionId),this.setSessionId((s=(i=(r=n.sessionId)!==null&&r!==void 0?r:c)!==null&&i!==void 0?i:this.config.sessionId)!==null&&s!==void 0?s:Date.now()),d=Ot(n.instanceName),d.identityStore.setIdentity({userId:this.config.userId,deviceId:this.config.deviceId}),this.config.offline===vl?[3,6]:[4,this.add(Vd()).promise];case 5:v.sent(),v.label=6;case 6:return[4,this.add(new Ll).promise];case 7:return v.sent(),[4,this.add(new bd).promise];case 8:return v.sent(),[4,this.add(new dd).promise];case 9:return v.sent(),Gd(this.config),hd(this.config.defaultTracking)?(this.config.loggerProvider.debug("Adding file download tracking plugin"),[4,this.add(Hd()).promise]):[3,11];case 10:v.sent(),v.label=11;case 11:return pd(this.config.defaultTracking)?(this.config.loggerProvider.debug("Adding form interaction plugin"),[4,this.add(qd()).promise]):[3,13];case 12:v.sent(),v.label=13;case 13:return Is(this.config.defaultTracking)?(this.config.loggerProvider.debug("Adding page view tracking plugin"),[4,this.add(zd(gd(this.config))).promise]):[3,15];case 14:v.sent(),v.label=15;case 15:return this.initializing=!1,[4,this.runQueuedFunctions("dispatchQ")];case 16:return v.sent(),d.eventBridge.setEventReceiver(function(h){f.track(h.eventType,h.eventProperties)}),[2]}})})},e.prototype.getUserId=function(){var n;return(n=this.config)===null||n===void 0?void 0:n.userId},e.prototype.setUserId=function(n){if(!this.config){this.q.push(this.setUserId.bind(this,n));return}this.config.loggerProvider.debug("function setUserId: ",n),(n!==this.config.userId||n===void 0)&&(this.config.userId=n,cd(n,this.config.instanceName))},e.prototype.getDeviceId=function(){var n;return(n=this.config)===null||n===void 0?void 0:n.deviceId},e.prototype.setDeviceId=function(n){if(!this.config){this.q.push(this.setDeviceId.bind(this,n));return}this.config.loggerProvider.debug("function setDeviceId: ",n),this.config.deviceId=n,ld(n,this.config.instanceName)},e.prototype.reset=function(){this.setDeviceId(Et()),this.setUserId(void 0)},e.prototype.getSessionId=function(){var n;return(n=this.config)===null||n===void 0?void 0:n.sessionId},e.prototype.setSessionId=function(n){var r,i=[];if(!this.config)return this.q.push(this.setSessionId.bind(this,n)),Ae(Promise.resolve());if(n===this.config.sessionId)return Ae(Promise.resolve());this.config.loggerProvider.debug("function setSessionId: ",n);var s=this.getSessionId(),o=this.config.lastEventTime,a=(r=this.config.lastEventId)!==null&&r!==void 0?r:-1;this.config.sessionId=n,this.config.lastEventTime=void 0,this.config.pageCounter=0,Ts(this.config.defaultTracking)&&(s&&o&&i.push(this.track(Ds,void 0,{device_id:this.previousSessionDeviceId,event_id:++a,session_id:s,time:o+1,user_id:this.previousSessionUserId}).promise),this.config.lastEventTime=this.config.sessionId);var u=this.trackCampaignEventIfNeeded(++a,i);return Ts(this.config.defaultTracking)&&i.push(this.track(Ps,void 0,{event_id:u?++a:a,session_id:this.config.sessionId,time:this.config.lastEventTime}).promise),this.previousSessionDeviceId=this.config.deviceId,this.previousSessionUserId=this.config.userId,Ae(Promise.all(i))},e.prototype.extendSession=function(){if(!this.config){this.q.push(this.extendSession.bind(this));return}this.config.lastEventTime=Date.now()},e.prototype.setTransport=function(n){if(!this.config){this.q.push(this.setTransport.bind(this,n));return}this.config.transportProvider=Ns(n)},e.prototype.identify=function(n,r){if(yr(n)){var i=n._q;n._q=[],n=_r(new un,i)}return r!=null&&r.user_id&&this.setUserId(r.user_id),r!=null&&r.device_id&&this.setDeviceId(r.device_id),t.prototype.identify.call(this,n,r)},e.prototype.groupIdentify=function(n,r,i,s){if(yr(i)){var o=i._q;i._q=[],i=_r(new un,o)}return t.prototype.groupIdentify.call(this,n,r,i,s)},e.prototype.revenue=function(n,r){if(yr(n)){var i=n._q;n._q=[],n=_r(new Cl,i)}return t.prototype.revenue.call(this,n,r)},e.prototype.trackCampaignEventIfNeeded=function(n,r){if(!this.webAttribution||!this.webAttribution.shouldTrackNewCampaign)return!1;var i=this.webAttribution.generateCampaignEvent(n);return r?r.push(this.track(i).promise):this.track(i),this.config.loggerProvider.log("Tracking attribution."),!0},e.prototype.process=function(n){return Q(this,void 0,void 0,function(){var r,i,s;return ee(this,function(o){return r=Date.now(),i=ks(this.config.sessionTimeout,this.config.lastEventTime),s=this.webAttribution&&this.webAttribution.shouldSetSessionIdOnNewCampaign(),n.event_type!==Ps&&n.event_type!==Ds&&(!n.session_id||n.session_id===this.getSessionId())&&(i||s?(this.setSessionId(r),s&&this.config.loggerProvider.log("Created a new session for new campaign.")):i||this.trackCampaignEventIfNeeded()),[2,t.prototype.process.call(this,n)]})})},e.prototype.logBrowserOptions=function(n){try{var r=re(re({},n),{apiKey:n.apiKey.substring(0,10)+"********"});this.config.loggerProvider.debug("Initialized Amplitude with BrowserConfig:",JSON.stringify(r))}catch(i){this.config.loggerProvider.error("Error logging browser config",i)}},e}(Tl),Kd=function(){var t=new Zd;return{init:_e(t.init.bind(t),"init",me(t),ve(t,["config"])),add:_e(t.add.bind(t),"add",me(t),ve(t,["config.apiKey","timeline.plugins"])),remove:_e(t.remove.bind(t),"remove",me(t),ve(t,["config.apiKey","timeline.plugins"])),track:_e(t.track.bind(t),"track",me(t),ve(t,["config.apiKey","timeline.queue.length"])),logEvent:_e(t.logEvent.bind(t),"logEvent",me(t),ve(t,["config.apiKey","timeline.queue.length"])),identify:_e(t.identify.bind(t),"identify",me(t),ve(t,["config.apiKey","timeline.queue.length"])),groupIdentify:_e(t.groupIdentify.bind(t),"groupIdentify",me(t),ve(t,["config.apiKey","timeline.queue.length"])),setGroup:_e(t.setGroup.bind(t),"setGroup",me(t),ve(t,["config.apiKey","timeline.queue.length"])),revenue:_e(t.revenue.bind(t),"revenue",me(t),ve(t,["config.apiKey","timeline.queue.length"])),flush:_e(t.flush.bind(t),"flush",me(t),ve(t,["config.apiKey","timeline.queue.length"])),getUserId:_e(t.getUserId.bind(t),"getUserId",me(t),ve(t,["config","config.userId"])),setUserId:_e(t.setUserId.bind(t),"setUserId",me(t),ve(t,["config","config.userId"])),getDeviceId:_e(t.getDeviceId.bind(t),"getDeviceId",me(t),ve(t,["config","config.deviceId"])),setDeviceId:_e(t.setDeviceId.bind(t),"setDeviceId",me(t),ve(t,["config","config.deviceId"])),reset:_e(t.reset.bind(t),"reset",me(t),ve(t,["config","config.userId","config.deviceId"])),getSessionId:_e(t.getSessionId.bind(t),"getSessionId",me(t),ve(t,["config"])),setSessionId:_e(t.setSessionId.bind(t),"setSessionId",me(t),ve(t,["config"])),extendSession:_e(t.extendSession.bind(t),"extendSession",me(t),ve(t,["config"])),setOptOut:_e(t.setOptOut.bind(t),"setOptOut",me(t),ve(t,["config"])),setTransport:_e(t.setTransport.bind(t),"setTransport",me(t),ve(t,["config"]))}};const kr=Kd();var Yd=kr.init,Xd=kr.setSessionId,Jd=kr.track;async function Ar(t,e){await ef(),t==="DownloadStarted"&&Xd(Date.now()),Jd(t,e)}let Us=!1,Qd="7bdd84339e3b903b85daf6ac016e1f6f";async function ef(){const t=Qd;if(!Us){Us=!0;const e=await rf(),n=await sf();Yd(t,e,{autocapture:!1,identityStorage:"localStorage",deviceId:n,appVersion:tf()}),await nf(200)}}function tf(){return chrome?chrome.runtime?chrome.runtime.getManifest().version:"NO_VER_RUNTIME":"NO_VER_CHROME"}async function nf(t){return new Promise(e=>setTimeout(e,t))}async function rf(){let e=(await chrome.storage.sync.get("clientId")).clientId;return e||(e=self.crypto.randomUUID(),await chrome.storage.sync.set({clientId:e})),e}async function sf(){let e=(await chrome.storage.local.get("deviceId")).deviceId;return e||(e=self.crypto.randomUUID(),await chrome.storage.local.set({deviceId:e})),e}function _n(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var xr={exports:{}};/*!

  JSZip v3.10.1 - A JavaScript class for generating and reading zip files
  <http://stuartk.com/jszip>

  (c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
  Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

  JSZip uses the library pako released under the MIT license :
  https://github.com/nodeca/pako/blob/main/LICENSE
  */var Fs;function of(){return Fs||(Fs=1,function(t,e){(function(n){t.exports=n()})(function(){return function n(r,i,s){function o(c,d){if(!i[c]){if(!r[c]){var f=typeof _n=="function"&&_n;if(!d&&f)return f(c,!0);if(a)return a(c,!0);var v=new Error("Cannot find module '"+c+"'");throw v.code="MODULE_NOT_FOUND",v}var h=i[c]={exports:{}};r[c][0].call(h.exports,function(y){var m=r[c][1][y];return o(m||y)},h,h.exports,n,r,i,s)}return i[c].exports}for(var a=typeof _n=="function"&&_n,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,r,i){var s=n("./utils"),o=n("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(u){for(var c,d,f,v,h,y,m,_=[],g=0,b=u.length,E=b,A=s.getTypeOf(u)!=="string";g<u.length;)E=b-g,f=A?(c=u[g++],d=g<b?u[g++]:0,g<b?u[g++]:0):(c=u.charCodeAt(g++),d=g<b?u.charCodeAt(g++):0,g<b?u.charCodeAt(g++):0),v=c>>2,h=(3&c)<<4|d>>4,y=1<E?(15&d)<<2|f>>6:64,m=2<E?63&f:64,_.push(a.charAt(v)+a.charAt(h)+a.charAt(y)+a.charAt(m));return _.join("")},i.decode=function(u){var c,d,f,v,h,y,m=0,_=0,g="data:";if(u.substr(0,g.length)===g)throw new Error("Invalid base64 input, it looks like a data url.");var b,E=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===a.charAt(64)&&E--,u.charAt(u.length-2)===a.charAt(64)&&E--,E%1!=0)throw new Error("Invalid base64 input, bad content length.");for(b=o.uint8array?new Uint8Array(0|E):new Array(0|E);m<u.length;)c=a.indexOf(u.charAt(m++))<<2|(v=a.indexOf(u.charAt(m++)))>>4,d=(15&v)<<4|(h=a.indexOf(u.charAt(m++)))>>2,f=(3&h)<<6|(y=a.indexOf(u.charAt(m++))),b[_++]=c,h!==64&&(b[_++]=d),y!==64&&(b[_++]=f);return b}},{"./support":30,"./utils":32}],2:[function(n,r,i){var s=n("./external"),o=n("./stream/DataWorker"),a=n("./stream/Crc32Probe"),u=n("./stream/DataLengthProbe");function c(d,f,v,h,y){this.compressedSize=d,this.uncompressedSize=f,this.crc32=v,this.compression=h,this.compressedContent=y}c.prototype={getContentWorker:function(){var d=new o(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),f=this;return d.on("end",function(){if(this.streamInfo.data_length!==f.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new o(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(d,f,v){return d.pipe(new a).pipe(new u("uncompressedSize")).pipe(f.compressWorker(v)).pipe(new u("compressedSize")).withStreamInfo("compression",f)},r.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,i){var s=n("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,i){var s=n("./utils"),o=function(){for(var a,u=[],c=0;c<256;c++){a=c;for(var d=0;d<8;d++)a=1&a?3988292384^a>>>1:a>>>1;u[c]=a}return u}();r.exports=function(a,u){return a!==void 0&&a.length?s.getTypeOf(a)!=="string"?function(c,d,f,v){var h=o,y=v+f;c^=-1;for(var m=v;m<y;m++)c=c>>>8^h[255&(c^d[m])];return-1^c}(0|u,a,a.length,0):function(c,d,f,v){var h=o,y=v+f;c^=-1;for(var m=v;m<y;m++)c=c>>>8^h[255&(c^d.charCodeAt(m))];return-1^c}(0|u,a,a.length,0):0}},{"./utils":32}],5:[function(n,r,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(n,r,i){var s=null;s=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:s}},{lie:37}],7:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),a=n("./utils"),u=n("./stream/GenericWorker"),c=s?"uint8array":"array";function d(f,v){u.call(this,"FlateWorker/"+f),this._pako=null,this._pakoAction=f,this._pakoOptions=v,this.meta={}}i.magic="\b\0",a.inherits(d,u),d.prototype.processChunk=function(f){this.meta=f.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(c,f.data),!1)},d.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var f=this;this._pako.onData=function(v){f.push({data:v,meta:f.meta})}},i.compressWorker=function(f){return new d("Deflate",f)},i.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,i){function s(h,y){var m,_="";for(m=0;m<y;m++)_+=String.fromCharCode(255&h),h>>>=8;return _}function o(h,y,m,_,g,b){var E,A,I=h.file,L=h.compression,R=b!==c.utf8encode,T=a.transformTo("string",b(I.name)),x=a.transformTo("string",c.utf8encode(I.name)),M=I.comment,q=a.transformTo("string",b(M)),k=a.transformTo("string",c.utf8encode(M)),U=x.length!==I.name.length,p=k.length!==M.length,P="",X="",B="",H=I.dir,W=I.date,J={crc32:0,compressedSize:0,uncompressedSize:0};y&&!m||(J.crc32=h.crc32,J.compressedSize=h.compressedSize,J.uncompressedSize=h.uncompressedSize);var N=0;y&&(N|=8),R||!U&&!p||(N|=2048);var D=0,te=0;H&&(D|=16),g==="UNIX"?(te=798,D|=function(Z,de){var ye=Z;return Z||(ye=de?16893:33204),(65535&ye)<<16}(I.unixPermissions,H)):(te=20,D|=function(Z){return 63&(Z||0)}(I.dosPermissions)),E=W.getUTCHours(),E<<=6,E|=W.getUTCMinutes(),E<<=5,E|=W.getUTCSeconds()/2,A=W.getUTCFullYear()-1980,A<<=4,A|=W.getUTCMonth()+1,A<<=5,A|=W.getUTCDate(),U&&(X=s(1,1)+s(d(T),4)+x,P+="up"+s(X.length,2)+X),p&&(B=s(1,1)+s(d(q),4)+k,P+="uc"+s(B.length,2)+B);var K="";return K+=`
\0`,K+=s(N,2),K+=L.magic,K+=s(E,2),K+=s(A,2),K+=s(J.crc32,4),K+=s(J.compressedSize,4),K+=s(J.uncompressedSize,4),K+=s(T.length,2),K+=s(P.length,2),{fileRecord:f.LOCAL_FILE_HEADER+K+T+P,dirRecord:f.CENTRAL_FILE_HEADER+s(te,2)+K+s(q.length,2)+"\0\0\0\0"+s(D,4)+s(_,4)+T+P+q}}var a=n("../utils"),u=n("../stream/GenericWorker"),c=n("../utf8"),d=n("../crc32"),f=n("../signature");function v(h,y,m,_){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=y,this.zipPlatform=m,this.encodeFileName=_,this.streamFiles=h,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(v,u),v.prototype.push=function(h){var y=h.meta.percent||0,m=this.entriesCount,_=this._sources.length;this.accumulate?this.contentBuffer.push(h):(this.bytesWritten+=h.data.length,u.prototype.push.call(this,{data:h.data,meta:{currentFile:this.currentFile,percent:m?(y+100*(m-_-1))/m:100}}))},v.prototype.openedSource=function(h){this.currentSourceOffset=this.bytesWritten,this.currentFile=h.file.name;var y=this.streamFiles&&!h.file.dir;if(y){var m=o(h,y,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:m.fileRecord,meta:{percent:0}})}else this.accumulate=!0},v.prototype.closedSource=function(h){this.accumulate=!1;var y=this.streamFiles&&!h.file.dir,m=o(h,y,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(m.dirRecord),y)this.push({data:function(_){return f.DATA_DESCRIPTOR+s(_.crc32,4)+s(_.compressedSize,4)+s(_.uncompressedSize,4)}(h),meta:{percent:100}});else for(this.push({data:m.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},v.prototype.flush=function(){for(var h=this.bytesWritten,y=0;y<this.dirRecords.length;y++)this.push({data:this.dirRecords[y],meta:{percent:100}});var m=this.bytesWritten-h,_=function(g,b,E,A,I){var L=a.transformTo("string",I(A));return f.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(g,2)+s(g,2)+s(b,4)+s(E,4)+s(L.length,2)+L}(this.dirRecords.length,m,h,this.zipComment,this.encodeFileName);this.push({data:_,meta:{percent:100}})},v.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},v.prototype.registerPrevious=function(h){this._sources.push(h);var y=this;return h.on("data",function(m){y.processChunk(m)}),h.on("end",function(){y.closedSource(y.previous.streamInfo),y._sources.length?y.prepareNextSource():y.end()}),h.on("error",function(m){y.error(m)}),this},v.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},v.prototype.error=function(h){var y=this._sources;if(!u.prototype.error.call(this,h))return!1;for(var m=0;m<y.length;m++)try{y[m].error(h)}catch{}return!0},v.prototype.lock=function(){u.prototype.lock.call(this);for(var h=this._sources,y=0;y<h.length;y++)h[y].lock()},r.exports=v},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,i){var s=n("../compressions"),o=n("./ZipFileWorker");i.generateWorker=function(a,u,c){var d=new o(u.streamFiles,c,u.platform,u.encodeFileName),f=0;try{a.forEach(function(v,h){f++;var y=function(b,E){var A=b||E,I=s[A];if(!I)throw new Error(A+" is not a valid compression method !");return I}(h.options.compression,u.compression),m=h.options.compressionOptions||u.compressionOptions||{},_=h.dir,g=h.date;h._compressWorker(y,m).withStreamInfo("file",{name:v,dir:_,date:g,comment:h.comment||"",unixPermissions:h.unixPermissions,dosPermissions:h.dosPermissions}).pipe(d)}),d.entriesCount=f}catch(v){d.error(v)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new s;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(s.prototype=n("./object")).loadAsync=n("./load"),s.support=n("./support"),s.defaults=n("./defaults"),s.version="3.10.1",s.loadAsync=function(o,a){return new s().loadAsync(o,a)},s.external=n("./external"),r.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,i){var s=n("./utils"),o=n("./external"),a=n("./utf8"),u=n("./zipEntries"),c=n("./stream/Crc32Probe"),d=n("./nodejsUtils");function f(v){return new o.Promise(function(h,y){var m=v.decompressed.getContentWorker().pipe(new c);m.on("error",function(_){y(_)}).on("end",function(){m.streamInfo.crc32!==v.decompressed.crc32?y(new Error("Corrupted zip : CRC32 mismatch")):h()}).resume()})}r.exports=function(v,h){var y=this;return h=s.extend(h||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),d.isNode&&d.isStream(v)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",v,!0,h.optimizedBinaryString,h.base64).then(function(m){var _=new u(h);return _.load(m),_}).then(function(m){var _=[o.Promise.resolve(m)],g=m.files;if(h.checkCRC32)for(var b=0;b<g.length;b++)_.push(f(g[b]));return o.Promise.all(_)}).then(function(m){for(var _=m.shift(),g=_.files,b=0;b<g.length;b++){var E=g[b],A=E.fileNameStr,I=s.resolve(E.fileNameStr);y.file(I,E.decompressed,{binary:!0,optimizedBinaryString:!0,date:E.date,dir:E.dir,comment:E.fileCommentStr.length?E.fileCommentStr:null,unixPermissions:E.unixPermissions,dosPermissions:E.dosPermissions,createFolders:h.createFolders}),E.dir||(y.file(I).unsafeOriginalName=A)}return _.zipComment.length&&(y.comment=_.zipComment),y})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,i){var s=n("../utils"),o=n("../stream/GenericWorker");function a(u,c){o.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(c)}s.inherits(a,o),a.prototype._bindStream=function(u){var c=this;(this._stream=u).pause(),u.on("data",function(d){c.push({data:d,meta:{percent:0}})}).on("error",function(d){c.isPaused?this.generatedError=d:c.error(d)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,i){var s=n("readable-stream").Readable;function o(a,u,c){s.call(this,u),this._helper=a;var d=this;a.on("data",function(f,v){d.push(f)||d._helper.pause(),c&&c(v)}).on("error",function(f){d.emit("error",f)}).on("end",function(){d.push(null)})}n("../utils").inherits(o,s),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,r,i){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,o);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,o)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var o=new Buffer(s);return o.fill(0),o},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(n,r,i){function s(I,L,R){var T,x=a.getTypeOf(L),M=a.extend(R||{},d);M.date=M.date||new Date,M.compression!==null&&(M.compression=M.compression.toUpperCase()),typeof M.unixPermissions=="string"&&(M.unixPermissions=parseInt(M.unixPermissions,8)),M.unixPermissions&&16384&M.unixPermissions&&(M.dir=!0),M.dosPermissions&&16&M.dosPermissions&&(M.dir=!0),M.dir&&(I=g(I)),M.createFolders&&(T=_(I))&&b.call(this,T,!0);var q=x==="string"&&M.binary===!1&&M.base64===!1;R&&R.binary!==void 0||(M.binary=!q),(L instanceof f&&L.uncompressedSize===0||M.dir||!L||L.length===0)&&(M.base64=!1,M.binary=!0,L="",M.compression="STORE",x="string");var k=null;k=L instanceof f||L instanceof u?L:y.isNode&&y.isStream(L)?new m(I,L):a.prepareContent(I,L,M.binary,M.optimizedBinaryString,M.base64);var U=new v(I,k,M);this.files[I]=U}var o=n("./utf8"),a=n("./utils"),u=n("./stream/GenericWorker"),c=n("./stream/StreamHelper"),d=n("./defaults"),f=n("./compressedObject"),v=n("./zipObject"),h=n("./generate"),y=n("./nodejsUtils"),m=n("./nodejs/NodejsStreamInputAdapter"),_=function(I){I.slice(-1)==="/"&&(I=I.substring(0,I.length-1));var L=I.lastIndexOf("/");return 0<L?I.substring(0,L):""},g=function(I){return I.slice(-1)!=="/"&&(I+="/"),I},b=function(I,L){return L=L!==void 0?L:d.createFolders,I=g(I),this.files[I]||s.call(this,I,null,{dir:!0,createFolders:L}),this.files[I]};function E(I){return Object.prototype.toString.call(I)==="[object RegExp]"}var A={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(I){var L,R,T;for(L in this.files)T=this.files[L],(R=L.slice(this.root.length,L.length))&&L.slice(0,this.root.length)===this.root&&I(R,T)},filter:function(I){var L=[];return this.forEach(function(R,T){I(R,T)&&L.push(T)}),L},file:function(I,L,R){if(arguments.length!==1)return I=this.root+I,s.call(this,I,L,R),this;if(E(I)){var T=I;return this.filter(function(M,q){return!q.dir&&T.test(M)})}var x=this.files[this.root+I];return x&&!x.dir?x:null},folder:function(I){if(!I)return this;if(E(I))return this.filter(function(x,M){return M.dir&&I.test(x)});var L=this.root+I,R=b.call(this,L),T=this.clone();return T.root=R.name,T},remove:function(I){I=this.root+I;var L=this.files[I];if(L||(I.slice(-1)!=="/"&&(I+="/"),L=this.files[I]),L&&!L.dir)delete this.files[I];else for(var R=this.filter(function(x,M){return M.name.slice(0,I.length)===I}),T=0;T<R.length;T++)delete this.files[R[T].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(I){var L,R={};try{if((R=a.extend(I||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=R.type.toLowerCase(),R.compression=R.compression.toUpperCase(),R.type==="binarystring"&&(R.type="string"),!R.type)throw new Error("No output type specified.");a.checkSupport(R.type),R.platform!=="darwin"&&R.platform!=="freebsd"&&R.platform!=="linux"&&R.platform!=="sunos"||(R.platform="UNIX"),R.platform==="win32"&&(R.platform="DOS");var T=R.comment||this.comment||"";L=h.generateWorker(this,R,T)}catch(x){(L=new u("error")).error(x)}return new c(L,R.type||"string",R.mimeType)},generateAsync:function(I,L){return this.generateInternalStream(I).accumulate(L)},generateNodeStream:function(I,L){return(I=I||{}).type||(I.type="nodebuffer"),this.generateInternalStream(I).toNodejsStream(L)}};r.exports=A},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,i){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,i){var s=n("./DataReader");function o(a){s.call(this,a);for(var u=0;u<this.data.length;u++)a[u]=255&a[u]}n("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var u=a.charCodeAt(0),c=a.charCodeAt(1),d=a.charCodeAt(2),f=a.charCodeAt(3),v=this.length-4;0<=v;--v)if(this.data[v]===u&&this.data[v+1]===c&&this.data[v+2]===d&&this.data[v+3]===f)return v-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var u=a.charCodeAt(0),c=a.charCodeAt(1),d=a.charCodeAt(2),f=a.charCodeAt(3),v=this.readData(4);return u===v[0]&&c===v[1]&&d===v[2]&&f===v[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,u},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,r,i){var s=n("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var u,c=0;for(this.checkOffset(a),u=this.index+a-1;u>=this.index;u--)c=(c<<8)+this.byteAt(u);return this.index+=a,c},readString:function(a){return s.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},r.exports=o},{"../utils":32}],19:[function(n,r,i){var s=n("./Uint8ArrayReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.readData=function(a){this.checkOffset(a);var u=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,u},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,i){var s=n("./DataReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var u=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,u},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,r,i){var s=n("./ArrayReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,u},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,i){var s=n("../utils"),o=n("../support"),a=n("./ArrayReader"),u=n("./StringReader"),c=n("./NodeBufferReader"),d=n("./Uint8ArrayReader");r.exports=function(f){var v=s.getTypeOf(f);return s.checkSupport(v),v!=="string"||o.uint8array?v==="nodebuffer"?new c(f):o.uint8array?new d(s.transformTo("uint8array",f)):new a(s.transformTo("array",f)):new u(f)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,i){var s=n("./GenericWorker"),o=n("../utils");function a(u){s.call(this,"ConvertWorker to "+u),this.destType=u}o.inherits(a,s),a.prototype.processChunk=function(u){this.push({data:o.transformTo(this.destType,u.data),meta:u.meta})},r.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,i){var s=n("./GenericWorker"),o=n("../crc32");function a(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(a,s),a.prototype.processChunk=function(u){this.streamInfo.crc32=o(u.data,this.streamInfo.crc32||0),this.push(u)},r.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,i){var s=n("../utils"),o=n("./GenericWorker");function a(u){o.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}s.inherits(a,o),a.prototype.processChunk=function(u){if(u){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+u.data.length}o.prototype.processChunk.call(this,u)},r.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,i){var s=n("../utils"),o=n("./GenericWorker");function a(u){o.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(d){c.dataIsReady=!0,c.data=d,c.max=d&&d.length||0,c.type=s.getTypeOf(d),c.isPaused||c._tickAndRepeat()},function(d){c.error(d)})}s.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,c);break;case"uint8array":u=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":u=this.data.slice(this.index,c)}return this.index=c,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,i){function s(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var u=0;u<this._listeners[o].length;u++)this._listeners[o][u].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(u){a.processChunk(u)}),o.on("end",function(){a.end()}),o.on("error",function(u){a.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=s},{}],29:[function(n,r,i){var s=n("../utils"),o=n("./ConvertWorker"),a=n("./GenericWorker"),u=n("../base64"),c=n("../support"),d=n("../external"),f=null;if(c.nodestream)try{f=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function v(y,m){return new d.Promise(function(_,g){var b=[],E=y._internalType,A=y._outputType,I=y._mimeType;y.on("data",function(L,R){b.push(L),m&&m(R)}).on("error",function(L){b=[],g(L)}).on("end",function(){try{var L=function(R,T,x){switch(R){case"blob":return s.newBlob(s.transformTo("arraybuffer",T),x);case"base64":return u.encode(T);default:return s.transformTo(R,T)}}(A,function(R,T){var x,M=0,q=null,k=0;for(x=0;x<T.length;x++)k+=T[x].length;switch(R){case"string":return T.join("");case"array":return Array.prototype.concat.apply([],T);case"uint8array":for(q=new Uint8Array(k),x=0;x<T.length;x++)q.set(T[x],M),M+=T[x].length;return q;case"nodebuffer":return Buffer.concat(T);default:throw new Error("concat : unsupported type '"+R+"'")}}(E,b),I);_(L)}catch(R){g(R)}b=[]}).resume()})}function h(y,m,_){var g=m;switch(m){case"blob":case"arraybuffer":g="uint8array";break;case"base64":g="string"}try{this._internalType=g,this._outputType=m,this._mimeType=_,s.checkSupport(g),this._worker=y.pipe(new o(g)),y.lock()}catch(b){this._worker=new a("error"),this._worker.error(b)}}h.prototype={accumulate:function(y){return v(this,y)},on:function(y,m){var _=this;return y==="data"?this._worker.on(y,function(g){m.call(_,g.data,g.meta)}):this._worker.on(y,function(){s.delay(m,arguments,_)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(y){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new f(this,{objectMode:this._outputType!=="nodebuffer"},y)}},r.exports=h},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(s),i.blob=o.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!n("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,i){for(var s=n("./utils"),o=n("./support"),a=n("./nodejsUtils"),u=n("./stream/GenericWorker"),c=new Array(256),d=0;d<256;d++)c[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;c[254]=c[254]=1;function f(){u.call(this,"utf-8 decode"),this.leftOver=null}function v(){u.call(this,"utf-8 encode")}i.utf8encode=function(h){return o.nodebuffer?a.newBufferFrom(h,"utf-8"):function(y){var m,_,g,b,E,A=y.length,I=0;for(b=0;b<A;b++)(64512&(_=y.charCodeAt(b)))==55296&&b+1<A&&(64512&(g=y.charCodeAt(b+1)))==56320&&(_=65536+(_-55296<<10)+(g-56320),b++),I+=_<128?1:_<2048?2:_<65536?3:4;for(m=o.uint8array?new Uint8Array(I):new Array(I),b=E=0;E<I;b++)(64512&(_=y.charCodeAt(b)))==55296&&b+1<A&&(64512&(g=y.charCodeAt(b+1)))==56320&&(_=65536+(_-55296<<10)+(g-56320),b++),_<128?m[E++]=_:(_<2048?m[E++]=192|_>>>6:(_<65536?m[E++]=224|_>>>12:(m[E++]=240|_>>>18,m[E++]=128|_>>>12&63),m[E++]=128|_>>>6&63),m[E++]=128|63&_);return m}(h)},i.utf8decode=function(h){return o.nodebuffer?s.transformTo("nodebuffer",h).toString("utf-8"):function(y){var m,_,g,b,E=y.length,A=new Array(2*E);for(m=_=0;m<E;)if((g=y[m++])<128)A[_++]=g;else if(4<(b=c[g]))A[_++]=65533,m+=b-1;else{for(g&=b===2?31:b===3?15:7;1<b&&m<E;)g=g<<6|63&y[m++],b--;1<b?A[_++]=65533:g<65536?A[_++]=g:(g-=65536,A[_++]=55296|g>>10&1023,A[_++]=56320|1023&g)}return A.length!==_&&(A.subarray?A=A.subarray(0,_):A.length=_),s.applyFromCharCode(A)}(h=s.transformTo(o.uint8array?"uint8array":"array",h))},s.inherits(f,u),f.prototype.processChunk=function(h){var y=s.transformTo(o.uint8array?"uint8array":"array",h.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var m=y;(y=new Uint8Array(m.length+this.leftOver.length)).set(this.leftOver,0),y.set(m,this.leftOver.length)}else y=this.leftOver.concat(y);this.leftOver=null}var _=function(b,E){var A;for((E=E||b.length)>b.length&&(E=b.length),A=E-1;0<=A&&(192&b[A])==128;)A--;return A<0||A===0?E:A+c[b[A]]>E?A:E}(y),g=y;_!==y.length&&(o.uint8array?(g=y.subarray(0,_),this.leftOver=y.subarray(_,y.length)):(g=y.slice(0,_),this.leftOver=y.slice(_,y.length))),this.push({data:i.utf8decode(g),meta:h.meta})},f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=f,s.inherits(v,u),v.prototype.processChunk=function(h){this.push({data:i.utf8encode(h.data),meta:h.meta})},i.Utf8EncodeWorker=v},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,i){var s=n("./support"),o=n("./base64"),a=n("./nodejsUtils"),u=n("./external");function c(m){return m}function d(m,_){for(var g=0;g<m.length;++g)_[g]=255&m.charCodeAt(g);return _}n("setimmediate"),i.newBlob=function(m,_){i.checkSupport("blob");try{return new Blob([m],{type:_})}catch{try{var g=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return g.append(m),g.getBlob(_)}catch{throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(m,_,g){var b=[],E=0,A=m.length;if(A<=g)return String.fromCharCode.apply(null,m);for(;E<A;)_==="array"||_==="nodebuffer"?b.push(String.fromCharCode.apply(null,m.slice(E,Math.min(E+g,A)))):b.push(String.fromCharCode.apply(null,m.subarray(E,Math.min(E+g,A)))),E+=g;return b.join("")},stringifyByChar:function(m){for(var _="",g=0;g<m.length;g++)_+=String.fromCharCode(m[g]);return _},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function v(m){var _=65536,g=i.getTypeOf(m),b=!0;if(g==="uint8array"?b=f.applyCanBeUsed.uint8array:g==="nodebuffer"&&(b=f.applyCanBeUsed.nodebuffer),b)for(;1<_;)try{return f.stringifyByChunk(m,g,_)}catch{_=Math.floor(_/2)}return f.stringifyByChar(m)}function h(m,_){for(var g=0;g<m.length;g++)_[g]=m[g];return _}i.applyFromCharCode=v;var y={};y.string={string:c,array:function(m){return d(m,new Array(m.length))},arraybuffer:function(m){return y.string.uint8array(m).buffer},uint8array:function(m){return d(m,new Uint8Array(m.length))},nodebuffer:function(m){return d(m,a.allocBuffer(m.length))}},y.array={string:v,array:c,arraybuffer:function(m){return new Uint8Array(m).buffer},uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return a.newBufferFrom(m)}},y.arraybuffer={string:function(m){return v(new Uint8Array(m))},array:function(m){return h(new Uint8Array(m),new Array(m.byteLength))},arraybuffer:c,uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return a.newBufferFrom(new Uint8Array(m))}},y.uint8array={string:v,array:function(m){return h(m,new Array(m.length))},arraybuffer:function(m){return m.buffer},uint8array:c,nodebuffer:function(m){return a.newBufferFrom(m)}},y.nodebuffer={string:v,array:function(m){return h(m,new Array(m.length))},arraybuffer:function(m){return y.nodebuffer.uint8array(m).buffer},uint8array:function(m){return h(m,new Uint8Array(m.length))},nodebuffer:c},i.transformTo=function(m,_){if(_=_||"",!m)return _;i.checkSupport(m);var g=i.getTypeOf(_);return y[g][m](_)},i.resolve=function(m){for(var _=m.split("/"),g=[],b=0;b<_.length;b++){var E=_[b];E==="."||E===""&&b!==0&&b!==_.length-1||(E===".."?g.pop():g.push(E))}return g.join("/")},i.getTypeOf=function(m){return typeof m=="string"?"string":Object.prototype.toString.call(m)==="[object Array]"?"array":s.nodebuffer&&a.isBuffer(m)?"nodebuffer":s.uint8array&&m instanceof Uint8Array?"uint8array":s.arraybuffer&&m instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(m){if(!s[m.toLowerCase()])throw new Error(m+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(m){var _,g,b="";for(g=0;g<(m||"").length;g++)b+="\\x"+((_=m.charCodeAt(g))<16?"0":"")+_.toString(16).toUpperCase();return b},i.delay=function(m,_,g){setImmediate(function(){m.apply(g||null,_||[])})},i.inherits=function(m,_){function g(){}g.prototype=_.prototype,m.prototype=new g},i.extend=function(){var m,_,g={};for(m=0;m<arguments.length;m++)for(_ in arguments[m])Object.prototype.hasOwnProperty.call(arguments[m],_)&&g[_]===void 0&&(g[_]=arguments[m][_]);return g},i.prepareContent=function(m,_,g,b,E){return u.Promise.resolve(_).then(function(A){return s.blob&&(A instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(A))!==-1)&&typeof FileReader<"u"?new u.Promise(function(I,L){var R=new FileReader;R.onload=function(T){I(T.target.result)},R.onerror=function(T){L(T.target.error)},R.readAsArrayBuffer(A)}):A}).then(function(A){var I=i.getTypeOf(A);return I?(I==="arraybuffer"?A=i.transformTo("uint8array",A):I==="string"&&(E?A=o.decode(A):g&&b!==!0&&(A=function(L){return d(L,s.uint8array?new Uint8Array(L.length):new Array(L.length))}(A))),A):u.Promise.reject(new Error("Can't read the data of '"+m+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,i){var s=n("./reader/readerFor"),o=n("./utils"),a=n("./signature"),u=n("./zipEntry"),c=n("./support");function d(f){this.files=[],this.loadOptions=f}d.prototype={checkSignature:function(f){if(!this.reader.readAndCheckSignature(f)){this.reader.index-=4;var v=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(v)+", expected "+o.pretty(f)+")")}},isSignature:function(f,v){var h=this.reader.index;this.reader.setIndex(f);var y=this.reader.readString(4)===v;return this.reader.setIndex(h),y},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var f=this.reader.readData(this.zipCommentLength),v=c.uint8array?"uint8array":"array",h=o.transformTo(v,f);this.zipComment=this.loadOptions.decodeFileName(h)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var f,v,h,y=this.zip64EndOfCentralSize-44;0<y;)f=this.reader.readInt(2),v=this.reader.readInt(4),h=this.reader.readData(v),this.zip64ExtensibleData[f]={id:f,length:v,value:h}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var f,v;for(f=0;f<this.files.length;f++)v=this.files[f],this.reader.setIndex(v.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),v.readLocalPart(this.reader),v.handleUTF8(),v.processAttributes()},readCentralDir:function(){var f;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(f=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(f);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var f=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(f<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(f);var v=f;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(f=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(f),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var h=this.centralDirOffset+this.centralDirSize;this.zip64&&(h+=20,h+=12+this.zip64EndOfCentralSize);var y=v-h;if(0<y)this.isSignature(v,a.CENTRAL_FILE_HEADER)||(this.reader.zero=y);else if(y<0)throw new Error("Corrupted zip: missing "+Math.abs(y)+" bytes.")},prepareReader:function(f){this.reader=s(f)},load:function(f){this.prepareReader(f),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,i){var s=n("./reader/readerFor"),o=n("./utils"),a=n("./compressedObject"),u=n("./crc32"),c=n("./utf8"),d=n("./compressions"),f=n("./support");function v(h,y){this.options=h,this.loadOptions=y}v.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(h){var y,m;if(h.skip(22),this.fileNameLength=h.readInt(2),m=h.readInt(2),this.fileName=h.readData(this.fileNameLength),h.skip(m),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((y=function(_){for(var g in d)if(Object.prototype.hasOwnProperty.call(d,g)&&d[g].magic===_)return d[g];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,y,h.readData(this.compressedSize))},readCentralPart:function(h){this.versionMadeBy=h.readInt(2),h.skip(2),this.bitFlag=h.readInt(2),this.compressionMethod=h.readString(2),this.date=h.readDate(),this.crc32=h.readInt(4),this.compressedSize=h.readInt(4),this.uncompressedSize=h.readInt(4);var y=h.readInt(2);if(this.extraFieldsLength=h.readInt(2),this.fileCommentLength=h.readInt(2),this.diskNumberStart=h.readInt(2),this.internalFileAttributes=h.readInt(2),this.externalFileAttributes=h.readInt(4),this.localHeaderOffset=h.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");h.skip(y),this.readExtraFields(h),this.parseZIP64ExtraField(h),this.fileComment=h.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var h=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),h==0&&(this.dosPermissions=63&this.externalFileAttributes),h==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var h=s(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=h.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=h.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=h.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=h.readInt(4))}},readExtraFields:function(h){var y,m,_,g=h.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});h.index+4<g;)y=h.readInt(2),m=h.readInt(2),_=h.readData(m),this.extraFields[y]={id:y,length:m,value:_};h.setIndex(g)},handleUTF8:function(){var h=f.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var y=this.findExtraFieldUnicodePath();if(y!==null)this.fileNameStr=y;else{var m=o.transformTo(h,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(m)}var _=this.findExtraFieldUnicodeComment();if(_!==null)this.fileCommentStr=_;else{var g=o.transformTo(h,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(g)}}},findExtraFieldUnicodePath:function(){var h=this.extraFields[28789];if(h){var y=s(h.value);return y.readInt(1)!==1||u(this.fileName)!==y.readInt(4)?null:c.utf8decode(y.readData(h.length-5))}return null},findExtraFieldUnicodeComment:function(){var h=this.extraFields[25461];if(h){var y=s(h.value);return y.readInt(1)!==1||u(this.fileComment)!==y.readInt(4)?null:c.utf8decode(y.readData(h.length-5))}return null}},r.exports=v},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,i){function s(y,m,_){this.name=y,this.dir=_.dir,this.date=_.date,this.comment=_.comment,this.unixPermissions=_.unixPermissions,this.dosPermissions=_.dosPermissions,this._data=m,this._dataBinary=_.binary,this.options={compression:_.compression,compressionOptions:_.compressionOptions}}var o=n("./stream/StreamHelper"),a=n("./stream/DataWorker"),u=n("./utf8"),c=n("./compressedObject"),d=n("./stream/GenericWorker");s.prototype={internalStream:function(y){var m=null,_="string";try{if(!y)throw new Error("No output type specified.");var g=(_=y.toLowerCase())==="string"||_==="text";_!=="binarystring"&&_!=="text"||(_="string"),m=this._decompressWorker();var b=!this._dataBinary;b&&!g&&(m=m.pipe(new u.Utf8EncodeWorker)),!b&&g&&(m=m.pipe(new u.Utf8DecodeWorker))}catch(E){(m=new d("error")).error(E)}return new o(m,_,"")},async:function(y,m){return this.internalStream(y).accumulate(m)},nodeStream:function(y,m){return this.internalStream(y||"nodebuffer").toNodejsStream(m)},_compressWorker:function(y,m){if(this._data instanceof c&&this._data.compression.magic===y.magic)return this._data.getCompressedWorker();var _=this._decompressWorker();return this._dataBinary||(_=_.pipe(new u.Utf8EncodeWorker)),c.createWorkerFrom(_,y,m)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof d?this._data:new a(this._data)}};for(var f=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],v=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<f.length;h++)s.prototype[f[h]]=v;r.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,i){(function(s){var o,a,u=s.MutationObserver||s.WebKitMutationObserver;if(u){var c=0,d=new u(y),f=s.document.createTextNode("");d.observe(f,{characterData:!0}),o=function(){f.data=c=++c%2}}else if(s.setImmediate||s.MessageChannel===void 0)o="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var m=s.document.createElement("script");m.onreadystatechange=function(){y(),m.onreadystatechange=null,m.parentNode.removeChild(m),m=null},s.document.documentElement.appendChild(m)}:function(){setTimeout(y,0)};else{var v=new s.MessageChannel;v.port1.onmessage=y,o=function(){v.port2.postMessage(0)}}var h=[];function y(){var m,_;a=!0;for(var g=h.length;g;){for(_=h,h=[],m=-1;++m<g;)_[m]();g=h.length}a=!1}r.exports=function(m){h.push(m)!==1||a||o()}}).call(this,typeof rn<"u"?rn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,i){var s=n("immediate");function o(){}var a={},u=["REJECTED"],c=["FULFILLED"],d=["PENDING"];function f(g){if(typeof g!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,g!==o&&m(this,g)}function v(g,b,E){this.promise=g,typeof b=="function"&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}function h(g,b,E){s(function(){var A;try{A=b(E)}catch(I){return a.reject(g,I)}A===g?a.reject(g,new TypeError("Cannot resolve promise with itself")):a.resolve(g,A)})}function y(g){var b=g&&g.then;if(g&&(typeof g=="object"||typeof g=="function")&&typeof b=="function")return function(){b.apply(g,arguments)}}function m(g,b){var E=!1;function A(R){E||(E=!0,a.reject(g,R))}function I(R){E||(E=!0,a.resolve(g,R))}var L=_(function(){b(I,A)});L.status==="error"&&A(L.value)}function _(g,b){var E={};try{E.value=g(b),E.status="success"}catch(A){E.status="error",E.value=A}return E}(r.exports=f).prototype.finally=function(g){if(typeof g!="function")return this;var b=this.constructor;return this.then(function(E){return b.resolve(g()).then(function(){return E})},function(E){return b.resolve(g()).then(function(){throw E})})},f.prototype.catch=function(g){return this.then(null,g)},f.prototype.then=function(g,b){if(typeof g!="function"&&this.state===c||typeof b!="function"&&this.state===u)return this;var E=new this.constructor(o);return this.state!==d?h(E,this.state===c?g:b,this.outcome):this.queue.push(new v(E,g,b)),E},v.prototype.callFulfilled=function(g){a.resolve(this.promise,g)},v.prototype.otherCallFulfilled=function(g){h(this.promise,this.onFulfilled,g)},v.prototype.callRejected=function(g){a.reject(this.promise,g)},v.prototype.otherCallRejected=function(g){h(this.promise,this.onRejected,g)},a.resolve=function(g,b){var E=_(y,b);if(E.status==="error")return a.reject(g,E.value);var A=E.value;if(A)m(g,A);else{g.state=c,g.outcome=b;for(var I=-1,L=g.queue.length;++I<L;)g.queue[I].callFulfilled(b)}return g},a.reject=function(g,b){g.state=u,g.outcome=b;for(var E=-1,A=g.queue.length;++E<A;)g.queue[E].callRejected(b);return g},f.resolve=function(g){return g instanceof this?g:a.resolve(new this(o),g)},f.reject=function(g){var b=new this(o);return a.reject(b,g)},f.all=function(g){var b=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=g.length,A=!1;if(!E)return this.resolve([]);for(var I=new Array(E),L=0,R=-1,T=new this(o);++R<E;)x(g[R],R);return T;function x(M,q){b.resolve(M).then(function(k){I[q]=k,++L!==E||A||(A=!0,a.resolve(T,I))},function(k){A||(A=!0,a.reject(T,k))})}},f.race=function(g){var b=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=g.length,A=!1;if(!E)return this.resolve([]);for(var I=-1,L=new this(o);++I<E;)R=g[I],b.resolve(R).then(function(T){A||(A=!0,a.resolve(L,T))},function(T){A||(A=!0,a.reject(L,T))});var R;return L}},{immediate:36}],38:[function(n,r,i){var s={};(0,n("./lib/utils/common").assign)(s,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,i){var s=n("./zlib/deflate"),o=n("./utils/common"),a=n("./utils/strings"),u=n("./zlib/messages"),c=n("./zlib/zstream"),d=Object.prototype.toString,f=0,v=-1,h=0,y=8;function m(g){if(!(this instanceof m))return new m(g);this.options=o.assign({level:v,method:y,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},g||{});var b=this.options;b.raw&&0<b.windowBits?b.windowBits=-b.windowBits:b.gzip&&0<b.windowBits&&b.windowBits<16&&(b.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var E=s.deflateInit2(this.strm,b.level,b.method,b.windowBits,b.memLevel,b.strategy);if(E!==f)throw new Error(u[E]);if(b.header&&s.deflateSetHeader(this.strm,b.header),b.dictionary){var A;if(A=typeof b.dictionary=="string"?a.string2buf(b.dictionary):d.call(b.dictionary)==="[object ArrayBuffer]"?new Uint8Array(b.dictionary):b.dictionary,(E=s.deflateSetDictionary(this.strm,A))!==f)throw new Error(u[E]);this._dict_set=!0}}function _(g,b){var E=new m(b);if(E.push(g,!0),E.err)throw E.msg||u[E.err];return E.result}m.prototype.push=function(g,b){var E,A,I=this.strm,L=this.options.chunkSize;if(this.ended)return!1;A=b===~~b?b:b===!0?4:0,typeof g=="string"?I.input=a.string2buf(g):d.call(g)==="[object ArrayBuffer]"?I.input=new Uint8Array(g):I.input=g,I.next_in=0,I.avail_in=I.input.length;do{if(I.avail_out===0&&(I.output=new o.Buf8(L),I.next_out=0,I.avail_out=L),(E=s.deflate(I,A))!==1&&E!==f)return this.onEnd(E),!(this.ended=!0);I.avail_out!==0&&(I.avail_in!==0||A!==4&&A!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(I.output,I.next_out))):this.onData(o.shrinkBuf(I.output,I.next_out)))}while((0<I.avail_in||I.avail_out===0)&&E!==1);return A===4?(E=s.deflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===f):A!==2||(this.onEnd(f),!(I.avail_out=0))},m.prototype.onData=function(g){this.chunks.push(g)},m.prototype.onEnd=function(g){g===f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},i.Deflate=m,i.deflate=_,i.deflateRaw=function(g,b){return(b=b||{}).raw=!0,_(g,b)},i.gzip=function(g,b){return(b=b||{}).gzip=!0,_(g,b)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,i){var s=n("./zlib/inflate"),o=n("./utils/common"),a=n("./utils/strings"),u=n("./zlib/constants"),c=n("./zlib/messages"),d=n("./zlib/zstream"),f=n("./zlib/gzheader"),v=Object.prototype.toString;function h(m){if(!(this instanceof h))return new h(m);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},m||{});var _=this.options;_.raw&&0<=_.windowBits&&_.windowBits<16&&(_.windowBits=-_.windowBits,_.windowBits===0&&(_.windowBits=-15)),!(0<=_.windowBits&&_.windowBits<16)||m&&m.windowBits||(_.windowBits+=32),15<_.windowBits&&_.windowBits<48&&(15&_.windowBits)==0&&(_.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var g=s.inflateInit2(this.strm,_.windowBits);if(g!==u.Z_OK)throw new Error(c[g]);this.header=new f,s.inflateGetHeader(this.strm,this.header)}function y(m,_){var g=new h(_);if(g.push(m,!0),g.err)throw g.msg||c[g.err];return g.result}h.prototype.push=function(m,_){var g,b,E,A,I,L,R=this.strm,T=this.options.chunkSize,x=this.options.dictionary,M=!1;if(this.ended)return!1;b=_===~~_?_:_===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof m=="string"?R.input=a.binstring2buf(m):v.call(m)==="[object ArrayBuffer]"?R.input=new Uint8Array(m):R.input=m,R.next_in=0,R.avail_in=R.input.length;do{if(R.avail_out===0&&(R.output=new o.Buf8(T),R.next_out=0,R.avail_out=T),(g=s.inflate(R,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&x&&(L=typeof x=="string"?a.string2buf(x):v.call(x)==="[object ArrayBuffer]"?new Uint8Array(x):x,g=s.inflateSetDictionary(this.strm,L)),g===u.Z_BUF_ERROR&&M===!0&&(g=u.Z_OK,M=!1),g!==u.Z_STREAM_END&&g!==u.Z_OK)return this.onEnd(g),!(this.ended=!0);R.next_out&&(R.avail_out!==0&&g!==u.Z_STREAM_END&&(R.avail_in!==0||b!==u.Z_FINISH&&b!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(E=a.utf8border(R.output,R.next_out),A=R.next_out-E,I=a.buf2string(R.output,E),R.next_out=A,R.avail_out=T-A,A&&o.arraySet(R.output,R.output,E,A,0),this.onData(I)):this.onData(o.shrinkBuf(R.output,R.next_out)))),R.avail_in===0&&R.avail_out===0&&(M=!0)}while((0<R.avail_in||R.avail_out===0)&&g!==u.Z_STREAM_END);return g===u.Z_STREAM_END&&(b=u.Z_FINISH),b===u.Z_FINISH?(g=s.inflateEnd(this.strm),this.onEnd(g),this.ended=!0,g===u.Z_OK):b!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(R.avail_out=0))},h.prototype.onData=function(m){this.chunks.push(m)},h.prototype.onEnd=function(m){m===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},i.Inflate=h,i.inflate=y,i.inflateRaw=function(m,_){return(_=_||{}).raw=!0,y(m,_)},i.ungzip=y},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(u){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var d=c.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var f in d)d.hasOwnProperty(f)&&(u[f]=d[f])}}return u},i.shrinkBuf=function(u,c){return u.length===c?u:u.subarray?u.subarray(0,c):(u.length=c,u)};var o={arraySet:function(u,c,d,f,v){if(c.subarray&&u.subarray)u.set(c.subarray(d,d+f),v);else for(var h=0;h<f;h++)u[v+h]=c[d+h]},flattenChunks:function(u){var c,d,f,v,h,y;for(c=f=0,d=u.length;c<d;c++)f+=u[c].length;for(y=new Uint8Array(f),c=v=0,d=u.length;c<d;c++)h=u[c],y.set(h,v),v+=h.length;return y}},a={arraySet:function(u,c,d,f,v){for(var h=0;h<f;h++)u[v+h]=c[d+h]},flattenChunks:function(u){return[].concat.apply([],u)}};i.setTyped=function(u){u?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,o)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,a))},i.setTyped(s)},{}],42:[function(n,r,i){var s=n("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var u=new s.Buf8(256),c=0;c<256;c++)u[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function d(f,v){if(v<65537&&(f.subarray&&a||!f.subarray&&o))return String.fromCharCode.apply(null,s.shrinkBuf(f,v));for(var h="",y=0;y<v;y++)h+=String.fromCharCode(f[y]);return h}u[254]=u[254]=1,i.string2buf=function(f){var v,h,y,m,_,g=f.length,b=0;for(m=0;m<g;m++)(64512&(h=f.charCodeAt(m)))==55296&&m+1<g&&(64512&(y=f.charCodeAt(m+1)))==56320&&(h=65536+(h-55296<<10)+(y-56320),m++),b+=h<128?1:h<2048?2:h<65536?3:4;for(v=new s.Buf8(b),m=_=0;_<b;m++)(64512&(h=f.charCodeAt(m)))==55296&&m+1<g&&(64512&(y=f.charCodeAt(m+1)))==56320&&(h=65536+(h-55296<<10)+(y-56320),m++),h<128?v[_++]=h:(h<2048?v[_++]=192|h>>>6:(h<65536?v[_++]=224|h>>>12:(v[_++]=240|h>>>18,v[_++]=128|h>>>12&63),v[_++]=128|h>>>6&63),v[_++]=128|63&h);return v},i.buf2binstring=function(f){return d(f,f.length)},i.binstring2buf=function(f){for(var v=new s.Buf8(f.length),h=0,y=v.length;h<y;h++)v[h]=f.charCodeAt(h);return v},i.buf2string=function(f,v){var h,y,m,_,g=v||f.length,b=new Array(2*g);for(h=y=0;h<g;)if((m=f[h++])<128)b[y++]=m;else if(4<(_=u[m]))b[y++]=65533,h+=_-1;else{for(m&=_===2?31:_===3?15:7;1<_&&h<g;)m=m<<6|63&f[h++],_--;1<_?b[y++]=65533:m<65536?b[y++]=m:(m-=65536,b[y++]=55296|m>>10&1023,b[y++]=56320|1023&m)}return d(b,y)},i.utf8border=function(f,v){var h;for((v=v||f.length)>f.length&&(v=f.length),h=v-1;0<=h&&(192&f[h])==128;)h--;return h<0||h===0?v:h+u[f[h]]>v?h:v}},{"./common":41}],43:[function(n,r,i){r.exports=function(s,o,a,u){for(var c=65535&s|0,d=s>>>16&65535|0,f=0;a!==0;){for(a-=f=2e3<a?2e3:a;d=d+(c=c+o[u++]|0)|0,--f;);c%=65521,d%=65521}return c|d<<16|0}},{}],44:[function(n,r,i){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,i){var s=function(){for(var o,a=[],u=0;u<256;u++){o=u;for(var c=0;c<8;c++)o=1&o?3988292384^o>>>1:o>>>1;a[u]=o}return a}();r.exports=function(o,a,u,c){var d=s,f=c+u;o^=-1;for(var v=c;v<f;v++)o=o>>>8^d[255&(o^a[v])];return-1^o}},{}],46:[function(n,r,i){var s,o=n("../utils/common"),a=n("./trees"),u=n("./adler32"),c=n("./crc32"),d=n("./messages"),f=0,v=4,h=0,y=-2,m=-1,_=4,g=2,b=8,E=9,A=286,I=30,L=19,R=2*A+1,T=15,x=3,M=258,q=M+x+1,k=42,U=113,p=1,P=2,X=3,B=4;function H(l,z){return l.msg=d[z],z}function W(l){return(l<<1)-(4<l?9:0)}function J(l){for(var z=l.length;0<=--z;)l[z]=0}function N(l){var z=l.state,F=z.pending;F>l.avail_out&&(F=l.avail_out),F!==0&&(o.arraySet(l.output,z.pending_buf,z.pending_out,F,l.next_out),l.next_out+=F,z.pending_out+=F,l.total_out+=F,l.avail_out-=F,z.pending-=F,z.pending===0&&(z.pending_out=0))}function D(l,z){a._tr_flush_block(l,0<=l.block_start?l.block_start:-1,l.strstart-l.block_start,z),l.block_start=l.strstart,N(l.strm)}function te(l,z){l.pending_buf[l.pending++]=z}function K(l,z){l.pending_buf[l.pending++]=z>>>8&255,l.pending_buf[l.pending++]=255&z}function Z(l,z){var F,S,w=l.max_chain_length,C=l.strstart,j=l.prev_length,$=l.nice_match,O=l.strstart>l.w_size-q?l.strstart-(l.w_size-q):0,G=l.window,Y=l.w_mask,V=l.prev,ne=l.strstart+M,le=G[C+j-1],ue=G[C+j];l.prev_length>=l.good_match&&(w>>=2),$>l.lookahead&&($=l.lookahead);do if(G[(F=z)+j]===ue&&G[F+j-1]===le&&G[F]===G[C]&&G[++F]===G[C+1]){C+=2,F++;do;while(G[++C]===G[++F]&&G[++C]===G[++F]&&G[++C]===G[++F]&&G[++C]===G[++F]&&G[++C]===G[++F]&&G[++C]===G[++F]&&G[++C]===G[++F]&&G[++C]===G[++F]&&C<ne);if(S=M-(ne-C),C=ne-M,j<S){if(l.match_start=z,$<=(j=S))break;le=G[C+j-1],ue=G[C+j]}}while((z=V[z&Y])>O&&--w!=0);return j<=l.lookahead?j:l.lookahead}function de(l){var z,F,S,w,C,j,$,O,G,Y,V=l.w_size;do{if(w=l.window_size-l.lookahead-l.strstart,l.strstart>=V+(V-q)){for(o.arraySet(l.window,l.window,V,V,0),l.match_start-=V,l.strstart-=V,l.block_start-=V,z=F=l.hash_size;S=l.head[--z],l.head[z]=V<=S?S-V:0,--F;);for(z=F=V;S=l.prev[--z],l.prev[z]=V<=S?S-V:0,--F;);w+=V}if(l.strm.avail_in===0)break;if(j=l.strm,$=l.window,O=l.strstart+l.lookahead,G=w,Y=void 0,Y=j.avail_in,G<Y&&(Y=G),F=Y===0?0:(j.avail_in-=Y,o.arraySet($,j.input,j.next_in,Y,O),j.state.wrap===1?j.adler=u(j.adler,$,Y,O):j.state.wrap===2&&(j.adler=c(j.adler,$,Y,O)),j.next_in+=Y,j.total_in+=Y,Y),l.lookahead+=F,l.lookahead+l.insert>=x)for(C=l.strstart-l.insert,l.ins_h=l.window[C],l.ins_h=(l.ins_h<<l.hash_shift^l.window[C+1])&l.hash_mask;l.insert&&(l.ins_h=(l.ins_h<<l.hash_shift^l.window[C+x-1])&l.hash_mask,l.prev[C&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=C,C++,l.insert--,!(l.lookahead+l.insert<x)););}while(l.lookahead<q&&l.strm.avail_in!==0)}function ye(l,z){for(var F,S;;){if(l.lookahead<q){if(de(l),l.lookahead<q&&z===f)return p;if(l.lookahead===0)break}if(F=0,l.lookahead>=x&&(l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+x-1])&l.hash_mask,F=l.prev[l.strstart&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=l.strstart),F!==0&&l.strstart-F<=l.w_size-q&&(l.match_length=Z(l,F)),l.match_length>=x)if(S=a._tr_tally(l,l.strstart-l.match_start,l.match_length-x),l.lookahead-=l.match_length,l.match_length<=l.max_lazy_match&&l.lookahead>=x){for(l.match_length--;l.strstart++,l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+x-1])&l.hash_mask,F=l.prev[l.strstart&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=l.strstart,--l.match_length!=0;);l.strstart++}else l.strstart+=l.match_length,l.match_length=0,l.ins_h=l.window[l.strstart],l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+1])&l.hash_mask;else S=a._tr_tally(l,0,l.window[l.strstart]),l.lookahead--,l.strstart++;if(S&&(D(l,!1),l.strm.avail_out===0))return p}return l.insert=l.strstart<x-1?l.strstart:x-1,z===v?(D(l,!0),l.strm.avail_out===0?X:B):l.last_lit&&(D(l,!1),l.strm.avail_out===0)?p:P}function se(l,z){for(var F,S,w;;){if(l.lookahead<q){if(de(l),l.lookahead<q&&z===f)return p;if(l.lookahead===0)break}if(F=0,l.lookahead>=x&&(l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+x-1])&l.hash_mask,F=l.prev[l.strstart&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=l.strstart),l.prev_length=l.match_length,l.prev_match=l.match_start,l.match_length=x-1,F!==0&&l.prev_length<l.max_lazy_match&&l.strstart-F<=l.w_size-q&&(l.match_length=Z(l,F),l.match_length<=5&&(l.strategy===1||l.match_length===x&&4096<l.strstart-l.match_start)&&(l.match_length=x-1)),l.prev_length>=x&&l.match_length<=l.prev_length){for(w=l.strstart+l.lookahead-x,S=a._tr_tally(l,l.strstart-1-l.prev_match,l.prev_length-x),l.lookahead-=l.prev_length-1,l.prev_length-=2;++l.strstart<=w&&(l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+x-1])&l.hash_mask,F=l.prev[l.strstart&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=l.strstart),--l.prev_length!=0;);if(l.match_available=0,l.match_length=x-1,l.strstart++,S&&(D(l,!1),l.strm.avail_out===0))return p}else if(l.match_available){if((S=a._tr_tally(l,0,l.window[l.strstart-1]))&&D(l,!1),l.strstart++,l.lookahead--,l.strm.avail_out===0)return p}else l.match_available=1,l.strstart++,l.lookahead--}return l.match_available&&(S=a._tr_tally(l,0,l.window[l.strstart-1]),l.match_available=0),l.insert=l.strstart<x-1?l.strstart:x-1,z===v?(D(l,!0),l.strm.avail_out===0?X:B):l.last_lit&&(D(l,!1),l.strm.avail_out===0)?p:P}function ae(l,z,F,S,w){this.good_length=l,this.max_lazy=z,this.nice_length=F,this.max_chain=S,this.func=w}function Ee(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=b,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*R),this.dyn_dtree=new o.Buf16(2*(2*I+1)),this.bl_tree=new o.Buf16(2*(2*L+1)),J(this.dyn_ltree),J(this.dyn_dtree),J(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(T+1),this.heap=new o.Buf16(2*A+1),J(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*A+1),J(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function fe(l){var z;return l&&l.state?(l.total_in=l.total_out=0,l.data_type=g,(z=l.state).pending=0,z.pending_out=0,z.wrap<0&&(z.wrap=-z.wrap),z.status=z.wrap?k:U,l.adler=z.wrap===2?0:1,z.last_flush=f,a._tr_init(z),h):H(l,y)}function $e(l){var z=fe(l);return z===h&&function(F){F.window_size=2*F.w_size,J(F.head),F.max_lazy_match=s[F.level].max_lazy,F.good_match=s[F.level].good_length,F.nice_match=s[F.level].nice_length,F.max_chain_length=s[F.level].max_chain,F.strstart=0,F.block_start=0,F.lookahead=0,F.insert=0,F.match_length=F.prev_length=x-1,F.match_available=0,F.ins_h=0}(l.state),z}function Be(l,z,F,S,w,C){if(!l)return y;var j=1;if(z===m&&(z=6),S<0?(j=0,S=-S):15<S&&(j=2,S-=16),w<1||E<w||F!==b||S<8||15<S||z<0||9<z||C<0||_<C)return H(l,y);S===8&&(S=9);var $=new Ee;return(l.state=$).strm=l,$.wrap=j,$.gzhead=null,$.w_bits=S,$.w_size=1<<$.w_bits,$.w_mask=$.w_size-1,$.hash_bits=w+7,$.hash_size=1<<$.hash_bits,$.hash_mask=$.hash_size-1,$.hash_shift=~~(($.hash_bits+x-1)/x),$.window=new o.Buf8(2*$.w_size),$.head=new o.Buf16($.hash_size),$.prev=new o.Buf16($.w_size),$.lit_bufsize=1<<w+6,$.pending_buf_size=4*$.lit_bufsize,$.pending_buf=new o.Buf8($.pending_buf_size),$.d_buf=1*$.lit_bufsize,$.l_buf=3*$.lit_bufsize,$.level=z,$.strategy=C,$.method=F,$e(l)}s=[new ae(0,0,0,0,function(l,z){var F=65535;for(F>l.pending_buf_size-5&&(F=l.pending_buf_size-5);;){if(l.lookahead<=1){if(de(l),l.lookahead===0&&z===f)return p;if(l.lookahead===0)break}l.strstart+=l.lookahead,l.lookahead=0;var S=l.block_start+F;if((l.strstart===0||l.strstart>=S)&&(l.lookahead=l.strstart-S,l.strstart=S,D(l,!1),l.strm.avail_out===0)||l.strstart-l.block_start>=l.w_size-q&&(D(l,!1),l.strm.avail_out===0))return p}return l.insert=0,z===v?(D(l,!0),l.strm.avail_out===0?X:B):(l.strstart>l.block_start&&(D(l,!1),l.strm.avail_out),p)}),new ae(4,4,8,4,ye),new ae(4,5,16,8,ye),new ae(4,6,32,32,ye),new ae(4,4,16,16,se),new ae(8,16,32,32,se),new ae(8,16,128,128,se),new ae(8,32,128,256,se),new ae(32,128,258,1024,se),new ae(32,258,258,4096,se)],i.deflateInit=function(l,z){return Be(l,z,b,15,8,0)},i.deflateInit2=Be,i.deflateReset=$e,i.deflateResetKeep=fe,i.deflateSetHeader=function(l,z){return l&&l.state?l.state.wrap!==2?y:(l.state.gzhead=z,h):y},i.deflate=function(l,z){var F,S,w,C;if(!l||!l.state||5<z||z<0)return l?H(l,y):y;if(S=l.state,!l.output||!l.input&&l.avail_in!==0||S.status===666&&z!==v)return H(l,l.avail_out===0?-5:y);if(S.strm=l,F=S.last_flush,S.last_flush=z,S.status===k)if(S.wrap===2)l.adler=0,te(S,31),te(S,139),te(S,8),S.gzhead?(te(S,(S.gzhead.text?1:0)+(S.gzhead.hcrc?2:0)+(S.gzhead.extra?4:0)+(S.gzhead.name?8:0)+(S.gzhead.comment?16:0)),te(S,255&S.gzhead.time),te(S,S.gzhead.time>>8&255),te(S,S.gzhead.time>>16&255),te(S,S.gzhead.time>>24&255),te(S,S.level===9?2:2<=S.strategy||S.level<2?4:0),te(S,255&S.gzhead.os),S.gzhead.extra&&S.gzhead.extra.length&&(te(S,255&S.gzhead.extra.length),te(S,S.gzhead.extra.length>>8&255)),S.gzhead.hcrc&&(l.adler=c(l.adler,S.pending_buf,S.pending,0)),S.gzindex=0,S.status=69):(te(S,0),te(S,0),te(S,0),te(S,0),te(S,0),te(S,S.level===9?2:2<=S.strategy||S.level<2?4:0),te(S,3),S.status=U);else{var j=b+(S.w_bits-8<<4)<<8;j|=(2<=S.strategy||S.level<2?0:S.level<6?1:S.level===6?2:3)<<6,S.strstart!==0&&(j|=32),j+=31-j%31,S.status=U,K(S,j),S.strstart!==0&&(K(S,l.adler>>>16),K(S,65535&l.adler)),l.adler=1}if(S.status===69)if(S.gzhead.extra){for(w=S.pending;S.gzindex<(65535&S.gzhead.extra.length)&&(S.pending!==S.pending_buf_size||(S.gzhead.hcrc&&S.pending>w&&(l.adler=c(l.adler,S.pending_buf,S.pending-w,w)),N(l),w=S.pending,S.pending!==S.pending_buf_size));)te(S,255&S.gzhead.extra[S.gzindex]),S.gzindex++;S.gzhead.hcrc&&S.pending>w&&(l.adler=c(l.adler,S.pending_buf,S.pending-w,w)),S.gzindex===S.gzhead.extra.length&&(S.gzindex=0,S.status=73)}else S.status=73;if(S.status===73)if(S.gzhead.name){w=S.pending;do{if(S.pending===S.pending_buf_size&&(S.gzhead.hcrc&&S.pending>w&&(l.adler=c(l.adler,S.pending_buf,S.pending-w,w)),N(l),w=S.pending,S.pending===S.pending_buf_size)){C=1;break}C=S.gzindex<S.gzhead.name.length?255&S.gzhead.name.charCodeAt(S.gzindex++):0,te(S,C)}while(C!==0);S.gzhead.hcrc&&S.pending>w&&(l.adler=c(l.adler,S.pending_buf,S.pending-w,w)),C===0&&(S.gzindex=0,S.status=91)}else S.status=91;if(S.status===91)if(S.gzhead.comment){w=S.pending;do{if(S.pending===S.pending_buf_size&&(S.gzhead.hcrc&&S.pending>w&&(l.adler=c(l.adler,S.pending_buf,S.pending-w,w)),N(l),w=S.pending,S.pending===S.pending_buf_size)){C=1;break}C=S.gzindex<S.gzhead.comment.length?255&S.gzhead.comment.charCodeAt(S.gzindex++):0,te(S,C)}while(C!==0);S.gzhead.hcrc&&S.pending>w&&(l.adler=c(l.adler,S.pending_buf,S.pending-w,w)),C===0&&(S.status=103)}else S.status=103;if(S.status===103&&(S.gzhead.hcrc?(S.pending+2>S.pending_buf_size&&N(l),S.pending+2<=S.pending_buf_size&&(te(S,255&l.adler),te(S,l.adler>>8&255),l.adler=0,S.status=U)):S.status=U),S.pending!==0){if(N(l),l.avail_out===0)return S.last_flush=-1,h}else if(l.avail_in===0&&W(z)<=W(F)&&z!==v)return H(l,-5);if(S.status===666&&l.avail_in!==0)return H(l,-5);if(l.avail_in!==0||S.lookahead!==0||z!==f&&S.status!==666){var $=S.strategy===2?function(O,G){for(var Y;;){if(O.lookahead===0&&(de(O),O.lookahead===0)){if(G===f)return p;break}if(O.match_length=0,Y=a._tr_tally(O,0,O.window[O.strstart]),O.lookahead--,O.strstart++,Y&&(D(O,!1),O.strm.avail_out===0))return p}return O.insert=0,G===v?(D(O,!0),O.strm.avail_out===0?X:B):O.last_lit&&(D(O,!1),O.strm.avail_out===0)?p:P}(S,z):S.strategy===3?function(O,G){for(var Y,V,ne,le,ue=O.window;;){if(O.lookahead<=M){if(de(O),O.lookahead<=M&&G===f)return p;if(O.lookahead===0)break}if(O.match_length=0,O.lookahead>=x&&0<O.strstart&&(V=ue[ne=O.strstart-1])===ue[++ne]&&V===ue[++ne]&&V===ue[++ne]){le=O.strstart+M;do;while(V===ue[++ne]&&V===ue[++ne]&&V===ue[++ne]&&V===ue[++ne]&&V===ue[++ne]&&V===ue[++ne]&&V===ue[++ne]&&V===ue[++ne]&&ne<le);O.match_length=M-(le-ne),O.match_length>O.lookahead&&(O.match_length=O.lookahead)}if(O.match_length>=x?(Y=a._tr_tally(O,1,O.match_length-x),O.lookahead-=O.match_length,O.strstart+=O.match_length,O.match_length=0):(Y=a._tr_tally(O,0,O.window[O.strstart]),O.lookahead--,O.strstart++),Y&&(D(O,!1),O.strm.avail_out===0))return p}return O.insert=0,G===v?(D(O,!0),O.strm.avail_out===0?X:B):O.last_lit&&(D(O,!1),O.strm.avail_out===0)?p:P}(S,z):s[S.level].func(S,z);if($!==X&&$!==B||(S.status=666),$===p||$===X)return l.avail_out===0&&(S.last_flush=-1),h;if($===P&&(z===1?a._tr_align(S):z!==5&&(a._tr_stored_block(S,0,0,!1),z===3&&(J(S.head),S.lookahead===0&&(S.strstart=0,S.block_start=0,S.insert=0))),N(l),l.avail_out===0))return S.last_flush=-1,h}return z!==v?h:S.wrap<=0?1:(S.wrap===2?(te(S,255&l.adler),te(S,l.adler>>8&255),te(S,l.adler>>16&255),te(S,l.adler>>24&255),te(S,255&l.total_in),te(S,l.total_in>>8&255),te(S,l.total_in>>16&255),te(S,l.total_in>>24&255)):(K(S,l.adler>>>16),K(S,65535&l.adler)),N(l),0<S.wrap&&(S.wrap=-S.wrap),S.pending!==0?h:1)},i.deflateEnd=function(l){var z;return l&&l.state?(z=l.state.status)!==k&&z!==69&&z!==73&&z!==91&&z!==103&&z!==U&&z!==666?H(l,y):(l.state=null,z===U?H(l,-3):h):y},i.deflateSetDictionary=function(l,z){var F,S,w,C,j,$,O,G,Y=z.length;if(!l||!l.state||(C=(F=l.state).wrap)===2||C===1&&F.status!==k||F.lookahead)return y;for(C===1&&(l.adler=u(l.adler,z,Y,0)),F.wrap=0,Y>=F.w_size&&(C===0&&(J(F.head),F.strstart=0,F.block_start=0,F.insert=0),G=new o.Buf8(F.w_size),o.arraySet(G,z,Y-F.w_size,F.w_size,0),z=G,Y=F.w_size),j=l.avail_in,$=l.next_in,O=l.input,l.avail_in=Y,l.next_in=0,l.input=z,de(F);F.lookahead>=x;){for(S=F.strstart,w=F.lookahead-(x-1);F.ins_h=(F.ins_h<<F.hash_shift^F.window[S+x-1])&F.hash_mask,F.prev[S&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=S,S++,--w;);F.strstart=S,F.lookahead=x-1,de(F)}return F.strstart+=F.lookahead,F.block_start=F.strstart,F.insert=F.lookahead,F.lookahead=0,F.match_length=F.prev_length=x-1,F.match_available=0,l.next_in=$,l.input=O,l.avail_in=j,F.wrap=C,h},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,i){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,i){r.exports=function(s,o){var a,u,c,d,f,v,h,y,m,_,g,b,E,A,I,L,R,T,x,M,q,k,U,p,P;a=s.state,u=s.next_in,p=s.input,c=u+(s.avail_in-5),d=s.next_out,P=s.output,f=d-(o-s.avail_out),v=d+(s.avail_out-257),h=a.dmax,y=a.wsize,m=a.whave,_=a.wnext,g=a.window,b=a.hold,E=a.bits,A=a.lencode,I=a.distcode,L=(1<<a.lenbits)-1,R=(1<<a.distbits)-1;e:do{E<15&&(b+=p[u++]<<E,E+=8,b+=p[u++]<<E,E+=8),T=A[b&L];t:for(;;){if(b>>>=x=T>>>24,E-=x,(x=T>>>16&255)===0)P[d++]=65535&T;else{if(!(16&x)){if((64&x)==0){T=A[(65535&T)+(b&(1<<x)-1)];continue t}if(32&x){a.mode=12;break e}s.msg="invalid literal/length code",a.mode=30;break e}M=65535&T,(x&=15)&&(E<x&&(b+=p[u++]<<E,E+=8),M+=b&(1<<x)-1,b>>>=x,E-=x),E<15&&(b+=p[u++]<<E,E+=8,b+=p[u++]<<E,E+=8),T=I[b&R];n:for(;;){if(b>>>=x=T>>>24,E-=x,!(16&(x=T>>>16&255))){if((64&x)==0){T=I[(65535&T)+(b&(1<<x)-1)];continue n}s.msg="invalid distance code",a.mode=30;break e}if(q=65535&T,E<(x&=15)&&(b+=p[u++]<<E,(E+=8)<x&&(b+=p[u++]<<E,E+=8)),h<(q+=b&(1<<x)-1)){s.msg="invalid distance too far back",a.mode=30;break e}if(b>>>=x,E-=x,(x=d-f)<q){if(m<(x=q-x)&&a.sane){s.msg="invalid distance too far back",a.mode=30;break e}if(U=g,(k=0)===_){if(k+=y-x,x<M){for(M-=x;P[d++]=g[k++],--x;);k=d-q,U=P}}else if(_<x){if(k+=y+_-x,(x-=_)<M){for(M-=x;P[d++]=g[k++],--x;);if(k=0,_<M){for(M-=x=_;P[d++]=g[k++],--x;);k=d-q,U=P}}}else if(k+=_-x,x<M){for(M-=x;P[d++]=g[k++],--x;);k=d-q,U=P}for(;2<M;)P[d++]=U[k++],P[d++]=U[k++],P[d++]=U[k++],M-=3;M&&(P[d++]=U[k++],1<M&&(P[d++]=U[k++]))}else{for(k=d-q;P[d++]=P[k++],P[d++]=P[k++],P[d++]=P[k++],2<(M-=3););M&&(P[d++]=P[k++],1<M&&(P[d++]=P[k++]))}break}}break}}while(u<c&&d<v);u-=M=E>>3,b&=(1<<(E-=M<<3))-1,s.next_in=u,s.next_out=d,s.avail_in=u<c?c-u+5:5-(u-c),s.avail_out=d<v?v-d+257:257-(d-v),a.hold=b,a.bits=E}},{}],49:[function(n,r,i){var s=n("../utils/common"),o=n("./adler32"),a=n("./crc32"),u=n("./inffast"),c=n("./inftrees"),d=1,f=2,v=0,h=-2,y=1,m=852,_=592;function g(k){return(k>>>24&255)+(k>>>8&65280)+((65280&k)<<8)+((255&k)<<24)}function b(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function E(k){var U;return k&&k.state?(U=k.state,k.total_in=k.total_out=U.total=0,k.msg="",U.wrap&&(k.adler=1&U.wrap),U.mode=y,U.last=0,U.havedict=0,U.dmax=32768,U.head=null,U.hold=0,U.bits=0,U.lencode=U.lendyn=new s.Buf32(m),U.distcode=U.distdyn=new s.Buf32(_),U.sane=1,U.back=-1,v):h}function A(k){var U;return k&&k.state?((U=k.state).wsize=0,U.whave=0,U.wnext=0,E(k)):h}function I(k,U){var p,P;return k&&k.state?(P=k.state,U<0?(p=0,U=-U):(p=1+(U>>4),U<48&&(U&=15)),U&&(U<8||15<U)?h:(P.window!==null&&P.wbits!==U&&(P.window=null),P.wrap=p,P.wbits=U,A(k))):h}function L(k,U){var p,P;return k?(P=new b,(k.state=P).window=null,(p=I(k,U))!==v&&(k.state=null),p):h}var R,T,x=!0;function M(k){if(x){var U;for(R=new s.Buf32(512),T=new s.Buf32(32),U=0;U<144;)k.lens[U++]=8;for(;U<256;)k.lens[U++]=9;for(;U<280;)k.lens[U++]=7;for(;U<288;)k.lens[U++]=8;for(c(d,k.lens,0,288,R,0,k.work,{bits:9}),U=0;U<32;)k.lens[U++]=5;c(f,k.lens,0,32,T,0,k.work,{bits:5}),x=!1}k.lencode=R,k.lenbits=9,k.distcode=T,k.distbits=5}function q(k,U,p,P){var X,B=k.state;return B.window===null&&(B.wsize=1<<B.wbits,B.wnext=0,B.whave=0,B.window=new s.Buf8(B.wsize)),P>=B.wsize?(s.arraySet(B.window,U,p-B.wsize,B.wsize,0),B.wnext=0,B.whave=B.wsize):(P<(X=B.wsize-B.wnext)&&(X=P),s.arraySet(B.window,U,p-P,X,B.wnext),(P-=X)?(s.arraySet(B.window,U,p-P,P,0),B.wnext=P,B.whave=B.wsize):(B.wnext+=X,B.wnext===B.wsize&&(B.wnext=0),B.whave<B.wsize&&(B.whave+=X))),0}i.inflateReset=A,i.inflateReset2=I,i.inflateResetKeep=E,i.inflateInit=function(k){return L(k,15)},i.inflateInit2=L,i.inflate=function(k,U){var p,P,X,B,H,W,J,N,D,te,K,Z,de,ye,se,ae,Ee,fe,$e,Be,l,z,F,S,w=0,C=new s.Buf8(4),j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!k||!k.state||!k.output||!k.input&&k.avail_in!==0)return h;(p=k.state).mode===12&&(p.mode=13),H=k.next_out,X=k.output,J=k.avail_out,B=k.next_in,P=k.input,W=k.avail_in,N=p.hold,D=p.bits,te=W,K=J,z=v;e:for(;;)switch(p.mode){case y:if(p.wrap===0){p.mode=13;break}for(;D<16;){if(W===0)break e;W--,N+=P[B++]<<D,D+=8}if(2&p.wrap&&N===35615){C[p.check=0]=255&N,C[1]=N>>>8&255,p.check=a(p.check,C,2,0),D=N=0,p.mode=2;break}if(p.flags=0,p.head&&(p.head.done=!1),!(1&p.wrap)||(((255&N)<<8)+(N>>8))%31){k.msg="incorrect header check",p.mode=30;break}if((15&N)!=8){k.msg="unknown compression method",p.mode=30;break}if(D-=4,l=8+(15&(N>>>=4)),p.wbits===0)p.wbits=l;else if(l>p.wbits){k.msg="invalid window size",p.mode=30;break}p.dmax=1<<l,k.adler=p.check=1,p.mode=512&N?10:12,D=N=0;break;case 2:for(;D<16;){if(W===0)break e;W--,N+=P[B++]<<D,D+=8}if(p.flags=N,(255&p.flags)!=8){k.msg="unknown compression method",p.mode=30;break}if(57344&p.flags){k.msg="unknown header flags set",p.mode=30;break}p.head&&(p.head.text=N>>8&1),512&p.flags&&(C[0]=255&N,C[1]=N>>>8&255,p.check=a(p.check,C,2,0)),D=N=0,p.mode=3;case 3:for(;D<32;){if(W===0)break e;W--,N+=P[B++]<<D,D+=8}p.head&&(p.head.time=N),512&p.flags&&(C[0]=255&N,C[1]=N>>>8&255,C[2]=N>>>16&255,C[3]=N>>>24&255,p.check=a(p.check,C,4,0)),D=N=0,p.mode=4;case 4:for(;D<16;){if(W===0)break e;W--,N+=P[B++]<<D,D+=8}p.head&&(p.head.xflags=255&N,p.head.os=N>>8),512&p.flags&&(C[0]=255&N,C[1]=N>>>8&255,p.check=a(p.check,C,2,0)),D=N=0,p.mode=5;case 5:if(1024&p.flags){for(;D<16;){if(W===0)break e;W--,N+=P[B++]<<D,D+=8}p.length=N,p.head&&(p.head.extra_len=N),512&p.flags&&(C[0]=255&N,C[1]=N>>>8&255,p.check=a(p.check,C,2,0)),D=N=0}else p.head&&(p.head.extra=null);p.mode=6;case 6:if(1024&p.flags&&(W<(Z=p.length)&&(Z=W),Z&&(p.head&&(l=p.head.extra_len-p.length,p.head.extra||(p.head.extra=new Array(p.head.extra_len)),s.arraySet(p.head.extra,P,B,Z,l)),512&p.flags&&(p.check=a(p.check,P,Z,B)),W-=Z,B+=Z,p.length-=Z),p.length))break e;p.length=0,p.mode=7;case 7:if(2048&p.flags){if(W===0)break e;for(Z=0;l=P[B+Z++],p.head&&l&&p.length<65536&&(p.head.name+=String.fromCharCode(l)),l&&Z<W;);if(512&p.flags&&(p.check=a(p.check,P,Z,B)),W-=Z,B+=Z,l)break e}else p.head&&(p.head.name=null);p.length=0,p.mode=8;case 8:if(4096&p.flags){if(W===0)break e;for(Z=0;l=P[B+Z++],p.head&&l&&p.length<65536&&(p.head.comment+=String.fromCharCode(l)),l&&Z<W;);if(512&p.flags&&(p.check=a(p.check,P,Z,B)),W-=Z,B+=Z,l)break e}else p.head&&(p.head.comment=null);p.mode=9;case 9:if(512&p.flags){for(;D<16;){if(W===0)break e;W--,N+=P[B++]<<D,D+=8}if(N!==(65535&p.check)){k.msg="header crc mismatch",p.mode=30;break}D=N=0}p.head&&(p.head.hcrc=p.flags>>9&1,p.head.done=!0),k.adler=p.check=0,p.mode=12;break;case 10:for(;D<32;){if(W===0)break e;W--,N+=P[B++]<<D,D+=8}k.adler=p.check=g(N),D=N=0,p.mode=11;case 11:if(p.havedict===0)return k.next_out=H,k.avail_out=J,k.next_in=B,k.avail_in=W,p.hold=N,p.bits=D,2;k.adler=p.check=1,p.mode=12;case 12:if(U===5||U===6)break e;case 13:if(p.last){N>>>=7&D,D-=7&D,p.mode=27;break}for(;D<3;){if(W===0)break e;W--,N+=P[B++]<<D,D+=8}switch(p.last=1&N,D-=1,3&(N>>>=1)){case 0:p.mode=14;break;case 1:if(M(p),p.mode=20,U!==6)break;N>>>=2,D-=2;break e;case 2:p.mode=17;break;case 3:k.msg="invalid block type",p.mode=30}N>>>=2,D-=2;break;case 14:for(N>>>=7&D,D-=7&D;D<32;){if(W===0)break e;W--,N+=P[B++]<<D,D+=8}if((65535&N)!=(N>>>16^65535)){k.msg="invalid stored block lengths",p.mode=30;break}if(p.length=65535&N,D=N=0,p.mode=15,U===6)break e;case 15:p.mode=16;case 16:if(Z=p.length){if(W<Z&&(Z=W),J<Z&&(Z=J),Z===0)break e;s.arraySet(X,P,B,Z,H),W-=Z,B+=Z,J-=Z,H+=Z,p.length-=Z;break}p.mode=12;break;case 17:for(;D<14;){if(W===0)break e;W--,N+=P[B++]<<D,D+=8}if(p.nlen=257+(31&N),N>>>=5,D-=5,p.ndist=1+(31&N),N>>>=5,D-=5,p.ncode=4+(15&N),N>>>=4,D-=4,286<p.nlen||30<p.ndist){k.msg="too many length or distance symbols",p.mode=30;break}p.have=0,p.mode=18;case 18:for(;p.have<p.ncode;){for(;D<3;){if(W===0)break e;W--,N+=P[B++]<<D,D+=8}p.lens[j[p.have++]]=7&N,N>>>=3,D-=3}for(;p.have<19;)p.lens[j[p.have++]]=0;if(p.lencode=p.lendyn,p.lenbits=7,F={bits:p.lenbits},z=c(0,p.lens,0,19,p.lencode,0,p.work,F),p.lenbits=F.bits,z){k.msg="invalid code lengths set",p.mode=30;break}p.have=0,p.mode=19;case 19:for(;p.have<p.nlen+p.ndist;){for(;ae=(w=p.lencode[N&(1<<p.lenbits)-1])>>>16&255,Ee=65535&w,!((se=w>>>24)<=D);){if(W===0)break e;W--,N+=P[B++]<<D,D+=8}if(Ee<16)N>>>=se,D-=se,p.lens[p.have++]=Ee;else{if(Ee===16){for(S=se+2;D<S;){if(W===0)break e;W--,N+=P[B++]<<D,D+=8}if(N>>>=se,D-=se,p.have===0){k.msg="invalid bit length repeat",p.mode=30;break}l=p.lens[p.have-1],Z=3+(3&N),N>>>=2,D-=2}else if(Ee===17){for(S=se+3;D<S;){if(W===0)break e;W--,N+=P[B++]<<D,D+=8}D-=se,l=0,Z=3+(7&(N>>>=se)),N>>>=3,D-=3}else{for(S=se+7;D<S;){if(W===0)break e;W--,N+=P[B++]<<D,D+=8}D-=se,l=0,Z=11+(127&(N>>>=se)),N>>>=7,D-=7}if(p.have+Z>p.nlen+p.ndist){k.msg="invalid bit length repeat",p.mode=30;break}for(;Z--;)p.lens[p.have++]=l}}if(p.mode===30)break;if(p.lens[256]===0){k.msg="invalid code -- missing end-of-block",p.mode=30;break}if(p.lenbits=9,F={bits:p.lenbits},z=c(d,p.lens,0,p.nlen,p.lencode,0,p.work,F),p.lenbits=F.bits,z){k.msg="invalid literal/lengths set",p.mode=30;break}if(p.distbits=6,p.distcode=p.distdyn,F={bits:p.distbits},z=c(f,p.lens,p.nlen,p.ndist,p.distcode,0,p.work,F),p.distbits=F.bits,z){k.msg="invalid distances set",p.mode=30;break}if(p.mode=20,U===6)break e;case 20:p.mode=21;case 21:if(6<=W&&258<=J){k.next_out=H,k.avail_out=J,k.next_in=B,k.avail_in=W,p.hold=N,p.bits=D,u(k,K),H=k.next_out,X=k.output,J=k.avail_out,B=k.next_in,P=k.input,W=k.avail_in,N=p.hold,D=p.bits,p.mode===12&&(p.back=-1);break}for(p.back=0;ae=(w=p.lencode[N&(1<<p.lenbits)-1])>>>16&255,Ee=65535&w,!((se=w>>>24)<=D);){if(W===0)break e;W--,N+=P[B++]<<D,D+=8}if(ae&&(240&ae)==0){for(fe=se,$e=ae,Be=Ee;ae=(w=p.lencode[Be+((N&(1<<fe+$e)-1)>>fe)])>>>16&255,Ee=65535&w,!(fe+(se=w>>>24)<=D);){if(W===0)break e;W--,N+=P[B++]<<D,D+=8}N>>>=fe,D-=fe,p.back+=fe}if(N>>>=se,D-=se,p.back+=se,p.length=Ee,ae===0){p.mode=26;break}if(32&ae){p.back=-1,p.mode=12;break}if(64&ae){k.msg="invalid literal/length code",p.mode=30;break}p.extra=15&ae,p.mode=22;case 22:if(p.extra){for(S=p.extra;D<S;){if(W===0)break e;W--,N+=P[B++]<<D,D+=8}p.length+=N&(1<<p.extra)-1,N>>>=p.extra,D-=p.extra,p.back+=p.extra}p.was=p.length,p.mode=23;case 23:for(;ae=(w=p.distcode[N&(1<<p.distbits)-1])>>>16&255,Ee=65535&w,!((se=w>>>24)<=D);){if(W===0)break e;W--,N+=P[B++]<<D,D+=8}if((240&ae)==0){for(fe=se,$e=ae,Be=Ee;ae=(w=p.distcode[Be+((N&(1<<fe+$e)-1)>>fe)])>>>16&255,Ee=65535&w,!(fe+(se=w>>>24)<=D);){if(W===0)break e;W--,N+=P[B++]<<D,D+=8}N>>>=fe,D-=fe,p.back+=fe}if(N>>>=se,D-=se,p.back+=se,64&ae){k.msg="invalid distance code",p.mode=30;break}p.offset=Ee,p.extra=15&ae,p.mode=24;case 24:if(p.extra){for(S=p.extra;D<S;){if(W===0)break e;W--,N+=P[B++]<<D,D+=8}p.offset+=N&(1<<p.extra)-1,N>>>=p.extra,D-=p.extra,p.back+=p.extra}if(p.offset>p.dmax){k.msg="invalid distance too far back",p.mode=30;break}p.mode=25;case 25:if(J===0)break e;if(Z=K-J,p.offset>Z){if((Z=p.offset-Z)>p.whave&&p.sane){k.msg="invalid distance too far back",p.mode=30;break}de=Z>p.wnext?(Z-=p.wnext,p.wsize-Z):p.wnext-Z,Z>p.length&&(Z=p.length),ye=p.window}else ye=X,de=H-p.offset,Z=p.length;for(J<Z&&(Z=J),J-=Z,p.length-=Z;X[H++]=ye[de++],--Z;);p.length===0&&(p.mode=21);break;case 26:if(J===0)break e;X[H++]=p.length,J--,p.mode=21;break;case 27:if(p.wrap){for(;D<32;){if(W===0)break e;W--,N|=P[B++]<<D,D+=8}if(K-=J,k.total_out+=K,p.total+=K,K&&(k.adler=p.check=p.flags?a(p.check,X,K,H-K):o(p.check,X,K,H-K)),K=J,(p.flags?N:g(N))!==p.check){k.msg="incorrect data check",p.mode=30;break}D=N=0}p.mode=28;case 28:if(p.wrap&&p.flags){for(;D<32;){if(W===0)break e;W--,N+=P[B++]<<D,D+=8}if(N!==(4294967295&p.total)){k.msg="incorrect length check",p.mode=30;break}D=N=0}p.mode=29;case 29:z=1;break e;case 30:z=-3;break e;case 31:return-4;case 32:default:return h}return k.next_out=H,k.avail_out=J,k.next_in=B,k.avail_in=W,p.hold=N,p.bits=D,(p.wsize||K!==k.avail_out&&p.mode<30&&(p.mode<27||U!==4))&&q(k,k.output,k.next_out,K-k.avail_out)?(p.mode=31,-4):(te-=k.avail_in,K-=k.avail_out,k.total_in+=te,k.total_out+=K,p.total+=K,p.wrap&&K&&(k.adler=p.check=p.flags?a(p.check,X,K,k.next_out-K):o(p.check,X,K,k.next_out-K)),k.data_type=p.bits+(p.last?64:0)+(p.mode===12?128:0)+(p.mode===20||p.mode===15?256:0),(te==0&&K===0||U===4)&&z===v&&(z=-5),z)},i.inflateEnd=function(k){if(!k||!k.state)return h;var U=k.state;return U.window&&(U.window=null),k.state=null,v},i.inflateGetHeader=function(k,U){var p;return k&&k.state?(2&(p=k.state).wrap)==0?h:((p.head=U).done=!1,v):h},i.inflateSetDictionary=function(k,U){var p,P=U.length;return k&&k.state?(p=k.state).wrap!==0&&p.mode!==11?h:p.mode===11&&o(1,U,P,0)!==p.check?-3:q(k,U,P,P)?(p.mode=31,-4):(p.havedict=1,v):h},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,i){var s=n("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(d,f,v,h,y,m,_,g){var b,E,A,I,L,R,T,x,M,q=g.bits,k=0,U=0,p=0,P=0,X=0,B=0,H=0,W=0,J=0,N=0,D=null,te=0,K=new s.Buf16(16),Z=new s.Buf16(16),de=null,ye=0;for(k=0;k<=15;k++)K[k]=0;for(U=0;U<h;U++)K[f[v+U]]++;for(X=q,P=15;1<=P&&K[P]===0;P--);if(P<X&&(X=P),P===0)return y[m++]=20971520,y[m++]=20971520,g.bits=1,0;for(p=1;p<P&&K[p]===0;p++);for(X<p&&(X=p),k=W=1;k<=15;k++)if(W<<=1,(W-=K[k])<0)return-1;if(0<W&&(d===0||P!==1))return-1;for(Z[1]=0,k=1;k<15;k++)Z[k+1]=Z[k]+K[k];for(U=0;U<h;U++)f[v+U]!==0&&(_[Z[f[v+U]]++]=U);if(R=d===0?(D=de=_,19):d===1?(D=o,te-=257,de=a,ye-=257,256):(D=u,de=c,-1),k=p,L=m,H=U=N=0,A=-1,I=(J=1<<(B=X))-1,d===1&&852<J||d===2&&592<J)return 1;for(;;){for(T=k-H,M=_[U]<R?(x=0,_[U]):_[U]>R?(x=de[ye+_[U]],D[te+_[U]]):(x=96,0),b=1<<k-H,p=E=1<<B;y[L+(N>>H)+(E-=b)]=T<<24|x<<16|M|0,E!==0;);for(b=1<<k-1;N&b;)b>>=1;if(b!==0?(N&=b-1,N+=b):N=0,U++,--K[k]==0){if(k===P)break;k=f[v+_[U]]}if(X<k&&(N&I)!==A){for(H===0&&(H=X),L+=p,W=1<<(B=k-H);B+H<P&&!((W-=K[B+H])<=0);)B++,W<<=1;if(J+=1<<B,d===1&&852<J||d===2&&592<J)return 1;y[A=N&I]=X<<24|B<<16|L-m|0}}return N!==0&&(y[L+N]=k-H<<24|64<<16|0),g.bits=X,0}},{"../utils/common":41}],51:[function(n,r,i){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,i){var s=n("../utils/common"),o=0,a=1;function u(w){for(var C=w.length;0<=--C;)w[C]=0}var c=0,d=29,f=256,v=f+1+d,h=30,y=19,m=2*v+1,_=15,g=16,b=7,E=256,A=16,I=17,L=18,R=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],T=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],x=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],q=new Array(2*(v+2));u(q);var k=new Array(2*h);u(k);var U=new Array(512);u(U);var p=new Array(256);u(p);var P=new Array(d);u(P);var X,B,H,W=new Array(h);function J(w,C,j,$,O){this.static_tree=w,this.extra_bits=C,this.extra_base=j,this.elems=$,this.max_length=O,this.has_stree=w&&w.length}function N(w,C){this.dyn_tree=w,this.max_code=0,this.stat_desc=C}function D(w){return w<256?U[w]:U[256+(w>>>7)]}function te(w,C){w.pending_buf[w.pending++]=255&C,w.pending_buf[w.pending++]=C>>>8&255}function K(w,C,j){w.bi_valid>g-j?(w.bi_buf|=C<<w.bi_valid&65535,te(w,w.bi_buf),w.bi_buf=C>>g-w.bi_valid,w.bi_valid+=j-g):(w.bi_buf|=C<<w.bi_valid&65535,w.bi_valid+=j)}function Z(w,C,j){K(w,j[2*C],j[2*C+1])}function de(w,C){for(var j=0;j|=1&w,w>>>=1,j<<=1,0<--C;);return j>>>1}function ye(w,C,j){var $,O,G=new Array(_+1),Y=0;for($=1;$<=_;$++)G[$]=Y=Y+j[$-1]<<1;for(O=0;O<=C;O++){var V=w[2*O+1];V!==0&&(w[2*O]=de(G[V]++,V))}}function se(w){var C;for(C=0;C<v;C++)w.dyn_ltree[2*C]=0;for(C=0;C<h;C++)w.dyn_dtree[2*C]=0;for(C=0;C<y;C++)w.bl_tree[2*C]=0;w.dyn_ltree[2*E]=1,w.opt_len=w.static_len=0,w.last_lit=w.matches=0}function ae(w){8<w.bi_valid?te(w,w.bi_buf):0<w.bi_valid&&(w.pending_buf[w.pending++]=w.bi_buf),w.bi_buf=0,w.bi_valid=0}function Ee(w,C,j,$){var O=2*C,G=2*j;return w[O]<w[G]||w[O]===w[G]&&$[C]<=$[j]}function fe(w,C,j){for(var $=w.heap[j],O=j<<1;O<=w.heap_len&&(O<w.heap_len&&Ee(C,w.heap[O+1],w.heap[O],w.depth)&&O++,!Ee(C,$,w.heap[O],w.depth));)w.heap[j]=w.heap[O],j=O,O<<=1;w.heap[j]=$}function $e(w,C,j){var $,O,G,Y,V=0;if(w.last_lit!==0)for(;$=w.pending_buf[w.d_buf+2*V]<<8|w.pending_buf[w.d_buf+2*V+1],O=w.pending_buf[w.l_buf+V],V++,$===0?Z(w,O,C):(Z(w,(G=p[O])+f+1,C),(Y=R[G])!==0&&K(w,O-=P[G],Y),Z(w,G=D(--$),j),(Y=T[G])!==0&&K(w,$-=W[G],Y)),V<w.last_lit;);Z(w,E,C)}function Be(w,C){var j,$,O,G=C.dyn_tree,Y=C.stat_desc.static_tree,V=C.stat_desc.has_stree,ne=C.stat_desc.elems,le=-1;for(w.heap_len=0,w.heap_max=m,j=0;j<ne;j++)G[2*j]!==0?(w.heap[++w.heap_len]=le=j,w.depth[j]=0):G[2*j+1]=0;for(;w.heap_len<2;)G[2*(O=w.heap[++w.heap_len]=le<2?++le:0)]=1,w.depth[O]=0,w.opt_len--,V&&(w.static_len-=Y[2*O+1]);for(C.max_code=le,j=w.heap_len>>1;1<=j;j--)fe(w,G,j);for(O=ne;j=w.heap[1],w.heap[1]=w.heap[w.heap_len--],fe(w,G,1),$=w.heap[1],w.heap[--w.heap_max]=j,w.heap[--w.heap_max]=$,G[2*O]=G[2*j]+G[2*$],w.depth[O]=(w.depth[j]>=w.depth[$]?w.depth[j]:w.depth[$])+1,G[2*j+1]=G[2*$+1]=O,w.heap[1]=O++,fe(w,G,1),2<=w.heap_len;);w.heap[--w.heap_max]=w.heap[1],function(ue,Ne){var Nt,We,Lt,he,xn,Dr,Ke=Ne.dyn_tree,$s=Ne.max_code,Cf=Ne.stat_desc.static_tree,Rf=Ne.stat_desc.has_stree,Of=Ne.stat_desc.extra_bits,Ws=Ne.stat_desc.extra_base,Ut=Ne.stat_desc.max_length,In=0;for(he=0;he<=_;he++)ue.bl_count[he]=0;for(Ke[2*ue.heap[ue.heap_max]+1]=0,Nt=ue.heap_max+1;Nt<m;Nt++)Ut<(he=Ke[2*Ke[2*(We=ue.heap[Nt])+1]+1]+1)&&(he=Ut,In++),Ke[2*We+1]=he,$s<We||(ue.bl_count[he]++,xn=0,Ws<=We&&(xn=Of[We-Ws]),Dr=Ke[2*We],ue.opt_len+=Dr*(he+xn),Rf&&(ue.static_len+=Dr*(Cf[2*We+1]+xn)));if(In!==0){do{for(he=Ut-1;ue.bl_count[he]===0;)he--;ue.bl_count[he]--,ue.bl_count[he+1]+=2,ue.bl_count[Ut]--,In-=2}while(0<In);for(he=Ut;he!==0;he--)for(We=ue.bl_count[he];We!==0;)$s<(Lt=ue.heap[--Nt])||(Ke[2*Lt+1]!==he&&(ue.opt_len+=(he-Ke[2*Lt+1])*Ke[2*Lt],Ke[2*Lt+1]=he),We--)}}(w,C),ye(G,le,w.bl_count)}function l(w,C,j){var $,O,G=-1,Y=C[1],V=0,ne=7,le=4;for(Y===0&&(ne=138,le=3),C[2*(j+1)+1]=65535,$=0;$<=j;$++)O=Y,Y=C[2*($+1)+1],++V<ne&&O===Y||(V<le?w.bl_tree[2*O]+=V:O!==0?(O!==G&&w.bl_tree[2*O]++,w.bl_tree[2*A]++):V<=10?w.bl_tree[2*I]++:w.bl_tree[2*L]++,G=O,le=(V=0)===Y?(ne=138,3):O===Y?(ne=6,3):(ne=7,4))}function z(w,C,j){var $,O,G=-1,Y=C[1],V=0,ne=7,le=4;for(Y===0&&(ne=138,le=3),$=0;$<=j;$++)if(O=Y,Y=C[2*($+1)+1],!(++V<ne&&O===Y)){if(V<le)for(;Z(w,O,w.bl_tree),--V!=0;);else O!==0?(O!==G&&(Z(w,O,w.bl_tree),V--),Z(w,A,w.bl_tree),K(w,V-3,2)):V<=10?(Z(w,I,w.bl_tree),K(w,V-3,3)):(Z(w,L,w.bl_tree),K(w,V-11,7));G=O,le=(V=0)===Y?(ne=138,3):O===Y?(ne=6,3):(ne=7,4)}}u(W);var F=!1;function S(w,C,j,$){K(w,(c<<1)+($?1:0),3),function(O,G,Y,V){ae(O),te(O,Y),te(O,~Y),s.arraySet(O.pending_buf,O.window,G,Y,O.pending),O.pending+=Y}(w,C,j)}i._tr_init=function(w){F||(function(){var C,j,$,O,G,Y=new Array(_+1);for(O=$=0;O<d-1;O++)for(P[O]=$,C=0;C<1<<R[O];C++)p[$++]=O;for(p[$-1]=O,O=G=0;O<16;O++)for(W[O]=G,C=0;C<1<<T[O];C++)U[G++]=O;for(G>>=7;O<h;O++)for(W[O]=G<<7,C=0;C<1<<T[O]-7;C++)U[256+G++]=O;for(j=0;j<=_;j++)Y[j]=0;for(C=0;C<=143;)q[2*C+1]=8,C++,Y[8]++;for(;C<=255;)q[2*C+1]=9,C++,Y[9]++;for(;C<=279;)q[2*C+1]=7,C++,Y[7]++;for(;C<=287;)q[2*C+1]=8,C++,Y[8]++;for(ye(q,v+1,Y),C=0;C<h;C++)k[2*C+1]=5,k[2*C]=de(C,5);X=new J(q,R,f+1,v,_),B=new J(k,T,0,h,_),H=new J(new Array(0),x,0,y,b)}(),F=!0),w.l_desc=new N(w.dyn_ltree,X),w.d_desc=new N(w.dyn_dtree,B),w.bl_desc=new N(w.bl_tree,H),w.bi_buf=0,w.bi_valid=0,se(w)},i._tr_stored_block=S,i._tr_flush_block=function(w,C,j,$){var O,G,Y=0;0<w.level?(w.strm.data_type===2&&(w.strm.data_type=function(V){var ne,le=4093624447;for(ne=0;ne<=31;ne++,le>>>=1)if(1&le&&V.dyn_ltree[2*ne]!==0)return o;if(V.dyn_ltree[18]!==0||V.dyn_ltree[20]!==0||V.dyn_ltree[26]!==0)return a;for(ne=32;ne<f;ne++)if(V.dyn_ltree[2*ne]!==0)return a;return o}(w)),Be(w,w.l_desc),Be(w,w.d_desc),Y=function(V){var ne;for(l(V,V.dyn_ltree,V.l_desc.max_code),l(V,V.dyn_dtree,V.d_desc.max_code),Be(V,V.bl_desc),ne=y-1;3<=ne&&V.bl_tree[2*M[ne]+1]===0;ne--);return V.opt_len+=3*(ne+1)+5+5+4,ne}(w),O=w.opt_len+3+7>>>3,(G=w.static_len+3+7>>>3)<=O&&(O=G)):O=G=j+5,j+4<=O&&C!==-1?S(w,C,j,$):w.strategy===4||G===O?(K(w,2+($?1:0),3),$e(w,q,k)):(K(w,4+($?1:0),3),function(V,ne,le,ue){var Ne;for(K(V,ne-257,5),K(V,le-1,5),K(V,ue-4,4),Ne=0;Ne<ue;Ne++)K(V,V.bl_tree[2*M[Ne]+1],3);z(V,V.dyn_ltree,ne-1),z(V,V.dyn_dtree,le-1)}(w,w.l_desc.max_code+1,w.d_desc.max_code+1,Y+1),$e(w,w.dyn_ltree,w.dyn_dtree)),se(w),$&&ae(w)},i._tr_tally=function(w,C,j){return w.pending_buf[w.d_buf+2*w.last_lit]=C>>>8&255,w.pending_buf[w.d_buf+2*w.last_lit+1]=255&C,w.pending_buf[w.l_buf+w.last_lit]=255&j,w.last_lit++,C===0?w.dyn_ltree[2*j]++:(w.matches++,C--,w.dyn_ltree[2*(p[j]+f+1)]++,w.dyn_dtree[2*D(C)]++),w.last_lit===w.lit_bufsize-1},i._tr_align=function(w){K(w,2,3),Z(w,E,q),function(C){C.bi_valid===16?(te(C,C.bi_buf),C.bi_buf=0,C.bi_valid=0):8<=C.bi_valid&&(C.pending_buf[C.pending++]=255&C.bi_buf,C.bi_buf>>=8,C.bi_valid-=8)}(w)}},{"../utils/common":41}],53:[function(n,r,i){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,i){(function(s){(function(o,a){if(!o.setImmediate){var u,c,d,f,v=1,h={},y=!1,m=o.document,_=Object.getPrototypeOf&&Object.getPrototypeOf(o);_=_&&_.setTimeout?_:o,u={}.toString.call(o.process)==="[object process]"?function(A){process.nextTick(function(){b(A)})}:function(){if(o.postMessage&&!o.importScripts){var A=!0,I=o.onmessage;return o.onmessage=function(){A=!1},o.postMessage("","*"),o.onmessage=I,A}}()?(f="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",E,!1):o.attachEvent("onmessage",E),function(A){o.postMessage(f+A,"*")}):o.MessageChannel?((d=new MessageChannel).port1.onmessage=function(A){b(A.data)},function(A){d.port2.postMessage(A)}):m&&"onreadystatechange"in m.createElement("script")?(c=m.documentElement,function(A){var I=m.createElement("script");I.onreadystatechange=function(){b(A),I.onreadystatechange=null,c.removeChild(I),I=null},c.appendChild(I)}):function(A){setTimeout(b,0,A)},_.setImmediate=function(A){typeof A!="function"&&(A=new Function(""+A));for(var I=new Array(arguments.length-1),L=0;L<I.length;L++)I[L]=arguments[L+1];var R={callback:A,args:I};return h[v]=R,u(v),v++},_.clearImmediate=g}function g(A){delete h[A]}function b(A){if(y)setTimeout(b,0,A);else{var I=h[A];if(I){y=!0;try{(function(L){var R=L.callback,T=L.args;switch(T.length){case 0:R();break;case 1:R(T[0]);break;case 2:R(T[0],T[1]);break;case 3:R(T[0],T[1],T[2]);break;default:R.apply(a,T)}})(I)}finally{g(A),y=!1}}}}function E(A){A.source===o&&typeof A.data=="string"&&A.data.indexOf(f)===0&&b(+A.data.slice(f.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof rn<"u"?rn:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(xr)),xr.exports}var af=of();const uf=Qi(af),cf=Gi();function je(t,e,n){try{return e?new URL(t,e):new URL(t)}catch(r){const i=`Failed to construct URL in ${n||"unknown context"}:
  URL: "${String(t)}" (type: ${typeof t})
  Base: "${e?String(e):"undefined"}" (type: ${typeof e})
  Original error: ${r instanceof Error?r.message:String(r)}`,s=new Error(i);throw s.name="URLConstructionError",s}}function lf(t){var e=t.indexOf("_max");switch(e!=-1&&(t=t.substring(0,e)),t){case"image":return 1e4;case"font":return 1e3;case"js":return 260;case"css":return 260;default:return 0}}const yn=["image","font","js","css","others"],Ms=["image","font","script","css","stream"];function df(){for(var t={},e=0,n=yn.length;e<n;e++)t[yn[e]+"_max"]=lf(yn[e]);return t.emdate=!1,t.emsrc=!1,t.showsave=!1,t.dltype=kt.All,t.timeout=60,t.noscript=!1,t.loadlazy=!0,t}const kt={All:0,KeepStyle:1,Minimal:2};let Me=df(),bn=new Map;class Ze{constructor(e){pe(this,"id");pe(this,"url");pe(this,"title");pe(this,"dltype");pe(this,"doc");pe(this,"elemcount");pe(this,"xhrs");pe(this,"now");pe(this,"cancelled",!1);pe(this,"currentDepth");pe(this,"isMultiPage");pe(this,"maxDepth");pe(this,"sharedData");this.id=e.id,this.url=e.url,this.dltype=e.dltype,this.elemcount=0,this.xhrs=[],this.now=new Date,this.currentDepth=e.currentDepth,this.isMultiPage=e.isMultiPage,this.maxDepth=e.maxDepth;var n=new DOMParser;this.doc=n.parseFromString(e.html,"text/html"),this.title=e.title||this.doc.title||"PAGE",this.setupBaseTag(this.doc,this.url)}static disposeExistingAndCreate(e){return Ze.dispose(e.id),new Ze(e)}static create(e){return new Ze(e)}static async runChain(e){e.sharedData={chain:[e],processedLinks:new Map,cancelled:!1,linksCollected:0,someLinksNotDownloaded:!1},console.log("Start chain");const n=[];for(;e.sharedData.chain.length>0&&!e.sharedData.cancelled;){const r=e.sharedData.chain.shift();if(r){if(bn.set(r.id,r),r.currentDepth<=r.maxDepth){console.log("New task");const i=await r.convert();i?n.push(i):await Ar("NoDownloadableInfo")}}else await Ar("MissingCurrentTask")}if(bn.delete(e.id),!e.cancelled&&!e.sharedData.cancelled){const r=await gf(n,e.url,e.now,e.sharedData.processedLinks,e.isMultiPage,e.maxDepth,e.sharedData.someLinksNotDownloaded);await fr("dataPrepared",{downloadableInfo:r,url:e.url})}Ze.dispose(e.id)}static dispose(e){const n=bn.get(e);n&&(n.close(),n.sharedData.chain=[],n.sharedData.cancelled=!0,bn.delete(e))}putNewTask(e){this.sharedData.chain.push(e),e.sharedData=this.sharedData}setupBaseTag(e,n){const r=e.querySelector("base");if(r){const i=r.getAttribute("href");if(i)try{new URL(i)}catch{const o=Ir(n);if(o){const a=je(i,o,"setupBaseTag-resolveRelative").href;r.href=a}else r.href=n}else r.href=n}else{const i=e.createElement("base");i.href=n,e.head.appendChild(i)}}close(){const e=this;for(var n=0,r=e.xhrs.length;n<r;n++){var i=e.xhrs[n];i&&i.readyState!==XMLHttpRequest.DONE&&i.abort()}e.cancelled=!0,e.xhrs=[]}removeMeta(){var a,u;for(var n=this.doc.getElementsByTagName("meta"),r=0,i=n.length;r<i;r++){var s=n[r],o=s.getAttribute("charset");if(o){(a=s.parentNode)==null||a.removeChild(s);break}else if(o=s.getAttribute("content"),o&&o.toLowerCase().indexOf("charset")!=-1){(u=s.parentNode)==null||u.removeChild(s);break}}}removeTags(){var I,L;if(this.dltype==kt.All)return;const e=this.doc;var n,r,i;if(Me.noscript==!0)for(r=e.getElementsByTagName("noscript");r.length>0;){var s=r[0],o=s.parentNode,a=s.innerHTML.replaceAll("&lt;","<").replaceAll("&gt;",">").trim();s.insertAdjacentHTML("afterend",a),o==null||o.removeChild(s)}n=["meta","script","iframe","link","style"];for(var u=0,c=n.length;u<c;u++)if(!(u==4&&this.dltype==kt.KeepStyle)){var d=u==3&&this.dltype==kt.KeepStyle;for(r=e.getElementsByTagName(n[u]),E=r.length-1;E>=0;E--)i=r[E],!(d==!0&&i.getAttribute("rel")=="stylesheet")&&((I=i.parentNode)==null||I.removeChild(i))}r=e.getElementsByTagName("a");for(var u=r.length-1;u>=0;u--){i=r[u];var f=i.children;if(f.length==1){var v=f[0],h=v.tagName;if(!h||h.toLowerCase()!="img")continue;var o=i.parentNode;v.removeAttribute("width"),v.removeAttribute("height"),o==null||o.insertBefore(v,i),o==null||o.removeChild(i)}}var y;n=["div","span","p"];do{y=!1;for(var m=0,_=n.length;m<_;m++){r=e.getElementsByTagName(n[m]);for(var u=r.length-1;u>=0;u--)i=r[u],i.innerHTML||((L=i.parentNode)==null||L.removeChild(i),y=!0)}}while(y==!0);var g=function(R){for(var T=R.childNodes.length-1;T>=0;T--)i=R.childNodes[T],i.nodeType===Node.COMMENT_NODE?i.parentNode.removeChild(i):g(i)};g(e),r=e.getElementsByTagName("*");for(var u=0,b=r.length;u<b;u++){i=r[u];for(var E=i.attributes.length-1;E>=0;E--){var A=i.attributes[E].name.toLowerCase();(this.dltype!=kt.KeepStyle&&(A=="class"||A=="style")||this.dltype==kt.Minimal&&A=="id"||A.substr(0,2)=="on")&&i.removeAttribute(A)}}}convertPre(){var c;const e=this.doc;var n,r;n=e.getElementsByTagName("pre");for(var i=0,s=n.length;i<s;i++){r=n[i];for(var o=r.getElementsByTagName("br"),a=o.length-1;a>=0;a--){var u=e.createTextNode(`
`);(c=o[a].parentNode)==null||c.replaceChild(u,o[a])}}}appendProp(){if(!Me.emsrc&&!Me.emdate)return;const e=this.doc;var n=e.createElement("div");n.setAttribute("style","position:fixed;z-index:999999;text-align:center;width:100%;bottom:0;");var r=e.createElement("div");if(r.setAttribute("style","display:inline;padding:0.5em;background-color:rgba(255,255,255,0.9);color:black;"),Me.emdate){var i=e.createElement("span");i.textContent=this.now.toLocaleString(),r.appendChild(i)}if(Me.emsrc){var s=e.createElement("a");s.href=this.url,s.textContent=ff("showsrc"),Me.emdate&&s.setAttribute("style","margin-left:1em;"),r.appendChild(s)}n.appendChild(r),e.body.appendChild(e.createComment("Single HTML Downloader info")),e.body.appendChild(n)}checkFinish(){const e=this;if(!this.cancelled&&!this.sharedData.cancelled)return console.log("Create downloadable file"),hf(e.title,e.url,e.doc)}getScheme(e){var n=e.indexOf("://");return n!=-1?e.substring(0,n):""}getExactlyUrl(e,n){n||(n=this.url);var i=je(e,n,"getExactlyUrl");return i.href}checkDownloadSize(e,n){var r=e.getResponseHeader("content-type");if(typeof r=="string"){for(var i=r.toLowerCase(),s=0,o=Ms.length;s<o;s++)if(i.indexOf(Ms[s])!=-1){var a=yn[s]+"_max";return n<=Me[a]*1024}}return n<=Me.others_max*1024}async downloadContent(e,n,r){return new Promise((i,s)=>{let o=new XMLHttpRequest;var a=!1;this.xhrs.push(o),e?(o.responseType="text",o.overrideMimeType("text/css; charset=utf-8")):o.responseType="arraybuffer",Me.timeout>0&&(o.timeout=Me.timeout*1e3),o.open("GET",n,!0),o.ontimeout=u=>{i({success:!1,param:r,errmsg:"Timeout. skipped."})},o.onprogress=u=>{a==!1&&u.total>0&&(this.checkDownloadSize(o,u.total)==!1?(i({success:!1,param:r,errmsg:"file size exceeds the value. Skipped."}),o.abort()):a=!0)},o.onload=function(){var u=this.response;if(e==!1){for(var c=o.getResponseHeader("content-type"),d=new Uint8Array(u),f=d.length,v="",h=0;h<f;h++)v+=String.fromCharCode(d[h]);u="data:"+c+";base64,"+btoa(v)}i({success:!0,data:u,param:r})},o.onerror=function(u){i({success:!1,errmsg:u.message,param:r})};try{o.send()}catch(u){i({success:!1,errmsg:u.message,param:r})}})}async downloadText(e,n){return await this.downloadContent(!0,e,n)}async downloadImage(e,n){return await this.downloadContent(!1,e,n)}async convertCssUrl(e,n){for(var r=[],i,s=/url\((['"]?)(.+?)\1\)/ig;(i=s.exec(n))!==null;)r.push({start:i.index,fulllen:i[0].length,url:i[i.length-1],data:""});var o=r.length,a=async function(){if(o--,o<=0){for(var d="",f=0,v=0,h=r.length;v<h;v++)d+=n.substring(f,r[v].start),d+='url("'+r[v].data+'")',f=r[v].start+r[v].fulllen;return d+=n.substr(f),d}};if(o==0){const d=await a();return d?[d]:[]}const u=[];for(let d=0,f=r.length;d<f;d++){let v=r[d].url;if(v.substr(0,4)=="data"){r[d].data=v;const h=a();u.push(h)}else{v=this.getExactlyUrl(v,e);const h=await this.downloadImage(v,d);r[h.param].data=h.data;const y=a();u.push(y)}}return(await Promise.all(u)).filter(d=>d!==void 0)}async getSubFiles(){const e=this;var n,r,i,s=[],o,a;n=["img","script","link"];for(var u=0,c=n.length;u<c;u++){r=e.doc.getElementsByTagName(n[u]);for(var d=0,f=r.length;d<f;d++){switch(i=r[d],o=!1,u){case 0:const _=i;a=_.currentSrc!=""?_.currentSrc:_.src,o=a.substring(0,4)=="http";break;case 1:const g=i;o=g.src!==void 0&&g.src!="";break;case 2:const b=i;if(b.href){var v=b.rel.toLowerCase();o=v=="stylesheet"||v=="shortcut icon"||v=="preload"}break}o==!0&&s.push(i)}}if(e.elemcount=s.length,e.elemcount==0)return e.checkFinish();const h=[];for(var u=0,y=e.elemcount;u<y;u++){var m=s[u].tagName.toLowerCase();if(m=="img"||m=="link"&&s[u].rel.toLowerCase()!="stylesheet"){var a;Me.loadlazy==!0&&m=="img"&&s[u].hasAttribute("data-src")?a=s[u].getAttribute("data-src"):a=m=="img"?s[u].src:s[u].href;const b=e.downloadImage(a,u).then(E=>{if(E.success){let A=E.param;s[A].src?s[A].src=E.data:s[A].href=E.data,s[A].removeAttribute("srcset"),s[A].removeAttribute("data-srcset"),s[A].removeAttribute("data-src")}});h.push(b)}else if(m=="script"){const g=e.downloadText(s[u].src,u).then(b=>{if(b.success==!0){let E=b.param,A=s[E];A.removeAttribute("src"),A.textContent=b.data.replace(/<(\/*)script>/gi,"\\x3c$1script\\x3e")}});h.push(g)}else{const g=e.downloadText(s[u].href,u).then(async b=>{if(b.success){let E=b.param,A=s[E],I=A.parentNode;(await e.convertCssUrl(A.href,b.data)).forEach(R=>{if(R!==null){var T=e.doc.createElement("style"),x=A.getAttribute("media");x&&T.setAttribute("media",x),T.textContent=R,I.insertBefore(T,A),I.removeChild(A)}})}});h.push(g)}}return await Promise.all(h),e.checkFinish()}async processLinks(){const e=this;if(e.currentDepth>=e.maxDepth||e.cancelled||e.sharedData.cancelled)return;const n=Ir(e.url);let r=e.doc.getElementsByTagName("a");const i=Array.from(r).map(s=>s.href).filter(s=>Ir(s)===n).map(s=>Tr(s)).filter(s=>!this.sharedData.processedLinks.has(s));this.sharedData.linksCollected+=i.length;for(let s=0,o=i.length;s<o;s++){if(this.cancelled||this.sharedData.cancelled)return;await Ef(this.sharedData.linksCollected,i[s]),await this.fetchNewTask(i[s])}}async fetchNewTask(e){console.log("Loading new task:"+e,"depth: "+this.currentDepth);try{const n=await fetch(e);if(!n.ok){this.sharedData.someLinksNotDownloaded=!0;return}const r=await n.text(),i=Ze.create({dltype:0,html:r,title:void 0,url:e,id:this.id,currentDepth:this.currentDepth+1,isMultiPage:this.isMultiPage,maxDepth:this.maxDepth});this.putNewTask(i)}catch(n){if(n instanceof TypeError&&n.message==="Failed to fetch")this.sharedData.someLinksNotDownloaded=!0;else throw n}}async convert(){if(this.sharedData.processedLinks.has(this.url)){await Ar("LinkAlreadyProcessed",this.url);return}this.sharedData.processedLinks.set(this.url,void 0);const e=this;if(e.url==="https://extensiontechnologies-332ae.web.app/website_downloader"){console.log("Download welcome page");const n=chrome.runtime.getURL("data/Extension-Technologies.html"),i=await(await fetch(n)).text();return{url:e.url,filename:"Extension-Technologies.html",doc:i}}else return e.removeMeta(),e.removeTags(),e.convertPre(),e.appendProp(),this.isMultiPage&&await e.processLinks(),await e.getSubFiles()}}function ff(t){var e=chrome.i18n.getMessage(t);return e||'("'+t+'" is not defined)'}function hf(t,e,n){let r=t.replace(/[\r\n]/g,"").replace(/[\\/:*?"<>|~.]/g,"_").trim();r.length>45&&(r=r.substring(0,50)),r||(r="webpage");const i=r+".html";return{url:e,filename:i,doc:n}}function wn(t){return t.endsWith(".html")?t.slice(0,-5).replace(/[\r\n]/g,"").replace(/[\\/:*?"<>|~.]/g,"_").trim()+".html":t.replace(/[\r\n]/g,"").replace(/[\\/:*?"<>|~.]/g,"_").trim()}function Ir(t){try{const e=je(t,void 0,"getRootDomain");return`${e.protocol}//${e.host}`}catch{return console.error("Invalid URL:",t),null}}function pf(t){try{return`${je(t,void 0,"getHost").host}`}catch{return console.error("Invalid URL:",t),null}}function Tr(t){try{const e=je(t,void 0,"cleanUrl");return`${e.origin}${e.pathname}`}catch{return t}}async function gf(t,e,n,r,i,s,o){if(console.log("Amount of data received: "+t.length),t.length===1){let a=t[0];const u=Bs(a.doc,n),c=new Blob([u],{type:"text/html"}),d=URL.createObjectURL(c);return{options:{filename:a.filename,url:d,saveAs:!1},isMultiPage:i,maxDepth:s,someLinksNotDownloaded:o}}else if(t.length>1){const a=pf(e)||"website",u=new uf,c=u.folder(Cr(a))||u;yf(t,r),t.forEach(function(v){const h=mf(v.url),y=vf(v.url),m=Bs(v.doc,n);h.length>0?(c.folder(h)||c).file(y,m):c.file(y,m)});const d=await u.generateAsync({type:"blob"}),f=URL.createObjectURL(d);return{options:{filename:`${a}.zip`,url:f,saveAs:!1},isMultiPage:i,maxDepth:s,someLinksNotDownloaded:o}}}function Cr(t){return t.endsWith(".app")?t.slice(0,-4)+"_app":t}function mf(t){try{const e=je(t,void 0,"urlToFolderPath"),n=e.pathname.split("/").filter(Boolean);return e.pathname.endsWith("/")||n.pop(),n.map(Cr).join("/")}catch{return""}}function vf(t){try{const n=je(t,void 0,"urlToFilename").pathname;if(n.endsWith("/")||!n||n==="/")return"index.html";const r=n.split("/").pop()||"";return r.endsWith(".html")?wn(r):`${wn(r)}.html`}catch(e){return console.error("Invalid URL:",e),"index.html"}}function Bs(t,e){return t instanceof Document?_f(t,e):t}function _f(t,e){let n='<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="download_date" content="'+e.toISOString()+'"/>';return n+=t.documentElement.innerHTML.substring(t.documentElement.innerHTML.indexOf(">")+1),n}function yf(t,e){t.forEach(function(n){n.doc instanceof Document&&bf(n.doc,e)})}function bf(t,e){const n=t.querySelectorAll("base");if(n.length===0)return;let r=null;for(const u of n){const c=u.getAttribute("href");if(c){r=c;break}}if(!r)return;n.forEach(u=>u.remove());const i=u=>{if(!u)return null;if(u.startsWith("data:"))return u;try{let c=u.startsWith("http")?u:je(u,r,"inlineRelativeLinks-resolveUrl").href;if(c=Tr(c),c===Tr(r))return".";if(e.has(c)||c.endsWith("/")&&e.has(c+"index.html")||c.endsWith("/index.html")&&e.has(c.slice(0,-10))){const f=s(c,r);return f.endsWith(".html")?f:f+".html"}return c}catch(c){return console.error("Error resolving URL:",c),cf.captureException(c,{data:{context:"inlineRelativeLinks-resolveUrl",relativeUrl:u,baseUrl:r}}),null}},s=(u,c)=>{const d=je(u,void 0,"makeRelativePath-absolute").pathname,f=je(c,void 0,"makeRelativePath-base").pathname,v=d.split("/").filter(b=>b!==""),h=f.split("/").filter(b=>b!=="");let y=0;for(;y<v.length&&y<h.length&&v[y]===h[y];)y++;const m=h.length-y-1,_=v.slice(y),g=_.map((b,E)=>(E===_.length-1&&b.endsWith(".html"),wn(b)));return(m>=0?"../".repeat(m):"")+g.join("/")},o=(u,c)=>{const d=u.getAttribute(c),f=i(d);console.log("Updating attribute",c,"from",d,"to",f),f&&u.setAttribute(c,f)},a=[["a","href"],["link","href"],["script","src"],["img","src"],["iframe","src"],["source","src"],["video","src"],["audio","src"],["form","action"]];for(const[u,c]of a)t.querySelectorAll(u).forEach(d=>{o(d,c)})}function wf(t){return t.length>30?`${t.slice(0,10)}...${t.slice(-20)}`:t}async function Ef(t,e){let n="";t>0&&(n="Collected "+t+" links. "),await fr("infoMessage","<strong>Do not close the page.</strong><br>"+n+"Loading "+wf(e))}const Sf={matches:["http://*/*","https://*/*"],main(){kf()}};function kf(){let t=Gi();ts("collectHtml",async e=>{await $c(t,void 0,async()=>{const{linkDepth:n}=await chrome.storage.sync.get({linkDepth:1}),r=Ze.disposeExistingAndCreate({id:e.data.tabId,url:document.URL,title:document.title,dltype:0,html:document.documentElement.innerHTML,currentDepth:0,isMultiPage:e.data.isMultiPage,maxDepth:n});await Ze.runChain(r)},async()=>{await fr("cancel",e.data.tabId)})}),ts("cancelLoadingLink",async e=>{console.log("Downloading cancelled"),Ze.dispose(e.data)}),Af()}function Af(){chrome.storage.sync.get(["onPageDownload"],function(e){e.onPageDownload?(console.log("onPageDownload is enabled"),t()):console.log("Feature is disabled")});function t(){const e=document.createElement("div");e.style.position="fixed",e.style.right="0",e.style.zIndex="10000",e.style.display="flex",e.style.flexDirection="column",e.style.alignItems="end";const n=window.location.hostname,r=localStorage.getItem("buttonPositionY");r?e.style.top=`${r}px`:e.style.top="50%";const i=document.createElement("button");i.id="on_page_download_button",i.style.backgroundImage=`url(${chrome.runtime.getURL("/icon/16.png")})`,i.style.backgroundSize="70% 70%",i.style.backgroundRepeat="no-repeat",i.style.backgroundPosition="center",i.style.height="30px",i.style.width="30px",i.style.padding="10px",i.style.marginBottom="2px",i.style.opacity="0.5",i.style.paddingRight="24px",i.style.color="#ffffff50",i.style.border="none",i.style.borderRadius="5px 0 0 5px",i.style.cursor="pointer";const s=document.createElement("button");s.innerText="X",s.style.fontSize="8px",s.style.height="11px",s.style.width="15px",s.style.paddingRight="2px",s.style.paddingLeft="2px",s.style.backgroundColor="#ff000050",s.style.color="#ffffff50",s.style.border="none",s.style.borderRadius="5px 5px 5px 5px",s.style.cursor="pointer";const o=document.createElement("button");o.innerText="←",o.style.paddingLeft="4px",o.style.height="30px",o.style.width="10px",o.style.backgroundColor="#007bff50",o.style.color="#ffffff50",o.style.border="none",o.style.borderRadius="5px 0 0 5px",o.style.cursor="pointer",o.style.display="none",e.appendChild(i),e.appendChild(s),e.appendChild(o),document.body.appendChild(e),localStorage.getItem(`buttonHidden_${n}`)==="true"&&(i.style.display="none",s.style.display="none",o.style.display="block");let a=!1;const u=c=>{c.preventDefault();const d=c.clientY-e.getBoundingClientRect().top;document.onmousemove=f=>{a=!0;let v=f.clientY-d;v<0&&(v=0),v>window.innerHeight-e.offsetHeight&&(v=window.innerHeight-e.offsetHeight),e.style.top=`${v}px`,localStorage.setItem("buttonPositionY",v.toString())},document.onmouseup=()=>{document.onmousemove=null,document.onmouseup=null,setTimeout(()=>a=!1,0)}};e.onmousedown=c=>{(c.target===i||c.target===s||c.target===o)&&u(c)},i.addEventListener("click",async c=>{if(a)return c.preventDefault(),c.stopImmediatePropagation(),!1;await chrome.runtime.sendMessage({msg:Hc.TriggerAction})}),s.addEventListener("click",c=>{if(a)return c.preventDefault(),c.stopImmediatePropagation(),!1;i.style.display="none",s.style.display="none",o.style.display="block",localStorage.setItem(`buttonHidden_${n}`,"true")}),o.addEventListener("click",c=>{if(a)return c.preventDefault(),c.stopImmediatePropagation(),!1;i.style.display="block",s.style.display="block",o.style.display="none",localStorage.setItem(`buttonHidden_${n}`,"false")})}}const En=(js=(zs=globalThis.browser)==null?void 0:zs.runtime)!=null&&js.id?globalThis.browser:globalThis.chrome;function Sn(t,...e){}const xf={debug:(...t)=>Sn(console.debug,...t),log:(...t)=>Sn(console.log,...t),warn:(...t)=>Sn(console.warn,...t),error:(...t)=>Sn(console.error,...t)},An=class An extends Event{constructor(e,n){super(An.EVENT_NAME,{}),this.newUrl=e,this.oldUrl=n}};pe(An,"EVENT_NAME",Or("wxt:locationchange"));let Rr=An;function Or(t){var e;return`${(e=En==null?void 0:En.runtime)==null?void 0:e.id}:content:${t}`}function If(t){let e,n;return{run(){e==null&&(n=new URL(location.href),e=t.setInterval(()=>{let r=new URL(location.href);r.href!==n.href&&(window.dispatchEvent(new Rr(r,n)),n=r)},1e3))}}}const Dt=class Dt{constructor(e,n){pe(this,"isTopFrame",window.self===window.top);pe(this,"abortController");pe(this,"locationWatcher",If(this));pe(this,"receivedMessageIds",new Set);this.contentScriptName=e,this.options=n,this.abortController=new AbortController,this.isTopFrame?(this.listenForNewerScripts({ignoreFirstEvent:!0}),this.stopOldScripts()):this.listenForNewerScripts()}get signal(){return this.abortController.signal}abort(e){return this.abortController.abort(e)}get isInvalid(){return En.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(e){return this.signal.addEventListener("abort",e),()=>this.signal.removeEventListener("abort",e)}block(){return new Promise(()=>{})}setInterval(e,n){const r=setInterval(()=>{this.isValid&&e()},n);return this.onInvalidated(()=>clearInterval(r)),r}setTimeout(e,n){const r=setTimeout(()=>{this.isValid&&e()},n);return this.onInvalidated(()=>clearTimeout(r)),r}requestAnimationFrame(e){const n=requestAnimationFrame((...r)=>{this.isValid&&e(...r)});return this.onInvalidated(()=>cancelAnimationFrame(n)),n}requestIdleCallback(e,n){const r=requestIdleCallback((...i)=>{this.signal.aborted||e(...i)},n);return this.onInvalidated(()=>cancelIdleCallback(r)),r}addEventListener(e,n,r,i){var s;n==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),(s=e.addEventListener)==null||s.call(e,n.startsWith("wxt:")?Or(n):n,r,{...i,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),xf.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){window.postMessage({type:Dt.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName,messageId:Math.random().toString(36).slice(2)},"*")}verifyScriptStartedEvent(e){var s,o,a;const n=((s=e.data)==null?void 0:s.type)===Dt.SCRIPT_STARTED_MESSAGE_TYPE,r=((o=e.data)==null?void 0:o.contentScriptName)===this.contentScriptName,i=!this.receivedMessageIds.has((a=e.data)==null?void 0:a.messageId);return n&&r&&i}listenForNewerScripts(e){let n=!0;const r=i=>{if(this.verifyScriptStartedEvent(i)){this.receivedMessageIds.add(i.data.messageId);const s=n;if(n=!1,s&&(e!=null&&e.ignoreFirstEvent))return;this.notifyInvalidated()}};addEventListener("message",r),this.onInvalidated(()=>removeEventListener("message",r))}};pe(Dt,"SCRIPT_STARTED_MESSAGE_TYPE",Or("wxt:content-script-started"));let Pr=Dt;function Zf(){}function kn(t,...e){}const Tf={debug:(...t)=>kn(console.debug,...t),log:(...t)=>kn(console.log,...t),warn:(...t)=>kn(console.warn,...t),error:(...t)=>kn(console.error,...t)};return(async()=>{try{const{main:t,...e}=Sf,n=new Pr("content",e);return await t(n)}catch(t){throw Tf.error('The content script "content" crashed on startup!',t),t}})()}();
content;
//# sourceMappingURL=content.js.map
